
<!DOCTYPE html>


<html lang="en" data-content_root="../../../" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Nest &#8212; Aeon v0.0.17 documentation</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "";
  </script>
  <!--
    this give us a css class that will be invisible only if js is disabled
  -->
  <noscript>
    <style>
      .pst-js-only { display: none !important; }

    </style>
  </noscript>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../../../_static/styles/theme.css?digest=8878045cc6db502f8baf" rel="stylesheet" />
<link href="../../../_static/styles/pydata-sphinx-theme.css?digest=8878045cc6db502f8baf" rel="stylesheet" />

    <link rel="stylesheet" type="text/css" href="../../../_static/pygments.css?v=8f2a1f02" />
    <link rel="stylesheet" type="text/css" href="../../../_static/mystnb.8ecb98da25f57f5357bf6f572d296f466b2cfe2517ffebfabe82451661e28f02.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/copybutton.css?v=76b2166b" />
    <link rel="stylesheet" type="text/css" href="../../../_static/sphinx-design.min.css?v=95c83b7e" />
    <link rel="stylesheet" type="text/css" href="../../../_static/css/custom.css?v=9651da53" />
  
  <!-- So that users can add custom icons -->
  <script src="../../../_static/scripts/fontawesome.js?digest=8878045cc6db502f8baf"></script>
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../../../_static/scripts/bootstrap.js?digest=8878045cc6db502f8baf" />
<link rel="preload" as="script" href="../../../_static/scripts/pydata-sphinx-theme.js?digest=8878045cc6db502f8baf" />

    <script src="../../../_static/documentation_options.js?v=c89ffb51"></script>
    <script src="../../../_static/doctools.js?v=9bcbadda"></script>
    <script src="../../../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../../../_static/clipboard.min.js?v=a7894cd8"></script>
    <script src="../../../_static/copybutton.js?v=f281be69"></script>
    <script src="../../../_static/design-tabs.js?v=f930bc37"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'user/aeon_modules/acquisition/nest';</script>
    <script src="../../../_static/js/workflow.js?v=1800024c"></script>
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" />
    <link rel="next" title="RFID Reader" href="rfid_reader.html" />
    <link rel="prev" title="Device Synchronisation Monitors" href="monitors.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  <meta name="docsearch:version" content="" />
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <div id="pst-skip-link" class="skip-link d-print-none"><a href="#main-content">Skip to main content</a></div>
  
  <div id="pst-scroll-pixel-helper"></div>
  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>Back to top</button>

  
  <dialog id="pst-search-dialog">
    
<form class="bd-search d-flex align-items-center"
      action="../../../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         placeholder="Search the docs ..."
         aria-label="Search the docs ..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form>
  </dialog>

  <div class="pst-async-banner-revealer d-none">
  <aside id="bd-header-version-warning" class="d-none d-print-none" aria-label="Version warning"></aside>
</div>
<aside class="bd-header-announcement" aria-label="Announcement">
  <div class="bd-header-announcement__content">This website is currently under active development. Please report any issues on <a href='https://github.com/SainsburyWellcomeCentre/aeon_docs/issues'>GitHub</a>.</div>
</aside>

  
    <header class="bd-header navbar navbar-expand-lg bd-navbar d-print-none">
<div class="bd-header__inner bd-page-width">
  <button class="pst-navbar-icon sidebar-toggle primary-toggle" aria-label="Site navigation">
    <span class="fa-solid fa-bars"></span>
  </button>
  
  
  <div class="col-lg-3 navbar-header-items__start">
    
      <div class="navbar-item">

  
    
  

<a class="navbar-brand logo" href="../../../index.html">
  
  
  
  
  
  
    <p class="title logo__title">Aeon v0.0.17</p>
  
</a></div>
    
  </div>
  
  <div class="col-lg-9 navbar-header-items">
    
    <div class="me-auto navbar-header-items__center">
      
        <div class="navbar-item">
<nav>
  <ul class="bd-navbar-elements navbar-nav">
    
<li class="nav-item ">
  <a class="nav-link nav-internal" href="../../../getting_started/index.html">
    Getting Started
  </a>
</li>


<li class="nav-item current active">
  <a class="nav-link nav-internal" href="../../index.html">
    User Guide
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../../../contributor/index.html">
    Contributor’s Guide
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../../../reference/index.html">
    Reference
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../../../about/index.html">
    About
  </a>
</li>

  </ul>
</nav></div>
      
    </div>
    
    
    <div class="navbar-header-items__end">
      
        <div class="navbar-item navbar-persistent--container">
          

<button class="btn search-button-field search-button__button pst-js-only" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
 <i class="fa-solid fa-magnifying-glass"></i>
 <span class="search-button__default-text">Search</span>
 <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
</button>
        </div>
      
      
        <div class="navbar-item">

<button class="btn btn-sm nav-link pst-navbar-icon theme-switch-button pst-js-only" aria-label="Color mode" data-bs-title="Color mode"  data-bs-placement="bottom" data-bs-toggle="tooltip">
  <i class="theme-switch fa-solid fa-sun                fa-lg" data-mode="light" title="Light"></i>
  <i class="theme-switch fa-solid fa-moon               fa-lg" data-mode="dark"  title="Dark"></i>
  <i class="theme-switch fa-solid fa-circle-half-stroke fa-lg" data-mode="auto"  title="System Settings"></i>
</button></div>
      
        <div class="navbar-item"><ul class="navbar-icon-links"
    aria-label="Icon Links">
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://github.com/SainsburyWellcomeCentre/aeon_docs" title="GitHub" class="nav-link pst-navbar-icon" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><i class="fa-brands fa-github fa-lg" aria-hidden="true"></i>
            <span class="sr-only">GitHub</span></a>
        </li>
</ul></div>
      
    </div>
    
  </div>
  
  
    <div class="navbar-persistent--mobile">

<button class="btn search-button-field search-button__button pst-js-only" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
 <i class="fa-solid fa-magnifying-glass"></i>
 <span class="search-button__default-text">Search</span>
 <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
</button>
    </div>
  

  
    <button class="pst-navbar-icon sidebar-toggle secondary-toggle" aria-label="On this page">
      <span class="fa-solid fa-outdent"></span>
    </button>
  
</div>

    </header>
  

  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      
      
      <dialog id="pst-primary-sidebar-modal"></dialog>
      <div id="pst-primary-sidebar" class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
      <div class="sidebar-header-items__center">
        
          
          
            <div class="navbar-item">
<nav>
  <ul class="bd-navbar-elements navbar-nav">
    
<li class="nav-item ">
  <a class="nav-link nav-internal" href="../../../getting_started/index.html">
    Getting Started
  </a>
</li>


<li class="nav-item current active">
  <a class="nav-link nav-internal" href="../../index.html">
    User Guide
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../../../contributor/index.html">
    Contributor’s Guide
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../../../reference/index.html">
    Reference
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../../../about/index.html">
    About
  </a>
</li>

  </ul>
</nav></div>
          
        
      </div>
    
    
    
      <div class="sidebar-header-items__end">
        
          <div class="navbar-item">

<button class="btn btn-sm nav-link pst-navbar-icon theme-switch-button pst-js-only" aria-label="Color mode" data-bs-title="Color mode"  data-bs-placement="bottom" data-bs-toggle="tooltip">
  <i class="theme-switch fa-solid fa-sun                fa-lg" data-mode="light" title="Light"></i>
  <i class="theme-switch fa-solid fa-moon               fa-lg" data-mode="dark"  title="Dark"></i>
  <i class="theme-switch fa-solid fa-circle-half-stroke fa-lg" data-mode="auto"  title="System Settings"></i>
</button></div>
        
          <div class="navbar-item"><ul class="navbar-icon-links"
    aria-label="Icon Links">
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://github.com/SainsburyWellcomeCentre/aeon_docs" title="GitHub" class="nav-link pst-navbar-icon" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><i class="fa-brands fa-github fa-lg" aria-hidden="true"></i>
            <span class="sr-only">GitHub</span></a>
        </li>
</ul></div>
        
      </div>
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">
<nav class="bd-docs-nav bd-links"
     aria-label="Section Navigation">
  <p class="bd-links__title" role="heading" aria-level="1">Section Navigation</p>
  <div class="bd-toc-item navbar-nav"><ul class="current nav bd-sidenav">
<li class="toctree-l1 current active has-children"><a class="reference internal" href="../../aeon_modules.html">Aeon Modules</a><details open="open"><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul class="current">
<li class="toctree-l2 has-children"><a class="reference internal" href="../hardware.html">Hardware Assembly</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l3"><a class="reference internal" href="../hardware/commutation_translation.html">Commutation-Translation System</a></li>
<li class="toctree-l3"><a class="reference internal" href="../hardware/foraging_patch.html">Foraging Patch</a></li>
<li class="toctree-l3"><a class="reference internal" href="../hardware/habitat.html">Habitat</a></li>
<li class="toctree-l3"><a class="reference internal" href="../hardware/nest.html">Nest</a></li>
<li class="toctree-l3"><a class="reference internal" href="../connections/camera.html">Camera Wiring Schematic</a></li>
<li class="toctree-l3"><a class="reference internal" href="../connections/camera_controller.html">Camera Controller Wiring Schematic</a></li>
<li class="toctree-l3"><a class="reference internal" href="../connections/commutation_translation_system.html">Commutation-Translation System Wiring Schematic</a></li>
<li class="toctree-l3"><a class="reference internal" href="../connections/foraging_patch.html">Foraging Patch Wiring Schematic</a></li>
<li class="toctree-l3"><a class="reference internal" href="../connections/foraging_patch_output_expander.html">Foraging Patch Output Expander Wiring Schematic</a></li>
<li class="toctree-l3"><a class="reference internal" href="../connections/microphone.html">Microphone Wiring Schematic</a></li>
<li class="toctree-l3"><a class="reference internal" href="../connections/rfid_reader.html">RFID Reader Wiring Schematic</a></li>
<li class="toctree-l3"><a class="reference internal" href="../connections/sound_card.html">Sound Card Wiring Schematic</a></li>
<li class="toctree-l3"><a class="reference internal" href="../connections/timestamp_generator.html">Timestamp Generator Wiring Schematic</a></li>
<li class="toctree-l3"><a class="reference internal" href="../connections/weighing_scale.html">Weighing Scale Wiring Schematic</a></li>
</ul>
</details></li>
<li class="toctree-l2 current active has-children"><a class="reference internal" href="../acquisition.html">Acquisition Modules</a><details open="open"><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="activity_tracking.html">Activity Tracking</a></li>
<li class="toctree-l3"><a class="reference internal" href="alerts.html">Alerts</a></li>
<li class="toctree-l3"><a class="reference internal" href="camera.html">Spinnaker Camera</a></li>
<li class="toctree-l3"><a class="reference internal" href="camera_controller.html">Multi-Camera Controller</a></li>
<li class="toctree-l3 has-children"><a class="reference internal" href="control_panel.html">Control Panel</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l4"><a class="reference internal" href="control_panel/annotation_source_GUI.html">AnnotationSource</a></li>
<li class="toctree-l4"><a class="reference internal" href="control_panel/button_source_GUI.html">ButtonSource</a></li>
<li class="toctree-l4"><a class="reference internal" href="control_panel/environment_state_GUI.html">EnvironmentState</a></li>
<li class="toctree-l4"><a class="reference internal" href="control_panel/experiment_properties_GUI.html">ExperimentProperties</a></li>
<li class="toctree-l4"><a class="reference internal" href="control_panel/label_control_GUI.html">LabelControl</a></li>
<li class="toctree-l4"><a class="reference internal" href="control_panel/subject_database.html">SubjectDatabase <!--TODO: Placeholder content--></a></li>
</ul>
</details></li>
<li class="toctree-l3 has-children"><a class="reference internal" href="foraging_patch.html">Foraging Patch</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l4"><a class="reference internal" href="foraging_patch/patch_dispenser.html">PatchDispenser</a></li>
<li class="toctree-l4"><a class="reference internal" href="foraging_patch/pellet_monitor.html">PelletMonitor</a></li>
<li class="toctree-l4"><a class="reference internal" href="foraging_patch/time_since_last_event.html">TimeSinceLastEvent</a></li>
<li class="toctree-l4"><a class="reference internal" href="foraging_patch/time_spent_on_wheel.html">TimeSpentOnWheel</a></li>
</ul>
</details></li>
<li class="toctree-l3"><a class="reference internal" href="logging.html">Logging</a></li>
<li class="toctree-l3"><a class="reference internal" href="monitors.html">Device Synchronisation Monitors</a></li>
<li class="toctree-l3 current active"><a class="current reference internal" href="#">Nest</a></li>
<li class="toctree-l3"><a class="reference internal" href="rfid_reader.html">RFID Reader</a></li>
<li class="toctree-l3"><a class="reference internal" href="subject_tracking.html">Subject Tracking</a></li>
</ul>
</details></li>
</ul>
</details></li>
<li class="toctree-l1"><a class="reference internal" href="../../sample_datasets.html">Sample Datasets</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../tutorials.html">Tutorials</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="../../tutorials/aeon_dj_pipeline.html">DataJoint pipeline for Aeon</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../tutorials/general_experimental_workflow.html">General experimental workflow infrastructure</a></li>
</ul>
</details></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../how_to.html">How-to Guides</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="../../how_to/dj_data_ingestion_and_processing.html">DataJoint pipeline: Data ingestion and processing</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../how_to/dj_data_loading.html">Helper functions</a></li>

<li class="toctree-l2"><a class="reference internal" href="../../how_to/dj_pipeline_local_deployment.html">DataJoint pipeline: On-premises deployment</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../how_to/dj_querying_data.html">DataJoint pipeline: Querying data</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../how_to/hmm_example.html">Hidden Markov Model analysis of mouse behavioural syntax</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../how_to/io_api_example_copy.html">Data access using the low-level API</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../how_to/social_analysis1_static.html">Platform paper social experiment analysis: Part 1</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../how_to/social_analysis2.html">Platform paper social experiment analysis: Part 2</a></li>
</ul>
</details></li>
</ul>
</div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
      <div class="sidebar-primary-item">
<div id="ethical-ad-placement"
      class="flat"
      data-ea-publisher="readthedocs"
      data-ea-type="readthedocs-sidebar"
      data-ea-manual="true">
</div></div>
  </div>


      </div>
      
      <main id="main-content" class="bd-main" role="main">
        
        
          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article d-print-none">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item">

<nav aria-label="Breadcrumb" class="d-print-none">
  <ul class="bd-breadcrumbs">
    
    <li class="breadcrumb-item breadcrumb-home">
      <a href="../../../index.html" class="nav-link" aria-label="Home">
        <i class="fa-solid fa-home"></i>
      </a>
    </li>
    
    <li class="breadcrumb-item"><a href="../../index.html" class="nav-link">User Guide</a></li>
    
    
    <li class="breadcrumb-item"><a href="../../aeon_modules.html" class="nav-link">Aeon Modules</a></li>
    
    
    <li class="breadcrumb-item"><a href="../acquisition.html" class="nav-link">Acquisition Modules</a></li>
    
    <li class="breadcrumb-item active" aria-current="page"><span class="ellipsis">Nest</span></li>
  </ul>
</nav>
</div>
      
    </div>
  
  
</div>
</div>
              
              
              
                
<div id="searchbox"></div>
                <article class="bd-article">
                  
  <section class="tex2jax_ignore mathjax_ignore" id="nest">
<span id="target-module-nest"></span><h1>Nest<a class="headerlink" href="#nest" title="Link to this heading">#</a></h1>
<p>The nest module is utilised with a <a class="reference internal" href="../hardware/nest.html#target-nest"><span class="std std-ref">nest</span></a> hardware module assembly (consisting of a weighing scale) to provide shelter for animals in the <a class="reference internal" href="../hardware/habitat.html#target-habitat"><span class="std std-ref">habitat</span></a> and a means to track and measure their weight.</p>
<section id="nodes">
<h2>Nodes<a class="headerlink" href="#nodes" title="Link to this heading">#</a></h2>
<section id="weightscale">
<h3>WeightScale<a class="headerlink" href="#weightscale" title="Link to this heading">#</a></h3>
<p>The <code class="docutils literal notranslate"><span class="pre">WeightScale</span> <span class="pre">(Aeon.Environment)</span></code> node establishes a serial connection to the weighing scale in the nest, allowing direct control to read the weight, as well as to send tare commands to the scale.
The node also processes the weight data from the scale to calculate a baseline weight that can be subtracted on a trigger.
It also filters the weight signal with a linear regression filter over a sliding window defined in its <a class="reference internal" href="#properties">properties</a>.
Finally, a measure of confidence for each of these readings is calculated.</p>
<!-- TODO: link to API Reference -->
<p>These measures are packaged into <code class="docutils literal notranslate"><span class="pre">Aeon.Environment.WeightMeasurement</span></code> class, each composed of the “Timestamp” (<code class="docutils literal notranslate"><span class="pre">double</span></code>), “Value” (<code class="docutils literal notranslate"><span class="pre">float</span></code>) and the “Confidence” index (<code class="docutils literal notranslate"><span class="pre">float</span></code>) of the weight measure.</p>
<section id="inputs">
<h4>Inputs<a class="headerlink" href="#inputs" title="Link to this heading">#</a></h4>
<p>None</p>
</section>
<section id="outputs">
<h4>Outputs<a class="headerlink" href="#outputs" title="Link to this heading">#</a></h4>
<p>Stream of <code class="docutils literal notranslate"><span class="pre">DynamicClass</span></code> with the following attributes:</p>
<div class="pst-scrollable-table-container"><table class="table">
<thead>
<tr class="row-odd"><th class="head"><p>Attribute name</p></th>
<th class="head"><p>Type</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><strong>RawWeight.Value</strong></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">float</span></code></p></td>
<td><p>Raw weight measurement value from the scale</p></td>
</tr>
<tr class="row-odd"><td><p><strong>RawWeight.Confidence</strong></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">float</span></code></p></td>
<td><p>Confidence score for the raw weight measurement</p></td>
</tr>
<tr class="row-even"><td><p><strong>RawWeight.Timestamp</strong></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">double</span></code></p></td>
<td><p>Timestamp when the raw weight measurement was recorded</p></td>
</tr>
<tr class="row-odd"><td><p><strong>FilteredWeight.Value</strong></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">float</span></code></p></td>
<td><p>Filtered weight measurement after smoothing/filtering</p></td>
</tr>
<tr class="row-even"><td><p><strong>FilteredWeight.Confidence</strong></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">float</span></code></p></td>
<td><p>Confidence score for the filtered weight</p></td>
</tr>
<tr class="row-odd"><td><p><strong>FilteredWeight.Timestamp</strong></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">double</span></code></p></td>
<td><p>Timestamp when the filtered weight measurement was recorded</p></td>
</tr>
<tr class="row-even"><td><p><strong>BaselinedWeight.Value</strong></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">float</span></code></p></td>
<td><p>Baseline-adjusted weight measurement</p></td>
</tr>
<tr class="row-odd"><td><p><strong>BaselinedWeight.Confidence</strong></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">float</span></code></p></td>
<td><p>Confidence score for the baselined weight</p></td>
</tr>
<tr class="row-even"><td><p><strong>BaselinedWeight.Timestamp</strong></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">double</span></code></p></td>
<td><p>Timestamp for the baselined weight measurement</p></td>
</tr>
</tbody>
</table>
</div>
</section>
<section id="properties">
<h4>Properties<a class="headerlink" href="#properties" title="Link to this heading">#</a></h4>
<section id="general">
<h5>General<a class="headerlink" href="#general" title="Link to this heading">#</a></h5>
<div class="pst-scrollable-table-container"><table class="table">
<thead>
<tr class="row-odd"><th class="head"><p>Property name</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><strong>PortName</strong></p></td>
<td><p>Name of the serial port used to communicate with the digital scale</p></td>
</tr>
<tr class="row-odd"><td><p><strong>FilterWindow</strong></p></td>
<td><p>Defines the size of the sliding window for linear regression filtering of weight measurements</p></td>
</tr>
</tbody>
</table>
</div>
</section>
<section id="subjects">
<h5>Subjects<a class="headerlink" href="#subjects" title="Link to this heading">#</a></h5>
<p>Events and commands from the weighing scale are collected from, and published to <code class="docutils literal notranslate"><span class="pre">Subject</span></code>s, in some cases after some processing.
Here you set the names used for these <code class="docutils literal notranslate"><span class="pre">Subject</span></code>s to identify events, commands or data streams for this node for a specific nest.
Each of these subjects becomes accessible in the Bonsai editor’s toolbox anywhere in the workflow using the name set here.</p>
<section id="device-event-subjects">
<h6>Device event subjects<a class="headerlink" href="#device-event-subjects" title="Link to this heading">#</a></h6>
<!-- Do we need to specify the type for tare events, i.e. `Harp.Timestamped<type>`? -->
<div class="pst-scrollable-table-container"><table class="table">
<thead>
<tr class="row-odd"><th class="head"><p>Subject name</p></th>
<th class="head"><p>Type</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><strong>WeightData</strong></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">Aeon.Environment.WeightMeasurement</span></code></p></td>
<td><p>Contains timestamped weight measurements both raw and after filtering and baseline adjustments. Also directly output by the node</p></td>
</tr>
<tr class="row-odd"><td><p><strong>TareEvents</strong></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">Harp.Timestamped</span></code></p></td>
<td><p>Timestamped tare events indicating tare commands sent to the scale</p></td>
</tr>
</tbody>
</table>
</div>
</section>
<section id="other-output-subjects">
<h6>Other output subjects<a class="headerlink" href="#other-output-subjects" title="Link to this heading">#</a></h6>
<div class="pst-scrollable-table-container"><table class="table">
<thead>
<tr class="row-odd"><th class="head"><p>Subject name</p></th>
<th class="head"><p>Type</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><strong>RawWeight</strong></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">Aeon.Environment.WeightMeasurement</span></code></p></td>
<td><p>Raw weight data directly from the serial input</p></td>
</tr>
<tr class="row-odd"><td><p><strong>FilteredWeight</strong></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">Aeon.Environment.WeightMeasurement</span></code></p></td>
<td><p>Filtered weight data based on the configured filter window size</p></td>
</tr>
<tr class="row-even"><td><p><strong>BaselinedWeight</strong></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">Aeon.Environment.WeightMeasurement</span></code></p></td>
<td><p>Baseline-adjusted weight data</p></td>
</tr>
</tbody>
</table>
</div>
</section>
<section id="device-command-subjects">
<h6>Device command subjects<a class="headerlink" href="#device-command-subjects" title="Link to this heading">#</a></h6>
<div class="pst-scrollable-table-container"><table class="table">
<thead>
<tr class="row-odd"><th class="head"><p>Subject name</p></th>
<th class="head"><p>Type</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><strong>TareCommands</strong></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">object</span></code></p></td>
<td><p>Input sequence for tare commands, sent to reset the scale’s weight measurement</p></td>
</tr>
<tr class="row-odd"><td><p><strong>GlobalTrigger</strong></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">object</span></code></p></td>
<td><p>A global trigger that synchronises with external events or reset triggers for baseline weight.</p></td>
</tr>
<tr class="row-even"><td><p><strong>BaselineWeightTrigger</strong></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">object</span></code></p></td>
<td><p>Specifies the trigger for resetting the baseline weight</p></td>
</tr>
</tbody>
</table>
</div>
</section>
</section>
</section>
<section id="usage">
<h4>Usage<a class="headerlink" href="#usage" title="Link to this heading">#</a></h4>
<p>Create a <code class="docutils literal notranslate"><span class="pre">Groupworkflow</span></code> and give it an appropriate name, e.g. “Nest”.
Inside, place a <code class="docutils literal notranslate"><span class="pre">WeightScale</span> <span class="pre">(Aeon.Environment)</span></code> node, externalise all properties, and connect to the <code class="docutils literal notranslate"><span class="pre">WorkflowOutput</span></code>.</p>
<div class="workflow docutils">
<p><img alt="WeightScale" src="../../../_images/weightScale.svg" /></p>
</div>
</section>
</section>
</section>
<section id="gui">
<h2>GUI<a class="headerlink" href="#gui" title="Link to this heading">#</a></h2>
<p>No specific GUI components are defined for this module.</p>
</section>
<section id="logging">
<h2>Logging<a class="headerlink" href="#logging" title="Link to this heading">#</a></h2>
<p>Outputs from the nest module are collected and formatted into Harp messages using the <code class="docutils literal notranslate"><span class="pre">Harp.Format</span></code> and custom <code class="docutils literal notranslate"><span class="pre">FormatWeight</span></code> nodes to configure the register addresses for each data stream on a virtual Harp device, utilising commonly available registers.
Logging of this virtual Harp device can then be performed as with any Harp device using the <a class="reference internal" href="logging.html#target-node-logharpstate"><span class="std std-ref"><code class="docutils literal notranslate"><span class="pre">LogHarpState</span> <span class="pre">(Aeon.Acquisition)</span></code></span></a> node.</p>
<div class="workflow docutils">
<p><img alt="logPatchEvents" src="../../../_images/logWeight.svg" /></p>
</div>
<p><strong>Data schema</strong></p>
<div class="pst-scrollable-table-container"><table class="table">
<thead>
<tr class="row-odd"><th class="head"><p>Register name</p></th>
<th class="head"><p>Access</p></th>
<th class="head"><p>Address</p></th>
<th class="head"><p>Type</p></th>
<th class="head"><p>Mask type</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><strong>(weight_raw)</strong></p></td>
<td><p>Event</p></td>
<td><p>200</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">[double,float,float]</span></code></p></td>
<td><p>[Timestamp,Value,Confidence]</p></td>
<td><p>Logs raw weight data directly from the scale input</p></td>
</tr>
<tr class="row-odd"><td><p><strong>(weight_tare)</strong></p></td>
<td><p>Write</p></td>
<td><p>201</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">U8</span></code></p></td>
<td><p>-</p></td>
<td><p>Logs each tare command event with a timestamp</p></td>
</tr>
<tr class="row-even"><td><p><strong>(weight_filtered)</strong></p></td>
<td><p>Event</p></td>
<td><p>202</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">[double,float,float]</span></code></p></td>
<td><p>[Timestamp,Value,Confidence]</p></td>
<td><p>Logs weight data after filtering adjustments</p></td>
</tr>
<tr class="row-odd"><td><p><strong>(weight_baseline)</strong></p></td>
<td><p>Write</p></td>
<td><p>203</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">U8</span></code></p></td>
<td><p>-</p></td>
<td><p>Logs events with a timestamp when the baseline weight is reset</p></td>
</tr>
</tbody>
</table>
</div>
</section>
<section id="state-persistence">
<h2>State persistence<a class="headerlink" href="#state-persistence" title="Link to this heading">#</a></h2>
<p>Weight measurements are not required for environment state persistence.</p>
</section>
<section id="alerts">
<h2>Alerts<a class="headerlink" href="#alerts" title="Link to this heading">#</a></h2>
<p>Alerts are not currently configured for weight measurements, but could be configured to alert the team to, for example, drops in measured weight below a threshold for a given animal.</p>
</section>
</section>


                </article>
              
              
              
              
              
                <footer class="prev-next-footer d-print-none">
                  
<div class="prev-next-area">
    <a class="left-prev"
       href="monitors.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">previous</p>
        <p class="prev-next-title">Device Synchronisation Monitors</p>
      </div>
    </a>
    <a class="right-next"
       href="rfid_reader.html"
       title="next page">
      <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">RFID Reader</p>
      </div>
      <i class="fa-solid fa-angle-right"></i>
    </a>
</div>
                </footer>
              
            </div>
            
            
              
                <dialog id="pst-secondary-sidebar-modal"></dialog>
                <div id="pst-secondary-sidebar" class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">


  <div class="sidebar-secondary-item">
<div
    id="pst-page-navigation-heading-2"
    class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> On this page
  </div>
  <nav class="bd-toc-nav page-toc" aria-labelledby="pst-page-navigation-heading-2">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#nodes">Nodes</a><ul class="visible nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#weightscale">WeightScale</a><ul class="visible nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#inputs">Inputs</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#outputs">Outputs</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#properties">Properties</a><ul class="nav section-nav flex-column">
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#general">General</a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#subjects">Subjects</a><ul class="nav section-nav flex-column">
<li class="toc-h6 nav-item toc-entry"><a class="reference internal nav-link" href="#device-event-subjects">Device event subjects</a></li>
<li class="toc-h6 nav-item toc-entry"><a class="reference internal nav-link" href="#other-output-subjects">Other output subjects</a></li>
<li class="toc-h6 nav-item toc-entry"><a class="reference internal nav-link" href="#device-command-subjects">Device command subjects</a></li>
</ul>
</li>
</ul>
</li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#usage">Usage</a></li>
</ul>
</li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#gui">GUI</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#logging">Logging</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#state-persistence">State persistence</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#alerts">Alerts</a></li>
</ul>
  </nav></div>

  <div class="sidebar-secondary-item">
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../../../_sources/user/aeon_modules/acquisition/nest.md.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
          </footer>
        
      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script defer src="../../../_static/scripts/bootstrap.js?digest=8878045cc6db502f8baf"></script>
<script defer src="../../../_static/scripts/pydata-sphinx-theme.js?digest=8878045cc6db502f8baf"></script>

  <footer class="bd-footer">
<div class="bd-footer__inner bd-page-width">
  
    <div class="footer-items__start">
      
        <div class="footer-item"><p class="sphinx-version"></p>
    Created using <a href="https://sphinx-doc.org/">Sphinx</a> 8.2.3.
    <br/>
    </p>
    <p class="theme-version">
    Built with the
    <a href="https://pydata-sphinx-theme.readthedocs.io/en/stable/index.html">PyData Sphinx Theme</a>
    0.16.1.
    </p></div>
      
    </div>
  
  
  
    <div class="footer-items__end">
      
        <div class="footer-item"><div class="things-in-a-row">
    <a href="https://neurogears.org/">
        <img src="../../../_static/images/light-logo-neurogears.png" alt="Sponsors" class="only-light img-sponsor"/>
        <img src="../../../_static/images/dark-logo-neurogears.png" alt="Sponsors" class="only-dark img-sponsor"/>
    </a>
    <a href="https://www.datajoint.com/">
        <img src="../../../_static/images/light-logo-datajoint.png" alt="Sponsors" class="only-light img-sponsor"/>
        <img src="../../../_static/images/dark-logo-datajoint.png" alt="Sponsors" class="only-dark img-sponsor"/>
    </a>
    <a href="https://wellcome.org/">
        <img src="../../../_static/images/light-logo-wellcome.png" alt="Sponsors" class="only-light img-sponsor"/>
        <img src="../../../_static/images/dark-logo-wellcome.png" alt="Sponsors" class="only-dark img-sponsor"/>
    </a>
    <a href="https://www.sainsburywellcome.org/web/">
        <img src="../../../_static/images/light-logo-swc.png" alt="Sponsors" class="only-light img-sponsor"/>
        <img src="../../../_static/images/dark-logo-swc.png" alt="Sponsors" class="only-dark img-sponsor"/>
    </a>
    <a href="https://www.ucl.ac.uk/">
        <img src="../../../_static/images/light-logo-ucl.png" alt="Sponsors" class="only-light img-sponsor"/>
        <img src="../../../_static/images/dark-logo-ucl.png" alt="Sponsors" class="only-dark img-sponsor"/>
    </a>
    <a href="https://www.ucl.ac.uk/gatsby/gatsby-computational-neuroscience-unit">
        <img src="../../../_static/images/light-logo-gatsby.png" alt="Sponsors" class="only-light img-sponsor"/>
        <img src="../../../_static/images/dark-logo-gatsby.png" alt="Sponsors" class="only-dark img-sponsor"/>
    </a>
    <a href="https://www.ukri.org/councils/bbsrc/">
        <img src="../../../_static/images/light-logo-bbsrc.png" alt="Sponsors" class="only-light img-sponsor"/>
        <img src="../../../_static/images/dark-logo-bbsrc.png" alt="Sponsors" class="only-dark img-sponsor"/>
    </a>
    <a href="https://www.simonsfoundation.org/">
        <img src="../../../_static/images/light-logo-simons.png" alt="Sponsors" class="only-light img-sponsor"/>
        <img src="../../../_static/images/dark-logo-simons.png" alt="Sponsors" class="only-dark img-sponsor"/>
    </a>
</div></div>
      
    </div>
  
</div>

  </footer>
  </body>
</html>