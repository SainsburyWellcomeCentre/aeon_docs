
<!DOCTYPE html>


<html lang="en" data-content_root="../../" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>DataJoint pipeline: Querying data &#8212; Aeon v0.0.13 documentation</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "";
  </script>
  <!--
    this give us a css class that will be invisible only if js is disabled
  -->
  <noscript>
    <style>
      .pst-js-only { display: none !important; }

    </style>
  </noscript>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../../_static/styles/theme.css?digest=8878045cc6db502f8baf" rel="stylesheet" />
<link href="../../_static/styles/pydata-sphinx-theme.css?digest=8878045cc6db502f8baf" rel="stylesheet" />

    <link rel="stylesheet" type="text/css" href="../../_static/pygments.css?v=8f2a1f02" />
    <link rel="stylesheet" type="text/css" href="../../_static/mystnb.8ecb98da25f57f5357bf6f572d296f466b2cfe2517ffebfabe82451661e28f02.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/copybutton.css?v=76b2166b" />
    <link rel="stylesheet" type="text/css" href="../../_static/sphinx-design.min.css?v=95c83b7e" />
    <link rel="stylesheet" type="text/css" href="../../_static/css/custom.css?v=4386463d" />
  
  <!-- So that users can add custom icons -->
  <script src="../../_static/scripts/fontawesome.js?digest=8878045cc6db502f8baf"></script>
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../../_static/scripts/bootstrap.js?digest=8878045cc6db502f8baf" />
<link rel="preload" as="script" href="../../_static/scripts/pydata-sphinx-theme.js?digest=8878045cc6db502f8baf" />

    <script src="../../_static/documentation_options.js?v=34eee1f6"></script>
    <script src="../../_static/doctools.js?v=9bcbadda"></script>
    <script src="../../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../../_static/clipboard.min.js?v=a7894cd8"></script>
    <script src="../../_static/copybutton.js?v=f281be69"></script>
    <script src="../../_static/design-tabs.js?v=f930bc37"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'user/how_to/dj_querying_data';</script>
    <script src="../../_static/js/workflow.js?v=1800024c"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Hidden Markov Model analysis of mouse foraging behaviour" href="hmm_example.html" />
    <link rel="prev" title="DataJoint pipeline: On-premises deployment" href="dj_pipeline_local_deployment.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  <meta name="docsearch:version" content="" />
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <div id="pst-skip-link" class="skip-link d-print-none"><a href="#main-content">Skip to main content</a></div>
  
  <div id="pst-scroll-pixel-helper"></div>
  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>Back to top</button>

  
  <dialog id="pst-search-dialog">
    
<form class="bd-search d-flex align-items-center"
      action="../../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         placeholder="Search the docs ..."
         aria-label="Search the docs ..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form>
  </dialog>

  <div class="pst-async-banner-revealer d-none">
  <aside id="bd-header-version-warning" class="d-none d-print-none" aria-label="Version warning"></aside>
</div>
<aside class="bd-header-announcement" aria-label="Announcement">
  <div class="bd-header-announcement__content">This website is currently under active development. Please report any issues on <a href='https://github.com/SainsburyWellcomeCentre/aeon_docs/issues'>GitHub</a>.</div>
</aside>

  
    <header class="bd-header navbar navbar-expand-lg bd-navbar d-print-none">
<div class="bd-header__inner bd-page-width">
  <button class="pst-navbar-icon sidebar-toggle primary-toggle" aria-label="Site navigation">
    <span class="fa-solid fa-bars"></span>
  </button>
  
  
  <div class="col-lg-3 navbar-header-items__start">
    
      <div class="navbar-item">

  
    
  

<a class="navbar-brand logo" href="../../index.html">
  
  
  
  
  
  
    <p class="title logo__title">Aeon v0.0.13</p>
  
</a></div>
    
  </div>
  
  <div class="col-lg-9 navbar-header-items">
    
    <div class="me-auto navbar-header-items__center">
      
        <div class="navbar-item">
<nav>
  <ul class="bd-navbar-elements navbar-nav">
    
<li class="nav-item ">
  <a class="nav-link nav-internal" href="../../getting_started/index.html">
    Getting Started
  </a>
</li>


<li class="nav-item current active">
  <a class="nav-link nav-internal" href="../index.html">
    User Guide
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../../contributor/index.html">
    Contributor’s Guide
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../../reference/index.html">
    Reference
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../../about/index.html">
    About
  </a>
</li>

  </ul>
</nav></div>
      
    </div>
    
    
    <div class="navbar-header-items__end">
      
        <div class="navbar-item navbar-persistent--container">
          

<button class="btn search-button-field search-button__button pst-js-only" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
 <i class="fa-solid fa-magnifying-glass"></i>
 <span class="search-button__default-text">Search</span>
 <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
</button>
        </div>
      
      
        <div class="navbar-item">

<button class="btn btn-sm nav-link pst-navbar-icon theme-switch-button pst-js-only" aria-label="Color mode" data-bs-title="Color mode"  data-bs-placement="bottom" data-bs-toggle="tooltip">
  <i class="theme-switch fa-solid fa-sun                fa-lg" data-mode="light" title="Light"></i>
  <i class="theme-switch fa-solid fa-moon               fa-lg" data-mode="dark"  title="Dark"></i>
  <i class="theme-switch fa-solid fa-circle-half-stroke fa-lg" data-mode="auto"  title="System Settings"></i>
</button></div>
      
        <div class="navbar-item"><ul class="navbar-icon-links"
    aria-label="Icon Links">
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://github.com/SainsburyWellcomeCentre/aeon_docs" title="GitHub" class="nav-link pst-navbar-icon" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><i class="fa-brands fa-github fa-lg" aria-hidden="true"></i>
            <span class="sr-only">GitHub</span></a>
        </li>
</ul></div>
      
    </div>
    
  </div>
  
  
    <div class="navbar-persistent--mobile">

<button class="btn search-button-field search-button__button pst-js-only" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
 <i class="fa-solid fa-magnifying-glass"></i>
 <span class="search-button__default-text">Search</span>
 <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
</button>
    </div>
  

  
    <button class="pst-navbar-icon sidebar-toggle secondary-toggle" aria-label="On this page">
      <span class="fa-solid fa-outdent"></span>
    </button>
  
</div>

    </header>
  

  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      
      
      <dialog id="pst-primary-sidebar-modal"></dialog>
      <div id="pst-primary-sidebar" class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
      <div class="sidebar-header-items__center">
        
          
          
            <div class="navbar-item">
<nav>
  <ul class="bd-navbar-elements navbar-nav">
    
<li class="nav-item ">
  <a class="nav-link nav-internal" href="../../getting_started/index.html">
    Getting Started
  </a>
</li>


<li class="nav-item current active">
  <a class="nav-link nav-internal" href="../index.html">
    User Guide
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../../contributor/index.html">
    Contributor’s Guide
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../../reference/index.html">
    Reference
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../../about/index.html">
    About
  </a>
</li>

  </ul>
</nav></div>
          
        
      </div>
    
    
    
      <div class="sidebar-header-items__end">
        
          <div class="navbar-item">

<button class="btn btn-sm nav-link pst-navbar-icon theme-switch-button pst-js-only" aria-label="Color mode" data-bs-title="Color mode"  data-bs-placement="bottom" data-bs-toggle="tooltip">
  <i class="theme-switch fa-solid fa-sun                fa-lg" data-mode="light" title="Light"></i>
  <i class="theme-switch fa-solid fa-moon               fa-lg" data-mode="dark"  title="Dark"></i>
  <i class="theme-switch fa-solid fa-circle-half-stroke fa-lg" data-mode="auto"  title="System Settings"></i>
</button></div>
        
          <div class="navbar-item"><ul class="navbar-icon-links"
    aria-label="Icon Links">
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://github.com/SainsburyWellcomeCentre/aeon_docs" title="GitHub" class="nav-link pst-navbar-icon" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><i class="fa-brands fa-github fa-lg" aria-hidden="true"></i>
            <span class="sr-only">GitHub</span></a>
        </li>
</ul></div>
        
      </div>
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">
<nav class="bd-docs-nav bd-links"
     aria-label="Section Navigation">
  <p class="bd-links__title" role="heading" aria-level="1">Section Navigation</p>
  <div class="bd-toc-item navbar-nav"><p aria-level="2" class="caption" role="heading"><span class="caption-text">Tutorials</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../tutorials/aeon_dj_pipeline.html">DataJoint pipeline for Aeon</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tutorials/general_experimental_workflow.html">General Experimental Workflow Infrastructure</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">How-to Guides</span></p>
<ul class="current nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="dj_data_ingestion_and_processing.html">DataJoint pipeline: Data ingestion and processing</a></li>
<li class="toctree-l1"><a class="reference internal" href="dj_pipeline_local_deployment.html">DataJoint pipeline: On-premises deployment</a></li>
<li class="toctree-l1 current active"><a class="current reference internal" href="#">DataJoint pipeline: Querying data</a></li>
<li class="toctree-l1"><a class="reference internal" href="hmm_example.html">Hidden Markov Model analysis of mouse foraging behaviour</a></li>
<li class="toctree-l1"><a class="reference internal" href="io_api_example_copy.html">Data access using the low-level API</a></li>
</ul>
</div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
      <div class="sidebar-primary-item">
<div id="ethical-ad-placement"
      class="flat"
      data-ea-publisher="readthedocs"
      data-ea-type="readthedocs-sidebar"
      data-ea-manual="true">
</div></div>
  </div>


      </div>
      
      <main id="main-content" class="bd-main" role="main">
        
        
          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article d-print-none">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item">

<nav aria-label="Breadcrumb" class="d-print-none">
  <ul class="bd-breadcrumbs">
    
    <li class="breadcrumb-item breadcrumb-home">
      <a href="../../index.html" class="nav-link" aria-label="Home">
        <i class="fa-solid fa-home"></i>
      </a>
    </li>
    
    <li class="breadcrumb-item"><a href="../index.html" class="nav-link">User Guide</a></li>
    
    <li class="breadcrumb-item active" aria-current="page"><span class="ellipsis">DataJoint pipeline: Querying data</span></li>
  </ul>
</nav>
</div>
      
    </div>
  
  
</div>
</div>
              
              
              
                
<div id="searchbox"></div>
                <article class="bd-article">
                  
  <section id="datajoint-pipeline-querying-data">
<span id="target-dj-querying-data"></span><h1>DataJoint pipeline: Querying data<a class="headerlink" href="#datajoint-pipeline-querying-data" title="Link to this heading">#</a></h1>
<div class="admonition important">
<p class="admonition-title">Important</p>
<p>This guide assumes you have a <a class="reference internal" href="dj_pipeline_local_deployment.html#target-dj-pipeline-deployment"><span class="std std-ref">DataJoint pipeline deployed</span></a> with <a class="reference internal" href="dj_data_ingestion_and_processing.html#target-dj-data-ingestion-processing"><span class="std std-ref">data already ingested</span></a>.</p>
</div>
<p>This guide provides examples of how to query data from the <a class="reference internal" href="../tutorials/aeon_dj_pipeline.html#target-aeon-dj-pipeline"><span class="std std-ref">Aeon DataJoint pipeline</span></a> using DataJoint’s various <a class="reference external" href="https://docs.datajoint.com/core/datajoint-python/0.14/query/operators/#">query operators</a>, such as restriction (<code class="docutils literal notranslate"><span class="pre">&amp;</span></code>, <code class="docutils literal notranslate"><span class="pre">-</span></code>), projection (<code class="docutils literal notranslate"><span class="pre">proj</span></code>), joining (<code class="docutils literal notranslate"><span class="pre">*</span></code>), and aggregation (<code class="docutils literal notranslate"><span class="pre">aggr</span></code>). These together enable powerful data manipulations and flexible data analysis workflows.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The examples here use the <a class="reference external" href="https://doi.org/10.5281/zenodo.13881884">Single mouse in a foraging assay</a> dataset for the experiment named <code class="docutils literal notranslate"><span class="pre">social0.2-aeon3</span></code>.
If you are using a different dataset, be sure to replace the experiment name and  parameters in the code below accordingly.</p>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">aeon.dj_pipeline</span><span class="w"> </span><span class="kn">import</span> <span class="n">acquisition</span><span class="p">,</span> <span class="n">tracking</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">aeon.dj_pipeline.analysis</span><span class="w"> </span><span class="kn">import</span> <span class="n">block_analysis</span>
</pre></div>
</div>
</div>
</div>
<section id="acquisition-data">
<h2>Acquisition data<a class="headerlink" href="#acquisition-data" title="Link to this heading">#</a></h2>
<p>The <a class="reference internal" href="../tutorials/aeon_dj_pipeline.html#target-aeon-dj-pipeline-acquisition-tables"><span class="std std-ref">DataJoint acquisition module</span></a> manages raw data collected during experiments.
We will start by exploring the <code class="docutils literal notranslate"><span class="pre">acquisition.Chunk</span></code> table, which stores metadata about discrete time <a class="reference internal" href="../../reference/glossary.html#term-Acquisition-Chunk"><span class="xref std std-term">chunks</span></a> and the associated raw data files for each experiment.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">acquisition</span><span class="o">.</span><span class="n">Chunk</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html">
    
    <style type="text/css">
        .Table{
            border-collapse:collapse;
        }
        .Table th{
            background: #A0A0A0; color: #ffffff; padding:4px; border:#f0e0e0 1px solid;
            font-weight: normal; font-family: monospace; font-size: 100%;
        }
        .Table td{
            padding:4px; border:#f0e0e0 1px solid; font-size:100%;
        }
        .Table tr:nth-child(odd){
            background: #ffffff;
            color: #000000;
        }
        .Table tr:nth-child(even){
            background: #f3f1ff;
            color: #000000;
        }
        /* Tooltip container */
        .djtooltip {
        }
        /* Tooltip text */
        .djtooltip .djtooltiptext {
            visibility: hidden;
            width: 120px;
            background-color: black;
            color: #fff;
            text-align: center;
            padding: 5px 0;
            border-radius: 6px;
            /* Position the tooltip text - see examples below! */
            position: absolute;
            z-index: 1;
        }
        #primary {
            font-weight: bold;
            color: black;
        }
        #nonprimary {
            font-weight: normal;
            color: white;
        }

        /* Show the tooltip text when you mouse over the tooltip container */
        .djtooltip:hover .djtooltiptext {
            visibility: visible;
        }
    </style>
    
    <b>A recording period corresponds to a 1-hour data acquisition</b>
        <div style="max-height:1000px;max-width:1500px;overflow:auto;">
        <table border="1" class="Table">
            <thead> <tr style="text-align: right;"> <th> <div class="djtooltip">
                            <p id="primary">experiment_name</p>
                            <span class="djtooltiptext">e.g exp0-aeon3</span>
                        </div></th><th><div class="djtooltip">
                            <p id="primary">chunk_start</p>
                            <span class="djtooltiptext">datetime of the start of a given acquisition chunk</span>
                        </div></th><th><div class="djtooltip">
                            <p id="nonprimary">chunk_end</p>
                            <span class="djtooltiptext">datetime of the end of a given acquisition chunk</span>
                        </div></th><th><div class="djtooltip">
                            <p id="nonprimary">directory_type</p>
                            <span class="djtooltiptext"></span>
                        </div></th><th><div class="djtooltip">
                            <p id="nonprimary">epoch_start</p>
                            <span class="djtooltiptext"></span>
                        </div> </th> </tr> </thead>
            <tbody> <tr> <td>social0.2-aeon3</td>
<td>2024-03-02 12:00:00</td>
<td>2024-03-02 13:00:00</td>
<td>raw</td>
<td>2024-03-01 16:46:12</td></tr><tr><td>social0.2-aeon3</td>
<td>2024-03-02 13:00:00</td>
<td>2024-03-02 14:00:00</td>
<td>raw</td>
<td>2024-03-01 16:46:12</td> </tr> </tbody>
        </table>
        
        <p>Total: 2</p></div>
        </div></div>
</div>
<p>The command above retrieves all records for all experiments from the <code class="docutils literal notranslate"><span class="pre">Chunk</span></code> table.
Since we only ingested the sample data containing a 2-hour snippet of experiment <code class="docutils literal notranslate"><span class="pre">social0.2-aeon3</span></code>, the query returns the two records corresponding to each hour of the experiment.
In most cases, you would have multiple experiments in the database and the query would return more records.
Thus, it is often more efficient to apply specific criteria to filter the data.</p>
<section id="restricting-data">
<h3>Restricting data<a class="headerlink" href="#restricting-data" title="Link to this heading">#</a></h3>
<p>For example, we can use the <a class="reference external" href="https://docs.datajoint.com/core/datajoint-python/0.14/query/operators/#restriction">restriction operator <code class="docutils literal notranslate"><span class="pre">&amp;</span></code></a> with a restriction key to specify the <code class="docutils literal notranslate"><span class="pre">experiment_name</span></code> (e.g. <code class="docutils literal notranslate"><span class="pre">social0.2-aeon3</span></code>) for which we want to retrieve the <a class="reference internal" href="../../reference/glossary.html#term-Acquisition-Chunk"><span class="xref std std-term">chunks</span></a>.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">experiment_key</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;experiment_name&quot;</span><span class="p">:</span> <span class="s2">&quot;social0.2-aeon3&quot;</span><span class="p">}</span>
<span class="n">acquisition</span><span class="o">.</span><span class="n">Chunk</span> <span class="o">&amp;</span> <span class="n">experiment_key</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html">
    
    <style type="text/css">
        .Table{
            border-collapse:collapse;
        }
        .Table th{
            background: #A0A0A0; color: #ffffff; padding:4px; border:#f0e0e0 1px solid;
            font-weight: normal; font-family: monospace; font-size: 100%;
        }
        .Table td{
            padding:4px; border:#f0e0e0 1px solid; font-size:100%;
        }
        .Table tr:nth-child(odd){
            background: #ffffff;
            color: #000000;
        }
        .Table tr:nth-child(even){
            background: #f3f1ff;
            color: #000000;
        }
        /* Tooltip container */
        .djtooltip {
        }
        /* Tooltip text */
        .djtooltip .djtooltiptext {
            visibility: hidden;
            width: 120px;
            background-color: black;
            color: #fff;
            text-align: center;
            padding: 5px 0;
            border-radius: 6px;
            /* Position the tooltip text - see examples below! */
            position: absolute;
            z-index: 1;
        }
        #primary {
            font-weight: bold;
            color: black;
        }
        #nonprimary {
            font-weight: normal;
            color: white;
        }

        /* Show the tooltip text when you mouse over the tooltip container */
        .djtooltip:hover .djtooltiptext {
            visibility: visible;
        }
    </style>
    
    <b>A recording period corresponds to a 1-hour data acquisition</b>
        <div style="max-height:1000px;max-width:1500px;overflow:auto;">
        <table border="1" class="Table">
            <thead> <tr style="text-align: right;"> <th> <div class="djtooltip">
                            <p id="primary">experiment_name</p>
                            <span class="djtooltiptext">e.g exp0-aeon3</span>
                        </div></th><th><div class="djtooltip">
                            <p id="primary">chunk_start</p>
                            <span class="djtooltiptext">datetime of the start of a given acquisition chunk</span>
                        </div></th><th><div class="djtooltip">
                            <p id="nonprimary">chunk_end</p>
                            <span class="djtooltiptext">datetime of the end of a given acquisition chunk</span>
                        </div></th><th><div class="djtooltip">
                            <p id="nonprimary">directory_type</p>
                            <span class="djtooltiptext"></span>
                        </div></th><th><div class="djtooltip">
                            <p id="nonprimary">epoch_start</p>
                            <span class="djtooltiptext"></span>
                        </div> </th> </tr> </thead>
            <tbody> <tr> <td>social0.2-aeon3</td>
<td>2024-03-02 12:00:00</td>
<td>2024-03-02 13:00:00</td>
<td>raw</td>
<td>2024-03-01 16:46:12</td></tr><tr><td>social0.2-aeon3</td>
<td>2024-03-02 13:00:00</td>
<td>2024-03-02 14:00:00</td>
<td>raw</td>
<td>2024-03-01 16:46:12</td> </tr> </tbody>
        </table>
        
        <p>Total: 2</p></div>
        </div></div>
</div>
</section>
</section>
<section id="tracking-data">
<h2>Tracking data<a class="headerlink" href="#tracking-data" title="Link to this heading">#</a></h2>
<p>The <a class="reference internal" href="../tutorials/aeon_dj_pipeline.html#target-aeon-dj-pipeline-tracking-tables"><span class="std std-ref">DataJoint tracking module</span></a> manages the position tracking data produced by different tracking software.
Here we continue using the same restriction key to explore tracking data associated with the experiment <code class="docutils literal notranslate"><span class="pre">social0.2-aeon3</span></code>.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">SLEAPTracking</span></code> table stores the <a class="reference external" href="https://sleap.ai/#">SLEAP</a> tracking data of the subject(s) in the experiment for each chunk of video recorded from a particular <a class="reference internal" href="../../reference/acquisition/camera.html#target-module-camera"><span class="std std-ref">camera device</span></a>.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">tracking</span><span class="o">.</span><span class="n">SLEAPTracking</span> <span class="o">&amp;</span> <span class="n">experiment_key</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html">
    
    <style type="text/css">
        .Table{
            border-collapse:collapse;
        }
        .Table th{
            background: #A0A0A0; color: #ffffff; padding:4px; border:#f0e0e0 1px solid;
            font-weight: normal; font-family: monospace; font-size: 100%;
        }
        .Table td{
            padding:4px; border:#f0e0e0 1px solid; font-size:100%;
        }
        .Table tr:nth-child(odd){
            background: #ffffff;
            color: #000000;
        }
        .Table tr:nth-child(even){
            background: #f3f1ff;
            color: #000000;
        }
        /* Tooltip container */
        .djtooltip {
        }
        /* Tooltip text */
        .djtooltip .djtooltiptext {
            visibility: hidden;
            width: 120px;
            background-color: black;
            color: #fff;
            text-align: center;
            padding: 5px 0;
            border-radius: 6px;
            /* Position the tooltip text - see examples below! */
            position: absolute;
            z-index: 1;
        }
        #primary {
            font-weight: bold;
            color: black;
        }
        #nonprimary {
            font-weight: normal;
            color: white;
        }

        /* Show the tooltip text when you mouse over the tooltip container */
        .djtooltip:hover .djtooltiptext {
            visibility: visible;
        }
    </style>
    
    <b>Tracked objects position data from a particular VideoSource for multi-animal experiment using the SLEAP tracking method per chunk</b>
        <div style="max-height:1000px;max-width:1500px;overflow:auto;">
        <table border="1" class="Table">
            <thead> <tr style="text-align: right;"> <th> <div class="djtooltip">
                            <p id="primary">experiment_name</p>
                            <span class="djtooltiptext">e.g exp0-aeon3</span>
                        </div></th><th><div class="djtooltip">
                            <p id="primary">chunk_start</p>
                            <span class="djtooltiptext">datetime of the start of a given acquisition chunk</span>
                        </div></th><th><div class="djtooltip">
                            <p id="primary">device_serial_number</p>
                            <span class="djtooltiptext"></span>
                        </div></th><th><div class="djtooltip">
                            <p id="primary">spinnaker_video_source_install_time</p>
                            <span class="djtooltiptext">time of the spinnaker_video_source placed and started operation at this position</span>
                        </div></th><th><div class="djtooltip">
                            <p id="primary">tracking_paramset_id</p>
                            <span class="djtooltiptext"></span>
                        </div> </th> </tr> </thead>
            <tbody> <tr> <td>social0.2-aeon3</td>
<td>2024-03-02 12:00:00</td>
<td>23032909</td>
<td>2024-03-01 16:46:12</td>
<td>1</td></tr><tr><td>social0.2-aeon3</td>
<td>2024-03-02 13:00:00</td>
<td>23032909</td>
<td>2024-03-01 16:46:12</td>
<td>1</td> </tr> </tbody>
        </table>
        
        <p>Total: 2</p></div>
        </div></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">PoseIdentity</span></code> table contains information that identifies each subject and records the body part used as the anchor point in the <a class="reference external" href="https://sleap.ai/develop/api/sleap.nn.config.model.html#sleap.nn.config.model.MultiClassTopDownConfig">SLEAP top-down-id-model network</a>.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">tracking</span><span class="o">.</span><span class="n">SLEAPTracking</span><span class="o">.</span><span class="n">PoseIdentity</span> <span class="o">&amp;</span> <span class="n">experiment_key</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html">
    
    <style type="text/css">
        .Table{
            border-collapse:collapse;
        }
        .Table th{
            background: #A0A0A0; color: #ffffff; padding:4px; border:#f0e0e0 1px solid;
            font-weight: normal; font-family: monospace; font-size: 100%;
        }
        .Table td{
            padding:4px; border:#f0e0e0 1px solid; font-size:100%;
        }
        .Table tr:nth-child(odd){
            background: #ffffff;
            color: #000000;
        }
        .Table tr:nth-child(even){
            background: #f3f1ff;
            color: #000000;
        }
        /* Tooltip container */
        .djtooltip {
        }
        /* Tooltip text */
        .djtooltip .djtooltiptext {
            visibility: hidden;
            width: 120px;
            background-color: black;
            color: #fff;
            text-align: center;
            padding: 5px 0;
            border-radius: 6px;
            /* Position the tooltip text - see examples below! */
            position: absolute;
            z-index: 1;
        }
        #primary {
            font-weight: bold;
            color: black;
        }
        #nonprimary {
            font-weight: normal;
            color: white;
        }

        /* Show the tooltip text when you mouse over the tooltip container */
        .djtooltip:hover .djtooltiptext {
            visibility: visible;
        }
    </style>
    
    <b></b>
        <div style="max-height:1000px;max-width:1500px;overflow:auto;">
        <table border="1" class="Table">
            <thead> <tr style="text-align: right;"> <th> <div class="djtooltip">
                            <p id="primary">experiment_name</p>
                            <span class="djtooltiptext">e.g exp0-aeon3</span>
                        </div></th><th><div class="djtooltip">
                            <p id="primary">chunk_start</p>
                            <span class="djtooltiptext">datetime of the start of a given acquisition chunk</span>
                        </div></th><th><div class="djtooltip">
                            <p id="primary">device_serial_number</p>
                            <span class="djtooltiptext"></span>
                        </div></th><th><div class="djtooltip">
                            <p id="primary">spinnaker_video_source_install_time</p>
                            <span class="djtooltiptext">time of the spinnaker_video_source placed and started operation at this position</span>
                        </div></th><th><div class="djtooltip">
                            <p id="primary">tracking_paramset_id</p>
                            <span class="djtooltiptext"></span>
                        </div></th><th><div class="djtooltip">
                            <p id="primary">identity_idx</p>
                            <span class="djtooltiptext"></span>
                        </div></th><th><div class="djtooltip">
                            <p id="nonprimary">identity_name</p>
                            <span class="djtooltiptext"></span>
                        </div></th><th><div class="djtooltip">
                            <p id="nonprimary">identity_likelihood</p>
                            <span class="djtooltiptext"></span>
                        </div></th><th><div class="djtooltip">
                            <p id="nonprimary">anchor_part</p>
                            <span class="djtooltiptext">the name of the point used as anchor node for this class</span>
                        </div> </th> </tr> </thead>
            <tbody> <tr> <td>social0.2-aeon3</td>
<td>2024-03-02 12:00:00</td>
<td>23032909</td>
<td>2024-03-01 16:46:12</td>
<td>1</td>
<td>0</td>
<td>BAA-1104045</td>
<td>=BLOB=</td>
<td>centroid</td></tr><tr><td>social0.2-aeon3</td>
<td>2024-03-02 12:00:00</td>
<td>23032909</td>
<td>2024-03-01 16:46:12</td>
<td>1</td>
<td>1</td>
<td>BAA-1104047</td>
<td>=BLOB=</td>
<td>centroid</td></tr><tr><td>social0.2-aeon3</td>
<td>2024-03-02 13:00:00</td>
<td>23032909</td>
<td>2024-03-01 16:46:12</td>
<td>1</td>
<td>0</td>
<td>BAA-1104045</td>
<td>=BLOB=</td>
<td>centroid</td></tr><tr><td>social0.2-aeon3</td>
<td>2024-03-02 13:00:00</td>
<td>23032909</td>
<td>2024-03-01 16:46:12</td>
<td>1</td>
<td>1</td>
<td>BAA-1104047</td>
<td>=BLOB=</td>
<td>centroid</td> </tr> </tbody>
        </table>
        
        <p>Total: 4</p></div>
        </div></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">Part</span></code> table contains the x, y coordinates of tracked body parts for each video frame.
In this dataset, we only tracked each subject’s <code class="docutils literal notranslate"><span class="pre">centroid</span></code>.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">tracking</span><span class="o">.</span><span class="n">SLEAPTracking</span><span class="o">.</span><span class="n">Part</span> <span class="o">&amp;</span> <span class="n">experiment_key</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html">
    
    <style type="text/css">
        .Table{
            border-collapse:collapse;
        }
        .Table th{
            background: #A0A0A0; color: #ffffff; padding:4px; border:#f0e0e0 1px solid;
            font-weight: normal; font-family: monospace; font-size: 100%;
        }
        .Table td{
            padding:4px; border:#f0e0e0 1px solid; font-size:100%;
        }
        .Table tr:nth-child(odd){
            background: #ffffff;
            color: #000000;
        }
        .Table tr:nth-child(even){
            background: #f3f1ff;
            color: #000000;
        }
        /* Tooltip container */
        .djtooltip {
        }
        /* Tooltip text */
        .djtooltip .djtooltiptext {
            visibility: hidden;
            width: 120px;
            background-color: black;
            color: #fff;
            text-align: center;
            padding: 5px 0;
            border-radius: 6px;
            /* Position the tooltip text - see examples below! */
            position: absolute;
            z-index: 1;
        }
        #primary {
            font-weight: bold;
            color: black;
        }
        #nonprimary {
            font-weight: normal;
            color: white;
        }

        /* Show the tooltip text when you mouse over the tooltip container */
        .djtooltip:hover .djtooltiptext {
            visibility: visible;
        }
    </style>
    
    <b></b>
        <div style="max-height:1000px;max-width:1500px;overflow:auto;">
        <table border="1" class="Table">
            <thead> <tr style="text-align: right;"> <th> <div class="djtooltip">
                            <p id="primary">experiment_name</p>
                            <span class="djtooltiptext">e.g exp0-aeon3</span>
                        </div></th><th><div class="djtooltip">
                            <p id="primary">chunk_start</p>
                            <span class="djtooltiptext">datetime of the start of a given acquisition chunk</span>
                        </div></th><th><div class="djtooltip">
                            <p id="primary">device_serial_number</p>
                            <span class="djtooltiptext"></span>
                        </div></th><th><div class="djtooltip">
                            <p id="primary">spinnaker_video_source_install_time</p>
                            <span class="djtooltiptext">spinnaker_video_source time of placement and start operation</span>
                        </div></th><th><div class="djtooltip">
                            <p id="primary">tracking_paramset_id</p>
                            <span class="djtooltiptext"></span>
                        </div></th><th><div class="djtooltip">
                            <p id="primary">identity_idx</p>
                            <span class="djtooltiptext"></span>
                        </div></th><th><div class="djtooltip">
                            <p id="primary">part_name</p>
                            <span class="djtooltiptext"></span>
                        </div></th><th><div class="djtooltip">
                            <p id="nonprimary">sample_count</p>
                            <span class="djtooltiptext">number of data points acquired from this stream for a given chunk</span>
                        </div></th><th><div class="djtooltip">
                            <p id="nonprimary">x</p>
                            <span class="djtooltiptext"></span>
                        </div></th><th><div class="djtooltip">
                            <p id="nonprimary">y</p>
                            <span class="djtooltiptext"></span>
                        </div></th><th><div class="djtooltip">
                            <p id="nonprimary">likelihood</p>
                            <span class="djtooltiptext"></span>
                        </div></th><th><div class="djtooltip">
                            <p id="nonprimary">timestamps</p>
                            <span class="djtooltiptext"></span>
                        </div> </th> </tr> </thead>
            <tbody> <tr> <td>social0.2-aeon3</td>
<td>2024-03-02 12:00:00</td>
<td>23032909</td>
<td>2024-03-01 16:46:12</td>
<td>1</td>
<td>0</td>
<td>anchor_centroid</td>
<td>19570</td>
<td>=BLOB=</td>
<td>=BLOB=</td>
<td>=BLOB=</td>
<td>=BLOB=</td></tr><tr><td>social0.2-aeon3</td>
<td>2024-03-02 12:00:00</td>
<td>23032909</td>
<td>2024-03-01 16:46:12</td>
<td>1</td>
<td>0</td>
<td>centroid</td>
<td>19570</td>
<td>=BLOB=</td>
<td>=BLOB=</td>
<td>=BLOB=</td>
<td>=BLOB=</td></tr><tr><td>social0.2-aeon3</td>
<td>2024-03-02 12:00:00</td>
<td>23032909</td>
<td>2024-03-01 16:46:12</td>
<td>1</td>
<td>1</td>
<td>anchor_centroid</td>
<td>40429</td>
<td>=BLOB=</td>
<td>=BLOB=</td>
<td>=BLOB=</td>
<td>=BLOB=</td></tr><tr><td>social0.2-aeon3</td>
<td>2024-03-02 12:00:00</td>
<td>23032909</td>
<td>2024-03-01 16:46:12</td>
<td>1</td>
<td>1</td>
<td>centroid</td>
<td>40429</td>
<td>=BLOB=</td>
<td>=BLOB=</td>
<td>=BLOB=</td>
<td>=BLOB=</td></tr><tr><td>social0.2-aeon3</td>
<td>2024-03-02 13:00:00</td>
<td>23032909</td>
<td>2024-03-01 16:46:12</td>
<td>1</td>
<td>0</td>
<td>anchor_centroid</td>
<td>19654</td>
<td>=BLOB=</td>
<td>=BLOB=</td>
<td>=BLOB=</td>
<td>=BLOB=</td></tr><tr><td>social0.2-aeon3</td>
<td>2024-03-02 13:00:00</td>
<td>23032909</td>
<td>2024-03-01 16:46:12</td>
<td>1</td>
<td>0</td>
<td>centroid</td>
<td>19654</td>
<td>=BLOB=</td>
<td>=BLOB=</td>
<td>=BLOB=</td>
<td>=BLOB=</td></tr><tr><td>social0.2-aeon3</td>
<td>2024-03-02 13:00:00</td>
<td>23032909</td>
<td>2024-03-01 16:46:12</td>
<td>1</td>
<td>1</td>
<td>anchor_centroid</td>
<td>40342</td>
<td>=BLOB=</td>
<td>=BLOB=</td>
<td>=BLOB=</td>
<td>=BLOB=</td></tr><tr><td>social0.2-aeon3</td>
<td>2024-03-02 13:00:00</td>
<td>23032909</td>
<td>2024-03-01 16:46:12</td>
<td>1</td>
<td>1</td>
<td>centroid</td>
<td>40342</td>
<td>=BLOB=</td>
<td>=BLOB=</td>
<td>=BLOB=</td>
<td>=BLOB=</td> </tr> </tbody>
        </table>
        
        <p>Total: 8</p></div>
        </div></div>
</div>
</section>
<section id="block-level-data">
<h2>Block-level data<a class="headerlink" href="#block-level-data" title="Link to this heading">#</a></h2>
<p>The <a class="reference internal" href="../tutorials/aeon_dj_pipeline.html#target-aeon-dj-pipeline-analysis-tables"><span class="std std-ref">DataJoint block analysis module</span></a> contains tables that aggregate experimental events into defined time <a class="reference internal" href="../../reference/glossary.html#term-Block"><span class="xref std std-term">blocks</span></a>.
This allows for higher-level analyses, such as behavioural trends over extended periods.</p>
<section id="id1">
<h3>Restricting data<a class="headerlink" href="#id1" title="Link to this heading">#</a></h3>
<p>Using another restriction operator <code class="docutils literal notranslate"><span class="pre">&amp;</span></code>, we can further filter the <code class="docutils literal notranslate"><span class="pre">Block</span></code> and <code class="docutils literal notranslate"><span class="pre">BlockAnalysis</span></code> tables to only include blocks longer than 1 hour for the experiment <code class="docutils literal notranslate"><span class="pre">social0.2-aeon3</span></code>.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">block_analysis</span><span class="o">.</span><span class="n">Block</span> <span class="o">&amp;</span> <span class="n">experiment_key</span> <span class="o">&amp;</span> <span class="s2">&quot;block_duration_hr &gt; 1&quot;</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html">
    
    <style type="text/css">
        .Table{
            border-collapse:collapse;
        }
        .Table th{
            background: #A0A0A0; color: #ffffff; padding:4px; border:#f0e0e0 1px solid;
            font-weight: normal; font-family: monospace; font-size: 100%;
        }
        .Table td{
            padding:4px; border:#f0e0e0 1px solid; font-size:100%;
        }
        .Table tr:nth-child(odd){
            background: #ffffff;
            color: #000000;
        }
        .Table tr:nth-child(even){
            background: #f3f1ff;
            color: #000000;
        }
        /* Tooltip container */
        .djtooltip {
        }
        /* Tooltip text */
        .djtooltip .djtooltiptext {
            visibility: hidden;
            width: 120px;
            background-color: black;
            color: #fff;
            text-align: center;
            padding: 5px 0;
            border-radius: 6px;
            /* Position the tooltip text - see examples below! */
            position: absolute;
            z-index: 1;
        }
        #primary {
            font-weight: bold;
            color: black;
        }
        #nonprimary {
            font-weight: normal;
            color: white;
        }

        /* Show the tooltip text when you mouse over the tooltip container */
        .djtooltip:hover .djtooltiptext {
            visibility: visible;
        }
    </style>
    
    <b></b>
        <div style="max-height:1000px;max-width:1500px;overflow:auto;">
        <table border="1" class="Table">
            <thead> <tr style="text-align: right;"> <th> <div class="djtooltip">
                            <p id="primary">experiment_name</p>
                            <span class="djtooltiptext">e.g exp0-aeon3</span>
                        </div></th><th><div class="djtooltip">
                            <p id="primary">block_start</p>
                            <span class="djtooltiptext"></span>
                        </div></th><th><div class="djtooltip">
                            <p id="nonprimary">block_end</p>
                            <span class="djtooltiptext"></span>
                        </div></th><th><div class="djtooltip">
                            <p id="nonprimary">block_duration_hr</p>
                            <span class="djtooltiptext">(hour)</span>
                        </div> </th> </tr> </thead>
            <tbody> <tr> <td>social0.2-aeon3</td>
<td>2024-03-02 12:00:00</td>
<td>2024-03-02 14:00:00</td>
<td>2.000</td> </tr> </tbody>
        </table>
        
        <p>Total: 1</p></div>
        </div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">block_analysis</span><span class="o">.</span><span class="n">BlockAnalysis</span> <span class="o">&amp;</span> <span class="n">experiment_key</span> <span class="o">&amp;</span> <span class="s2">&quot;block_duration &gt; 1&quot;</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html">
    
    <style type="text/css">
        .Table{
            border-collapse:collapse;
        }
        .Table th{
            background: #A0A0A0; color: #ffffff; padding:4px; border:#f0e0e0 1px solid;
            font-weight: normal; font-family: monospace; font-size: 100%;
        }
        .Table td{
            padding:4px; border:#f0e0e0 1px solid; font-size:100%;
        }
        .Table tr:nth-child(odd){
            background: #ffffff;
            color: #000000;
        }
        .Table tr:nth-child(even){
            background: #f3f1ff;
            color: #000000;
        }
        /* Tooltip container */
        .djtooltip {
        }
        /* Tooltip text */
        .djtooltip .djtooltiptext {
            visibility: hidden;
            width: 120px;
            background-color: black;
            color: #fff;
            text-align: center;
            padding: 5px 0;
            border-radius: 6px;
            /* Position the tooltip text - see examples below! */
            position: absolute;
            z-index: 1;
        }
        #primary {
            font-weight: bold;
            color: black;
        }
        #nonprimary {
            font-weight: normal;
            color: white;
        }

        /* Show the tooltip text when you mouse over the tooltip container */
        .djtooltip:hover .djtooltiptext {
            visibility: visible;
        }
    </style>
    
    <b></b>
        <div style="max-height:1000px;max-width:1500px;overflow:auto;">
        <table border="1" class="Table">
            <thead> <tr style="text-align: right;"> <th> <div class="djtooltip">
                            <p id="primary">experiment_name</p>
                            <span class="djtooltiptext">e.g exp0-aeon3</span>
                        </div></th><th><div class="djtooltip">
                            <p id="primary">block_start</p>
                            <span class="djtooltiptext"></span>
                        </div></th><th><div class="djtooltip">
                            <p id="nonprimary">block_duration</p>
                            <span class="djtooltiptext">(hour)</span>
                        </div></th><th><div class="djtooltip">
                            <p id="nonprimary">patch_count</p>
                            <span class="djtooltiptext">number of patches in the block</span>
                        </div></th><th><div class="djtooltip">
                            <p id="nonprimary">subject_count</p>
                            <span class="djtooltiptext">number of subjects in the block</span>
                        </div> </th> </tr> </thead>
            <tbody> <tr> <td>social0.2-aeon3</td>
<td>2024-03-02 12:00:00</td>
<td>1.99891</td>
<td>3</td>
<td>2</td> </tr> </tbody>
        </table>
        
        <p>Total: 1</p></div>
        </div></div>
</div>
<p>We can also use the SQL <code class="docutils literal notranslate"><span class="pre">LIKE</span></code> operator to filter records based on a pattern match.
Here, we filter the <code class="docutils literal notranslate"><span class="pre">Block</span></code> table by <code class="docutils literal notranslate"><span class="pre">block_start</span></code> to only include blocks that started on <code class="docutils literal notranslate"><span class="pre">2024-03-02</span></code>.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">block_analysis</span><span class="o">.</span><span class="n">Block</span> <span class="o">&amp;</span> <span class="n">experiment_key</span> <span class="o">&amp;</span> <span class="s1">&#39;block_start LIKE &quot;%2024-03-02%&quot;&#39;</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html">
    
    <style type="text/css">
        .Table{
            border-collapse:collapse;
        }
        .Table th{
            background: #A0A0A0; color: #ffffff; padding:4px; border:#f0e0e0 1px solid;
            font-weight: normal; font-family: monospace; font-size: 100%;
        }
        .Table td{
            padding:4px; border:#f0e0e0 1px solid; font-size:100%;
        }
        .Table tr:nth-child(odd){
            background: #ffffff;
            color: #000000;
        }
        .Table tr:nth-child(even){
            background: #f3f1ff;
            color: #000000;
        }
        /* Tooltip container */
        .djtooltip {
        }
        /* Tooltip text */
        .djtooltip .djtooltiptext {
            visibility: hidden;
            width: 120px;
            background-color: black;
            color: #fff;
            text-align: center;
            padding: 5px 0;
            border-radius: 6px;
            /* Position the tooltip text - see examples below! */
            position: absolute;
            z-index: 1;
        }
        #primary {
            font-weight: bold;
            color: black;
        }
        #nonprimary {
            font-weight: normal;
            color: white;
        }

        /* Show the tooltip text when you mouse over the tooltip container */
        .djtooltip:hover .djtooltiptext {
            visibility: visible;
        }
    </style>
    
    <b></b>
        <div style="max-height:1000px;max-width:1500px;overflow:auto;">
        <table border="1" class="Table">
            <thead> <tr style="text-align: right;"> <th> <div class="djtooltip">
                            <p id="primary">experiment_name</p>
                            <span class="djtooltiptext">e.g exp0-aeon3</span>
                        </div></th><th><div class="djtooltip">
                            <p id="primary">block_start</p>
                            <span class="djtooltiptext"></span>
                        </div></th><th><div class="djtooltip">
                            <p id="nonprimary">block_end</p>
                            <span class="djtooltiptext"></span>
                        </div></th><th><div class="djtooltip">
                            <p id="nonprimary">block_duration_hr</p>
                            <span class="djtooltiptext">(hour)</span>
                        </div> </th> </tr> </thead>
            <tbody> <tr> <td>social0.2-aeon3</td>
<td>2024-03-02 12:00:00</td>
<td>2024-03-02 14:00:00</td>
<td>2.000</td> </tr> </tbody>
        </table>
        
        <p>Total: 1</p></div>
        </div></div>
</div>
</section>
<section id="using-primary-keys">
<h3>Using primary keys<a class="headerlink" href="#using-primary-keys" title="Link to this heading">#</a></h3>
<p>We can <a class="reference external" href="https://docs.datajoint.com/core/datajoint-python/0.14/query/fetch/#fetch"><code class="docutils literal notranslate"><span class="pre">fetch()</span></code></a> the <a class="reference external" href="https://docs.datajoint.com/core/datajoint-python/0.14/design/tables/primary/#">primary keys</a> of the blocks matching the above query expression as a list of dictionaries.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">block_key</span> <span class="o">=</span> <span class="p">(</span>
    <span class="n">block_analysis</span><span class="o">.</span><span class="n">Block</span> <span class="o">&amp;</span> <span class="n">experiment_key</span> <span class="o">&amp;</span> <span class="s1">&#39;block_start LIKE &quot;%2024-03-02%&quot;&#39;</span>
<span class="p">)</span><span class="o">.</span><span class="n">fetch</span><span class="p">(</span><span class="s2">&quot;KEY&quot;</span><span class="p">)</span>
<span class="n">block_key</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>[{&#39;experiment_name&#39;: &#39;social0.2-aeon3&#39;,
  &#39;block_start&#39;: datetime.datetime(2024, 3, 2, 12, 0)}]
</pre></div>
</div>
</div>
</div>
<p>The primary keys can then be used to retrieve specific block-level records in other <a class="reference internal" href="../tutorials/aeon_dj_pipeline.html#target-aeon-dj-pipeline-analysis-fig"><span class="std std-ref">analysis tables that reference the <code class="docutils literal notranslate"><span class="pre">Block</span></code> table</span></a>.</p>
<p>For instance, we can use the primary keys to retrieve the <code class="docutils literal notranslate"><span class="pre">BlockAnalysis</span></code> records associated with the blocks that started on <code class="docutils literal notranslate"><span class="pre">2024-03-02</span></code>.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">block_analysis</span><span class="o">.</span><span class="n">BlockAnalysis</span> <span class="o">&amp;</span> <span class="n">block_key</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html">
    
    <style type="text/css">
        .Table{
            border-collapse:collapse;
        }
        .Table th{
            background: #A0A0A0; color: #ffffff; padding:4px; border:#f0e0e0 1px solid;
            font-weight: normal; font-family: monospace; font-size: 100%;
        }
        .Table td{
            padding:4px; border:#f0e0e0 1px solid; font-size:100%;
        }
        .Table tr:nth-child(odd){
            background: #ffffff;
            color: #000000;
        }
        .Table tr:nth-child(even){
            background: #f3f1ff;
            color: #000000;
        }
        /* Tooltip container */
        .djtooltip {
        }
        /* Tooltip text */
        .djtooltip .djtooltiptext {
            visibility: hidden;
            width: 120px;
            background-color: black;
            color: #fff;
            text-align: center;
            padding: 5px 0;
            border-radius: 6px;
            /* Position the tooltip text - see examples below! */
            position: absolute;
            z-index: 1;
        }
        #primary {
            font-weight: bold;
            color: black;
        }
        #nonprimary {
            font-weight: normal;
            color: white;
        }

        /* Show the tooltip text when you mouse over the tooltip container */
        .djtooltip:hover .djtooltiptext {
            visibility: visible;
        }
    </style>
    
    <b></b>
        <div style="max-height:1000px;max-width:1500px;overflow:auto;">
        <table border="1" class="Table">
            <thead> <tr style="text-align: right;"> <th> <div class="djtooltip">
                            <p id="primary">experiment_name</p>
                            <span class="djtooltiptext">e.g exp0-aeon3</span>
                        </div></th><th><div class="djtooltip">
                            <p id="primary">block_start</p>
                            <span class="djtooltiptext"></span>
                        </div></th><th><div class="djtooltip">
                            <p id="nonprimary">block_duration</p>
                            <span class="djtooltiptext">(hour)</span>
                        </div></th><th><div class="djtooltip">
                            <p id="nonprimary">patch_count</p>
                            <span class="djtooltiptext">number of patches in the block</span>
                        </div></th><th><div class="djtooltip">
                            <p id="nonprimary">subject_count</p>
                            <span class="djtooltiptext">number of subjects in the block</span>
                        </div> </th> </tr> </thead>
            <tbody> <tr> <td>social0.2-aeon3</td>
<td>2024-03-02 12:00:00</td>
<td>1.99891</td>
<td>3</td>
<td>2</td> </tr> </tbody>
        </table>
        
        <p>Total: 1</p></div>
        </div></div>
</div>
<p>We can also retrieve subject-specific analyses (<code class="docutils literal notranslate"><span class="pre">BlockSubjectAnalysis</span></code>), such as subjects’ food patch preference (<code class="docutils literal notranslate"><span class="pre">BlockSubjectAnalysis.Preference</span></code>) and their interaction with the food patches (<code class="docutils literal notranslate"><span class="pre">BlockSubjectAnalysis.Patch</span></code>) for the same blocks.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">block_analysis</span><span class="o">.</span><span class="n">BlockSubjectAnalysis</span><span class="o">.</span><span class="n">Preference</span> <span class="o">&amp;</span> <span class="n">block_key</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html">
    
    <style type="text/css">
        .Table{
            border-collapse:collapse;
        }
        .Table th{
            background: #A0A0A0; color: #ffffff; padding:4px; border:#f0e0e0 1px solid;
            font-weight: normal; font-family: monospace; font-size: 100%;
        }
        .Table td{
            padding:4px; border:#f0e0e0 1px solid; font-size:100%;
        }
        .Table tr:nth-child(odd){
            background: #ffffff;
            color: #000000;
        }
        .Table tr:nth-child(even){
            background: #f3f1ff;
            color: #000000;
        }
        /* Tooltip container */
        .djtooltip {
        }
        /* Tooltip text */
        .djtooltip .djtooltiptext {
            visibility: hidden;
            width: 120px;
            background-color: black;
            color: #fff;
            text-align: center;
            padding: 5px 0;
            border-radius: 6px;
            /* Position the tooltip text - see examples below! */
            position: absolute;
            z-index: 1;
        }
        #primary {
            font-weight: bold;
            color: black;
        }
        #nonprimary {
            font-weight: normal;
            color: white;
        }

        /* Show the tooltip text when you mouse over the tooltip container */
        .djtooltip:hover .djtooltiptext {
            visibility: visible;
        }
    </style>
    
    <b>Measure of preference for a particular patch from a particular subject</b>
        <div style="max-height:1000px;max-width:1500px;overflow:auto;">
        <table border="1" class="Table">
            <thead> <tr style="text-align: right;"> <th> <div class="djtooltip">
                            <p id="primary">experiment_name</p>
                            <span class="djtooltiptext">e.g exp0-aeon3</span>
                        </div></th><th><div class="djtooltip">
                            <p id="primary">block_start</p>
                            <span class="djtooltiptext"></span>
                        </div></th><th><div class="djtooltip">
                            <p id="primary">patch_name</p>
                            <span class="djtooltiptext">e.g. Patch1, Patch2</span>
                        </div></th><th><div class="djtooltip">
                            <p id="primary">subject_name</p>
                            <span class="djtooltiptext"></span>
                        </div></th><th><div class="djtooltip">
                            <p id="nonprimary">cumulative_preference_by_wheel</p>
                            <span class="djtooltiptext"></span>
                        </div></th><th><div class="djtooltip">
                            <p id="nonprimary">cumulative_preference_by_time</p>
                            <span class="djtooltiptext"></span>
                        </div></th><th><div class="djtooltip">
                            <p id="nonprimary">running_preference_by_time</p>
                            <span class="djtooltiptext"></span>
                        </div></th><th><div class="djtooltip">
                            <p id="nonprimary">running_preference_by_wheel</p>
                            <span class="djtooltiptext"></span>
                        </div></th><th><div class="djtooltip">
                            <p id="nonprimary">final_preference_by_wheel</p>
                            <span class="djtooltiptext">cumulative_preference_by_wheel at the end of the block</span>
                        </div></th><th><div class="djtooltip">
                            <p id="nonprimary">final_preference_by_time</p>
                            <span class="djtooltiptext">cumulative_preference_by_time at the end of the block</span>
                        </div> </th> </tr> </thead>
            <tbody> <tr> <td>social0.2-aeon3</td>
<td>2024-03-02 12:00:00</td>
<td>Patch1</td>
<td>BAA-1104045</td>
<td>=BLOB=</td>
<td>=BLOB=</td>
<td>=BLOB=</td>
<td>=BLOB=</td>
<td>0.0</td>
<td>0.0363886</td></tr><tr><td>social0.2-aeon3</td>
<td>2024-03-02 12:00:00</td>
<td>Patch1</td>
<td>BAA-1104047</td>
<td>=BLOB=</td>
<td>=BLOB=</td>
<td>=BLOB=</td>
<td>=BLOB=</td>
<td>0.105198</td>
<td>0.160914</td></tr><tr><td>social0.2-aeon3</td>
<td>2024-03-02 12:00:00</td>
<td>Patch2</td>
<td>BAA-1104045</td>
<td>=BLOB=</td>
<td>=BLOB=</td>
<td>=BLOB=</td>
<td>=BLOB=</td>
<td>0.0231214</td>
<td>0.302103</td></tr><tr><td>social0.2-aeon3</td>
<td>2024-03-02 12:00:00</td>
<td>Patch2</td>
<td>BAA-1104047</td>
<td>=BLOB=</td>
<td>=BLOB=</td>
<td>=BLOB=</td>
<td>=BLOB=</td>
<td>0.352164</td>
<td>0.368887</td></tr><tr><td>social0.2-aeon3</td>
<td>2024-03-02 12:00:00</td>
<td>Patch3</td>
<td>BAA-1104045</td>
<td>=BLOB=</td>
<td>=BLOB=</td>
<td>=BLOB=</td>
<td>=BLOB=</td>
<td>1.00854</td>
<td>0.661508</td></tr><tr><td>social0.2-aeon3</td>
<td>2024-03-02 12:00:00</td>
<td>Patch3</td>
<td>BAA-1104047</td>
<td>=BLOB=</td>
<td>=BLOB=</td>
<td>=BLOB=</td>
<td>=BLOB=</td>
<td>0.542637</td>
<td>0.470199</td> </tr> </tbody>
        </table>
        
        <p>Total: 6</p></div>
        </div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># based on subject position</span>
<span class="n">block_analysis</span><span class="o">.</span><span class="n">BlockSubjectAnalysis</span><span class="o">.</span><span class="n">Patch</span> <span class="o">&amp;</span> <span class="n">block_key</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html">
    
    <style type="text/css">
        .Table{
            border-collapse:collapse;
        }
        .Table th{
            background: #A0A0A0; color: #ffffff; padding:4px; border:#f0e0e0 1px solid;
            font-weight: normal; font-family: monospace; font-size: 100%;
        }
        .Table td{
            padding:4px; border:#f0e0e0 1px solid; font-size:100%;
        }
        .Table tr:nth-child(odd){
            background: #ffffff;
            color: #000000;
        }
        .Table tr:nth-child(even){
            background: #f3f1ff;
            color: #000000;
        }
        /* Tooltip container */
        .djtooltip {
        }
        /* Tooltip text */
        .djtooltip .djtooltiptext {
            visibility: hidden;
            width: 120px;
            background-color: black;
            color: #fff;
            text-align: center;
            padding: 5px 0;
            border-radius: 6px;
            /* Position the tooltip text - see examples below! */
            position: absolute;
            z-index: 1;
        }
        #primary {
            font-weight: bold;
            color: black;
        }
        #nonprimary {
            font-weight: normal;
            color: white;
        }

        /* Show the tooltip text when you mouse over the tooltip container */
        .djtooltip:hover .djtooltiptext {
            visibility: visible;
        }
    </style>
    
    <b></b>
        <div style="max-height:1000px;max-width:1500px;overflow:auto;">
        <table border="1" class="Table">
            <thead> <tr style="text-align: right;"> <th> <div class="djtooltip">
                            <p id="primary">experiment_name</p>
                            <span class="djtooltiptext">e.g exp0-aeon3</span>
                        </div></th><th><div class="djtooltip">
                            <p id="primary">block_start</p>
                            <span class="djtooltiptext"></span>
                        </div></th><th><div class="djtooltip">
                            <p id="primary">patch_name</p>
                            <span class="djtooltiptext">e.g. Patch1, Patch2</span>
                        </div></th><th><div class="djtooltip">
                            <p id="primary">subject_name</p>
                            <span class="djtooltiptext"></span>
                        </div></th><th><div class="djtooltip">
                            <p id="nonprimary">in_patch_timestamps</p>
                            <span class="djtooltiptext">timestamps when a subject is at a specific patch</span>
                        </div></th><th><div class="djtooltip">
                            <p id="nonprimary">in_patch_time</p>
                            <span class="djtooltiptext">total seconds spent in this patch for this block</span>
                        </div></th><th><div class="djtooltip">
                            <p id="nonprimary">in_patch_rfid_timestamps</p>
                            <span class="djtooltiptext">in_patch_timestamps based on RFID</span>
                        </div></th><th><div class="djtooltip">
                            <p id="nonprimary">pellet_count</p>
                            <span class="djtooltiptext"></span>
                        </div></th><th><div class="djtooltip">
                            <p id="nonprimary">pellet_timestamps</p>
                            <span class="djtooltiptext"></span>
                        </div></th><th><div class="djtooltip">
                            <p id="nonprimary">patch_threshold</p>
                            <span class="djtooltiptext">patch threshold value at each pellet delivery</span>
                        </div></th><th><div class="djtooltip">
                            <p id="nonprimary">wheel_cumsum_distance_travelled</p>
                            <span class="djtooltiptext">wheel's cumulative distance travelled</span>
                        </div> </th> </tr> </thead>
            <tbody> <tr> <td>social0.2-aeon3</td>
<td>2024-03-02 12:00:00</td>
<td>Patch1</td>
<td>BAA-1104045</td>
<td>=BLOB=</td>
<td>12.18</td>
<td>=BLOB=</td>
<td>0</td>
<td>=BLOB=</td>
<td>=BLOB=</td>
<td>=BLOB=</td></tr><tr><td>social0.2-aeon3</td>
<td>2024-03-02 12:00:00</td>
<td>Patch1</td>
<td>BAA-1104047</td>
<td>=BLOB=</td>
<td>300.22</td>
<td>=BLOB=</td>
<td>0</td>
<td>=BLOB=</td>
<td>=BLOB=</td>
<td>=BLOB=</td></tr><tr><td>social0.2-aeon3</td>
<td>2024-03-02 12:00:00</td>
<td>Patch2</td>
<td>BAA-1104045</td>
<td>=BLOB=</td>
<td>101.12</td>
<td>=BLOB=</td>
<td>0</td>
<td>=BLOB=</td>
<td>=BLOB=</td>
<td>=BLOB=</td></tr><tr><td>social0.2-aeon3</td>
<td>2024-03-02 12:00:00</td>
<td>Patch2</td>
<td>BAA-1104047</td>
<td>=BLOB=</td>
<td>688.24</td>
<td>=BLOB=</td>
<td>9</td>
<td>=BLOB=</td>
<td>=BLOB=</td>
<td>=BLOB=</td></tr><tr><td>social0.2-aeon3</td>
<td>2024-03-02 12:00:00</td>
<td>Patch3</td>
<td>BAA-1104045</td>
<td>=BLOB=</td>
<td>221.42</td>
<td>=BLOB=</td>
<td>0</td>
<td>=BLOB=</td>
<td>=BLOB=</td>
<td>=BLOB=</td></tr><tr><td>social0.2-aeon3</td>
<td>2024-03-02 12:00:00</td>
<td>Patch3</td>
<td>BAA-1104047</td>
<td>=BLOB=</td>
<td>877.26</td>
<td>=BLOB=</td>
<td>35</td>
<td>=BLOB=</td>
<td>=BLOB=</td>
<td>=BLOB=</td> </tr> </tbody>
        </table>
        
        <p>Total: 6</p></div>
        </div></div>
</div>
</section>
<section id="joining-data">
<h3>Joining data<a class="headerlink" href="#joining-data" title="Link to this heading">#</a></h3>
<p>To obtain a comprehensive view of the patch-preference interactions, we can join the <code class="docutils literal notranslate"><span class="pre">Patch</span></code> and <code class="docutils literal notranslate"><span class="pre">Preference</span></code> part tables using the <a class="reference external" href="https://docs.datajoint.com/core/datajoint-python/0.14/query/operators/#join-compatibility">join operator <code class="docutils literal notranslate"><span class="pre">*</span></code></a>.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">block_analysis</span><span class="o">.</span><span class="n">BlockSubjectAnalysis</span><span class="o">.</span><span class="n">Patch</span> <span class="o">*</span> <span class="n">block_analysis</span><span class="o">.</span><span class="n">BlockSubjectAnalysis</span><span class="o">.</span><span class="n">Preference</span> <span class="o">&amp;</span> <span class="n">block_key</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html">
    
    <style type="text/css">
        .Table{
            border-collapse:collapse;
        }
        .Table th{
            background: #A0A0A0; color: #ffffff; padding:4px; border:#f0e0e0 1px solid;
            font-weight: normal; font-family: monospace; font-size: 100%;
        }
        .Table td{
            padding:4px; border:#f0e0e0 1px solid; font-size:100%;
        }
        .Table tr:nth-child(odd){
            background: #ffffff;
            color: #000000;
        }
        .Table tr:nth-child(even){
            background: #f3f1ff;
            color: #000000;
        }
        /* Tooltip container */
        .djtooltip {
        }
        /* Tooltip text */
        .djtooltip .djtooltiptext {
            visibility: hidden;
            width: 120px;
            background-color: black;
            color: #fff;
            text-align: center;
            padding: 5px 0;
            border-radius: 6px;
            /* Position the tooltip text - see examples below! */
            position: absolute;
            z-index: 1;
        }
        #primary {
            font-weight: bold;
            color: black;
        }
        #nonprimary {
            font-weight: normal;
            color: white;
        }

        /* Show the tooltip text when you mouse over the tooltip container */
        .djtooltip:hover .djtooltiptext {
            visibility: visible;
        }
    </style>
    
    
        <div style="max-height:1000px;max-width:1500px;overflow:auto;">
        <table border="1" class="Table">
            <thead> <tr style="text-align: right;"> <th> <div class="djtooltip">
                            <p id="primary">experiment_name</p>
                            <span class="djtooltiptext">e.g exp0-aeon3</span>
                        </div></th><th><div class="djtooltip">
                            <p id="primary">block_start</p>
                            <span class="djtooltiptext"></span>
                        </div></th><th><div class="djtooltip">
                            <p id="primary">patch_name</p>
                            <span class="djtooltiptext">e.g. Patch1, Patch2</span>
                        </div></th><th><div class="djtooltip">
                            <p id="primary">subject_name</p>
                            <span class="djtooltiptext"></span>
                        </div></th><th><div class="djtooltip">
                            <p id="nonprimary">in_patch_timestamps</p>
                            <span class="djtooltiptext">timestamps when a subject is at a specific patch</span>
                        </div></th><th><div class="djtooltip">
                            <p id="nonprimary">in_patch_time</p>
                            <span class="djtooltiptext">total seconds spent in this patch for this block</span>
                        </div></th><th><div class="djtooltip">
                            <p id="nonprimary">in_patch_rfid_timestamps</p>
                            <span class="djtooltiptext">in_patch_timestamps based on RFID</span>
                        </div></th><th><div class="djtooltip">
                            <p id="nonprimary">pellet_count</p>
                            <span class="djtooltiptext"></span>
                        </div></th><th><div class="djtooltip">
                            <p id="nonprimary">pellet_timestamps</p>
                            <span class="djtooltiptext"></span>
                        </div></th><th><div class="djtooltip">
                            <p id="nonprimary">patch_threshold</p>
                            <span class="djtooltiptext">patch threshold value at each pellet delivery</span>
                        </div></th><th><div class="djtooltip">
                            <p id="nonprimary">wheel_cumsum_distance_travelled</p>
                            <span class="djtooltiptext">wheel's cumulative distance travelled</span>
                        </div></th><th><div class="djtooltip">
                            <p id="nonprimary">cumulative_preference_by_wheel</p>
                            <span class="djtooltiptext"></span>
                        </div></th><th><div class="djtooltip">
                            <p id="nonprimary">cumulative_preference_by_time</p>
                            <span class="djtooltiptext"></span>
                        </div></th><th><div class="djtooltip">
                            <p id="nonprimary">running_preference_by_time</p>
                            <span class="djtooltiptext"></span>
                        </div></th><th><div class="djtooltip">
                            <p id="nonprimary">running_preference_by_wheel</p>
                            <span class="djtooltiptext"></span>
                        </div></th><th><div class="djtooltip">
                            <p id="nonprimary">final_preference_by_wheel</p>
                            <span class="djtooltiptext">cumulative_preference_by_wheel at the end of the block</span>
                        </div></th><th><div class="djtooltip">
                            <p id="nonprimary">final_preference_by_time</p>
                            <span class="djtooltiptext">cumulative_preference_by_time at the end of the block</span>
                        </div> </th> </tr> </thead>
            <tbody> <tr> <td>social0.2-aeon3</td>
<td>2024-03-02 12:00:00</td>
<td>Patch1</td>
<td>BAA-1104045</td>
<td>=BLOB=</td>
<td>12.18</td>
<td>=BLOB=</td>
<td>0</td>
<td>=BLOB=</td>
<td>=BLOB=</td>
<td>=BLOB=</td>
<td>=BLOB=</td>
<td>=BLOB=</td>
<td>=BLOB=</td>
<td>=BLOB=</td>
<td>0.0</td>
<td>0.0363886</td></tr><tr><td>social0.2-aeon3</td>
<td>2024-03-02 12:00:00</td>
<td>Patch1</td>
<td>BAA-1104047</td>
<td>=BLOB=</td>
<td>300.22</td>
<td>=BLOB=</td>
<td>0</td>
<td>=BLOB=</td>
<td>=BLOB=</td>
<td>=BLOB=</td>
<td>=BLOB=</td>
<td>=BLOB=</td>
<td>=BLOB=</td>
<td>=BLOB=</td>
<td>0.105198</td>
<td>0.160914</td></tr><tr><td>social0.2-aeon3</td>
<td>2024-03-02 12:00:00</td>
<td>Patch2</td>
<td>BAA-1104045</td>
<td>=BLOB=</td>
<td>101.12</td>
<td>=BLOB=</td>
<td>0</td>
<td>=BLOB=</td>
<td>=BLOB=</td>
<td>=BLOB=</td>
<td>=BLOB=</td>
<td>=BLOB=</td>
<td>=BLOB=</td>
<td>=BLOB=</td>
<td>0.0231214</td>
<td>0.302103</td></tr><tr><td>social0.2-aeon3</td>
<td>2024-03-02 12:00:00</td>
<td>Patch2</td>
<td>BAA-1104047</td>
<td>=BLOB=</td>
<td>688.24</td>
<td>=BLOB=</td>
<td>9</td>
<td>=BLOB=</td>
<td>=BLOB=</td>
<td>=BLOB=</td>
<td>=BLOB=</td>
<td>=BLOB=</td>
<td>=BLOB=</td>
<td>=BLOB=</td>
<td>0.352164</td>
<td>0.368887</td></tr><tr><td>social0.2-aeon3</td>
<td>2024-03-02 12:00:00</td>
<td>Patch3</td>
<td>BAA-1104045</td>
<td>=BLOB=</td>
<td>221.42</td>
<td>=BLOB=</td>
<td>0</td>
<td>=BLOB=</td>
<td>=BLOB=</td>
<td>=BLOB=</td>
<td>=BLOB=</td>
<td>=BLOB=</td>
<td>=BLOB=</td>
<td>=BLOB=</td>
<td>1.00854</td>
<td>0.661508</td></tr><tr><td>social0.2-aeon3</td>
<td>2024-03-02 12:00:00</td>
<td>Patch3</td>
<td>BAA-1104047</td>
<td>=BLOB=</td>
<td>877.26</td>
<td>=BLOB=</td>
<td>35</td>
<td>=BLOB=</td>
<td>=BLOB=</td>
<td>=BLOB=</td>
<td>=BLOB=</td>
<td>=BLOB=</td>
<td>=BLOB=</td>
<td>=BLOB=</td>
<td>0.542637</td>
<td>0.470199</td> </tr> </tbody>
        </table>
        
        <p>Total: 6</p></div>
        </div></div>
</div>
</section>
<section id="fetching-and-inspecting-data">
<h3>Fetching and inspecting data<a class="headerlink" href="#fetching-and-inspecting-data" title="Link to this heading">#</a></h3>
<p>Finally, data can be fetched as a <a class="reference external" href="https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DataFrame.html">pandas DataFrame</a> using <a class="reference external" href="https://docs.datajoint.com/core/datajoint-python/0.14/query/fetch/#usage-with-pandas"><code class="docutils literal notranslate"><span class="pre">fetch()</span></code></a> with the <code class="docutils literal notranslate"><span class="pre">format=&quot;frame&quot;</span></code> argument.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">block_patch_data</span> <span class="o">=</span> <span class="p">(</span>
    <span class="p">(</span><span class="n">block_analysis</span><span class="o">.</span><span class="n">BlockAnalysis</span><span class="o">.</span><span class="n">Patch</span> <span class="o">&amp;</span> <span class="n">block_key</span><span class="p">)</span><span class="o">.</span><span class="n">fetch</span><span class="p">(</span><span class="nb">format</span><span class="o">=</span><span class="s2">&quot;frame&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">reset_index</span><span class="p">()</span>
<span class="p">)</span>
<span class="n">block_patch_data</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>experiment_name</th>
      <th>block_start</th>
      <th>patch_name</th>
      <th>pellet_count</th>
      <th>pellet_timestamps</th>
      <th>wheel_cumsum_distance_travelled</th>
      <th>wheel_timestamps</th>
      <th>patch_threshold</th>
      <th>patch_threshold_timestamps</th>
      <th>patch_rate</th>
      <th>patch_offset</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>social0.2-aeon3</td>
      <td>2024-03-02 12:00:00</td>
      <td>Patch1</td>
      <td>0</td>
      <td>[]</td>
      <td>[-0.0, 0.0015340744203575785, 0.00153407442035...</td>
      <td>[2024-03-02T12:00:00.000000000, 2024-03-02T12:...</td>
      <td>[]</td>
      <td>[]</td>
      <td>0.0100</td>
      <td>75.0</td>
    </tr>
    <tr>
      <th>1</th>
      <td>social0.2-aeon3</td>
      <td>2024-03-02 12:00:00</td>
      <td>Patch2</td>
      <td>9</td>
      <td>[2024-03-02T12:24:33.777504000, 2024-03-02T12:...</td>
      <td>[-0.0, 0.004602223261073846, -0.0, 0.001534074...</td>
      <td>[2024-03-02T12:00:00.000000000, 2024-03-02T12:...</td>
      <td>[364.05544835561926, 164.93215066599433, 485.7...</td>
      <td>[2024-03-02T12:24:09.392000000, 2024-03-02T12:...</td>
      <td>0.0020</td>
      <td>75.0</td>
    </tr>
    <tr>
      <th>2</th>
      <td>social0.2-aeon3</td>
      <td>2024-03-02 12:00:00</td>
      <td>Patch3</td>
      <td>35</td>
      <td>[2024-03-02T12:20:17.155488000, 2024-03-02T12:...</td>
      <td>[-0.0, 0.003068148840714713, 0.004602223261073...</td>
      <td>[2024-03-02T12:00:00.000000000, 2024-03-02T12:...</td>
      <td>[153.60720025718558, 166.6737735450297, 327.20...</td>
      <td>[2024-03-02T12:20:01.725984000, 2024-03-02T12:...</td>
      <td>0.0033</td>
      <td>75.0</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
</section>
</section>
</section>


                </article>
              
              
              
              
              
                <footer class="prev-next-footer d-print-none">
                  
<div class="prev-next-area">
    <a class="left-prev"
       href="dj_pipeline_local_deployment.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">previous</p>
        <p class="prev-next-title">DataJoint pipeline: On-premises deployment</p>
      </div>
    </a>
    <a class="right-next"
       href="hmm_example.html"
       title="next page">
      <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">Hidden Markov Model analysis of mouse foraging behaviour</p>
      </div>
      <i class="fa-solid fa-angle-right"></i>
    </a>
</div>
                </footer>
              
            </div>
            
            
              
                <dialog id="pst-secondary-sidebar-modal"></dialog>
                <div id="pst-secondary-sidebar" class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">


  <div class="sidebar-secondary-item">
<div
    id="pst-page-navigation-heading-2"
    class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> On this page
  </div>
  <nav class="bd-toc-nav page-toc" aria-labelledby="pst-page-navigation-heading-2">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#acquisition-data">Acquisition data</a><ul class="visible nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#restricting-data">Restricting data</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#tracking-data">Tracking data</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#block-level-data">Block-level data</a><ul class="visible nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id1">Restricting data</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#using-primary-keys">Using primary keys</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#joining-data">Joining data</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#fetching-and-inspecting-data">Fetching and inspecting data</a></li>
</ul>
</li>
</ul>
  </nav></div>

  <div class="sidebar-secondary-item">
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../../_sources/user/how_to/dj_querying_data.ipynb.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
          </footer>
        
      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script defer src="../../_static/scripts/bootstrap.js?digest=8878045cc6db502f8baf"></script>
<script defer src="../../_static/scripts/pydata-sphinx-theme.js?digest=8878045cc6db502f8baf"></script>

  <footer class="bd-footer">
<div class="bd-footer__inner bd-page-width">
  
    <div class="footer-items__start">
      
        <div class="footer-item"><p class="sphinx-version"></p>
    Created using <a href="https://sphinx-doc.org/">Sphinx</a> 8.2.3.
    <br/>
    </p>
    <p class="theme-version">
    Built with the
    <a href="https://pydata-sphinx-theme.readthedocs.io/en/stable/index.html">PyData Sphinx Theme</a>
    0.16.1.
    </p></div>
      
    </div>
  
  
  
    <div class="footer-items__end">
      
        <div class="footer-item"><div class="things-in-a-row">
    <a href="https://neurogears.org/">
        <img src="../../_static/images/light-logo-neurogears.png" alt="Sponsors" class="only-light img-sponsor"/>
        <img src="../../_static/images/dark-logo-neurogears.png" alt="Sponsors" class="only-dark img-sponsor"/>
    </a>
    <a href="https://www.datajoint.com/">
        <img src="../../_static/images/light-logo-datajoint.png" alt="Sponsors" class="only-light img-sponsor"/>
        <img src="../../_static/images/dark-logo-datajoint.png" alt="Sponsors" class="only-dark img-sponsor"/>
    </a>
    <a href="https://wellcome.org/">
        <img src="../../_static/images/light-logo-wellcome.png" alt="Sponsors" class="only-light img-sponsor"/>
        <img src="../../_static/images/dark-logo-wellcome.png" alt="Sponsors" class="only-dark img-sponsor"/>
    </a>
    <a href="https://www.sainsburywellcome.org/web/">
        <img src="../../_static/images/light-logo-swc.png" alt="Sponsors" class="only-light img-sponsor"/>
        <img src="../../_static/images/dark-logo-swc.png" alt="Sponsors" class="only-dark img-sponsor"/>
    </a>
    <a href="https://www.ucl.ac.uk/">
        <img src="../../_static/images/light-logo-ucl.png" alt="Sponsors" class="only-light img-sponsor"/>
        <img src="../../_static/images/dark-logo-ucl.png" alt="Sponsors" class="only-dark img-sponsor"/>
    </a>
    <a href="https://www.ucl.ac.uk/gatsby/gatsby-computational-neuroscience-unit">
        <img src="../../_static/images/light-logo-gatsby.png" alt="Sponsors" class="only-light img-sponsor"/>
        <img src="../../_static/images/dark-logo-gatsby.png" alt="Sponsors" class="only-dark img-sponsor"/>
    </a>
    <a href="https://www.ukri.org/councils/bbsrc/">
        <img src="../../_static/images/light-logo-bbsrc.png" alt="Sponsors" class="only-light img-sponsor"/>
        <img src="../../_static/images/dark-logo-bbsrc.png" alt="Sponsors" class="only-dark img-sponsor"/>
    </a>
    <a href="https://www.simonsfoundation.org/">
        <img src="../../_static/images/light-logo-simons.png" alt="Sponsors" class="only-light img-sponsor"/>
        <img src="../../_static/images/dark-logo-simons.png" alt="Sponsors" class="only-dark img-sponsor"/>
    </a>
</div></div>
      
    </div>
  
</div>

  </footer>
  </body>
</html>