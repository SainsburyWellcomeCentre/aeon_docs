
<!DOCTYPE html>


<html lang="en" data-content_root="../../../" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Subject Tracking &#8212; Aeon  documentation</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "";
  </script>
  <!--
    this give us a css class that will be invisible only if js is disabled
  -->
  <noscript>
    <style>
      .pst-js-only { display: none !important; }

    </style>
  </noscript>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../../../_static/styles/theme.css?digest=8878045cc6db502f8baf" rel="stylesheet" />
<link href="../../../_static/styles/pydata-sphinx-theme.css?digest=8878045cc6db502f8baf" rel="stylesheet" />

    <link rel="stylesheet" type="text/css" href="../../../_static/pygments.css?v=8f2a1f02" />
    <link rel="stylesheet" type="text/css" href="../../../_static/mystnb.8ecb98da25f57f5357bf6f572d296f466b2cfe2517ffebfabe82451661e28f02.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/copybutton.css?v=76b2166b" />
    <link rel="stylesheet" type="text/css" href="../../../_static/sphinx-design.min.css?v=95c83b7e" />
    <link rel="stylesheet" type="text/css" href="../../../_static/css/custom.css?v=9651da53" />
  
  <!-- So that users can add custom icons -->
  <script src="../../../_static/scripts/fontawesome.js?digest=8878045cc6db502f8baf"></script>
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../../../_static/scripts/bootstrap.js?digest=8878045cc6db502f8baf" />
<link rel="preload" as="script" href="../../../_static/scripts/pydata-sphinx-theme.js?digest=8878045cc6db502f8baf" />

    <script src="../../../_static/documentation_options.js?v=5929fcd5"></script>
    <script src="../../../_static/doctools.js?v=9bcbadda"></script>
    <script src="../../../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../../../_static/clipboard.min.js?v=a7894cd8"></script>
    <script src="../../../_static/copybutton.js?v=f281be69"></script>
    <script src="../../../_static/design-tabs.js?v=f930bc37"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'user/aeon_modules/acquisition/subject_tracking';</script>
    <script src="../../../_static/js/workflow.js?v=1800024c"></script>
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" />
    <link rel="next" title="Sample Datasets" href="../../sample_datasets.html" />
    <link rel="prev" title="RFID Reader" href="rfid_reader.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  <meta name="docsearch:version" content="" />
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <div id="pst-skip-link" class="skip-link d-print-none"><a href="#main-content">Skip to main content</a></div>
  
  <div id="pst-scroll-pixel-helper"></div>
  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>Back to top</button>

  
  <dialog id="pst-search-dialog">
    
<form class="bd-search d-flex align-items-center"
      action="../../../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         placeholder="Search the docs ..."
         aria-label="Search the docs ..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form>
  </dialog>

  <div class="pst-async-banner-revealer d-none">
  <aside id="bd-header-version-warning" class="d-none d-print-none" aria-label="Version warning"></aside>
</div>
<aside class="bd-header-announcement" aria-label="Announcement">
  <div class="bd-header-announcement__content">This website is currently under active development. Please report any issues on <a href='https://github.com/SainsburyWellcomeCentre/aeon_docs/issues'>GitHub</a>.</div>
</aside>

  
    <header class="bd-header navbar navbar-expand-lg bd-navbar d-print-none">
<div class="bd-header__inner bd-page-width">
  <button class="pst-navbar-icon sidebar-toggle primary-toggle" aria-label="Site navigation">
    <span class="fa-solid fa-bars"></span>
  </button>
  
  
  <div class="col-lg-3 navbar-header-items__start">
    
      <div class="navbar-item">

  
    
  

<a class="navbar-brand logo" href="../../../index.html">
  
  
  
  
  
  
    <p class="title logo__title">Aeon </p>
  
</a></div>
    
  </div>
  
  <div class="col-lg-9 navbar-header-items">
    
    <div class="me-auto navbar-header-items__center">
      
        <div class="navbar-item">
<nav>
  <ul class="bd-navbar-elements navbar-nav">
    
<li class="nav-item ">
  <a class="nav-link nav-internal" href="../../../getting_started/index.html">
    Getting Started
  </a>
</li>


<li class="nav-item current active">
  <a class="nav-link nav-internal" href="../../index.html">
    User Guide
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../../../contributor/index.html">
    Contributor’s Guide
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../../../reference/index.html">
    Reference
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../../../about/index.html">
    About
  </a>
</li>

  </ul>
</nav></div>
      
    </div>
    
    
    <div class="navbar-header-items__end">
      
        <div class="navbar-item navbar-persistent--container">
          

<button class="btn search-button-field search-button__button pst-js-only" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
 <i class="fa-solid fa-magnifying-glass"></i>
 <span class="search-button__default-text">Search</span>
 <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
</button>
        </div>
      
      
        <div class="navbar-item">

<button class="btn btn-sm nav-link pst-navbar-icon theme-switch-button pst-js-only" aria-label="Color mode" data-bs-title="Color mode"  data-bs-placement="bottom" data-bs-toggle="tooltip">
  <i class="theme-switch fa-solid fa-sun                fa-lg" data-mode="light" title="Light"></i>
  <i class="theme-switch fa-solid fa-moon               fa-lg" data-mode="dark"  title="Dark"></i>
  <i class="theme-switch fa-solid fa-circle-half-stroke fa-lg" data-mode="auto"  title="System Settings"></i>
</button></div>
      
        <div class="navbar-item"><ul class="navbar-icon-links"
    aria-label="Icon Links">
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://github.com/SainsburyWellcomeCentre/aeon_docs" title="GitHub" class="nav-link pst-navbar-icon" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><i class="fa-brands fa-github fa-lg" aria-hidden="true"></i>
            <span class="sr-only">GitHub</span></a>
        </li>
</ul></div>
      
    </div>
    
  </div>
  
  
    <div class="navbar-persistent--mobile">

<button class="btn search-button-field search-button__button pst-js-only" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
 <i class="fa-solid fa-magnifying-glass"></i>
 <span class="search-button__default-text">Search</span>
 <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
</button>
    </div>
  

  
    <button class="pst-navbar-icon sidebar-toggle secondary-toggle" aria-label="On this page">
      <span class="fa-solid fa-outdent"></span>
    </button>
  
</div>

    </header>
  

  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      
      
      <dialog id="pst-primary-sidebar-modal"></dialog>
      <div id="pst-primary-sidebar" class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
      <div class="sidebar-header-items__center">
        
          
          
            <div class="navbar-item">
<nav>
  <ul class="bd-navbar-elements navbar-nav">
    
<li class="nav-item ">
  <a class="nav-link nav-internal" href="../../../getting_started/index.html">
    Getting Started
  </a>
</li>


<li class="nav-item current active">
  <a class="nav-link nav-internal" href="../../index.html">
    User Guide
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../../../contributor/index.html">
    Contributor’s Guide
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../../../reference/index.html">
    Reference
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../../../about/index.html">
    About
  </a>
</li>

  </ul>
</nav></div>
          
        
      </div>
    
    
    
      <div class="sidebar-header-items__end">
        
          <div class="navbar-item">

<button class="btn btn-sm nav-link pst-navbar-icon theme-switch-button pst-js-only" aria-label="Color mode" data-bs-title="Color mode"  data-bs-placement="bottom" data-bs-toggle="tooltip">
  <i class="theme-switch fa-solid fa-sun                fa-lg" data-mode="light" title="Light"></i>
  <i class="theme-switch fa-solid fa-moon               fa-lg" data-mode="dark"  title="Dark"></i>
  <i class="theme-switch fa-solid fa-circle-half-stroke fa-lg" data-mode="auto"  title="System Settings"></i>
</button></div>
        
          <div class="navbar-item"><ul class="navbar-icon-links"
    aria-label="Icon Links">
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://github.com/SainsburyWellcomeCentre/aeon_docs" title="GitHub" class="nav-link pst-navbar-icon" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><i class="fa-brands fa-github fa-lg" aria-hidden="true"></i>
            <span class="sr-only">GitHub</span></a>
        </li>
</ul></div>
        
      </div>
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">
<nav class="bd-docs-nav bd-links"
     aria-label="Section Navigation">
  <p class="bd-links__title" role="heading" aria-level="1">Section Navigation</p>
  <div class="bd-toc-item navbar-nav"><ul class="current nav bd-sidenav">
<li class="toctree-l1 current active has-children"><a class="reference internal" href="../../aeon_modules.html">Aeon Modules</a><details open="open"><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul class="current">
<li class="toctree-l2 has-children"><a class="reference internal" href="../hardware.html">Hardware Assembly</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l3"><a class="reference internal" href="../hardware/commutation_translation.html">Commutation-Translation System</a></li>
<li class="toctree-l3"><a class="reference internal" href="../hardware/foraging_patch.html">Foraging Patch</a></li>
<li class="toctree-l3"><a class="reference internal" href="../hardware/habitat.html">Habitat</a></li>
<li class="toctree-l3"><a class="reference internal" href="../hardware/nest.html">Nest</a></li>
<li class="toctree-l3"><a class="reference internal" href="../connections/camera.html">Camera Wiring Schematic</a></li>
<li class="toctree-l3"><a class="reference internal" href="../connections/camera_controller.html">Camera Controller Wiring Schematic</a></li>
<li class="toctree-l3"><a class="reference internal" href="../connections/commutation_translation_system.html">Commutation-Translation System Wiring Schematic</a></li>
<li class="toctree-l3"><a class="reference internal" href="../connections/foraging_patch.html">Foraging Patch Wiring Schematic</a></li>
<li class="toctree-l3"><a class="reference internal" href="../connections/foraging_patch_output_expander.html">Foraging Patch Output Expander Wiring Schematic</a></li>
<li class="toctree-l3"><a class="reference internal" href="../connections/microphone.html">Microphone Wiring Schematic</a></li>
<li class="toctree-l3"><a class="reference internal" href="../connections/rfid_reader.html">RFID Reader Wiring Schematic</a></li>
<li class="toctree-l3"><a class="reference internal" href="../connections/sound_card.html">Sound Card Wiring Schematic</a></li>
<li class="toctree-l3"><a class="reference internal" href="../connections/timestamp_generator.html">Timestamp Generator Wiring Schematic</a></li>
<li class="toctree-l3"><a class="reference internal" href="../connections/weighing_scale.html">Weighing Scale Wiring Schematic</a></li>
</ul>
</details></li>
<li class="toctree-l2 current active has-children"><a class="reference internal" href="../acquisition.html">Acquisition Modules</a><details open="open"><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="activity_tracking.html">Activity Tracking</a></li>
<li class="toctree-l3"><a class="reference internal" href="alerts.html">Alerts</a></li>
<li class="toctree-l3"><a class="reference internal" href="camera.html">Spinnaker Camera</a></li>
<li class="toctree-l3"><a class="reference internal" href="camera_controller.html">Multi-Camera Controller</a></li>
<li class="toctree-l3 has-children"><a class="reference internal" href="control_panel.html">Control Panel</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l4"><a class="reference internal" href="control_panel/annotation_source_GUI.html">AnnotationSource</a></li>
<li class="toctree-l4"><a class="reference internal" href="control_panel/button_source_GUI.html">ButtonSource</a></li>
<li class="toctree-l4"><a class="reference internal" href="control_panel/environment_state_GUI.html">EnvironmentState</a></li>
<li class="toctree-l4"><a class="reference internal" href="control_panel/experiment_properties_GUI.html">ExperimentProperties</a></li>
<li class="toctree-l4"><a class="reference internal" href="control_panel/label_control_GUI.html">LabelControl</a></li>
<li class="toctree-l4"><a class="reference internal" href="control_panel/subject_database.html">SubjectDatabase <!--TODO: Placeholder content--></a></li>
</ul>
</details></li>
<li class="toctree-l3 has-children"><a class="reference internal" href="foraging_patch.html">Foraging Patch</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l4"><a class="reference internal" href="foraging_patch/patch_dispenser.html">PatchDispenser</a></li>
<li class="toctree-l4"><a class="reference internal" href="foraging_patch/pellet_monitor.html">PelletMonitor</a></li>
<li class="toctree-l4"><a class="reference internal" href="foraging_patch/time_since_last_event.html">TimeSinceLastEvent</a></li>
<li class="toctree-l4"><a class="reference internal" href="foraging_patch/time_spent_on_wheel.html">TimeSpentOnWheel</a></li>
</ul>
</details></li>
<li class="toctree-l3"><a class="reference internal" href="logging.html">Logging</a></li>
<li class="toctree-l3"><a class="reference internal" href="monitors.html">Device Synchronisation Monitors</a></li>
<li class="toctree-l3"><a class="reference internal" href="nest.html">Nest</a></li>
<li class="toctree-l3"><a class="reference internal" href="rfid_reader.html">RFID Reader</a></li>
<li class="toctree-l3 current active"><a class="current reference internal" href="#">Subject Tracking</a></li>
</ul>
</details></li>
</ul>
</details></li>
<li class="toctree-l1"><a class="reference internal" href="../../sample_datasets.html">Sample Datasets</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../tutorials.html">Tutorials</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="../../tutorials/aeon_dj_pipeline.html">DataJoint pipeline for Aeon</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../tutorials/general_experimental_workflow.html">General experimental workflow infrastructure</a></li>
</ul>
</details></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../how_to.html">How-to Guides</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="../../how_to/dj_data_ingestion_and_processing.html">DataJoint pipeline: Data ingestion and processing</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../how_to/dj_data_loading.html">Helper functions</a></li>

<li class="toctree-l2"><a class="reference internal" href="../../how_to/dj_pipeline_local_deployment.html">DataJoint pipeline: On-premises deployment</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../how_to/dj_querying_data.html">DataJoint pipeline: Querying data</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../how_to/hmm_example.html">Hidden Markov Model analysis of mouse behavioural syntax</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../how_to/io_api_example_copy.html">Data access using the low-level API</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../how_to/social_analysis1_static.html">Platform paper social experiment analysis: Part 1</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../how_to/social_analysis2.html">Platform paper social experiment analysis: Part 2</a></li>
</ul>
</details></li>
</ul>
</div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
      <div class="sidebar-primary-item">
<div id="ethical-ad-placement"
      class="flat"
      data-ea-publisher="readthedocs"
      data-ea-type="readthedocs-sidebar"
      data-ea-manual="true">
</div></div>
  </div>


      </div>
      
      <main id="main-content" class="bd-main" role="main">
        
        
          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article d-print-none">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item">

<nav aria-label="Breadcrumb" class="d-print-none">
  <ul class="bd-breadcrumbs">
    
    <li class="breadcrumb-item breadcrumb-home">
      <a href="../../../index.html" class="nav-link" aria-label="Home">
        <i class="fa-solid fa-home"></i>
      </a>
    </li>
    
    <li class="breadcrumb-item"><a href="../../index.html" class="nav-link">User Guide</a></li>
    
    
    <li class="breadcrumb-item"><a href="../../aeon_modules.html" class="nav-link">Aeon Modules</a></li>
    
    
    <li class="breadcrumb-item"><a href="../acquisition.html" class="nav-link">Acquisition Modules</a></li>
    
    <li class="breadcrumb-item active" aria-current="page"><span class="ellipsis">Subject Tracking</span></li>
  </ul>
</nav>
</div>
      
    </div>
  
  
</div>
</div>
              
              
              
                
<div id="searchbox"></div>
                <article class="bd-article">
                  
  <section class="tex2jax_ignore mathjax_ignore" id="subject-tracking">
<span id="target-module-subject-tracking"></span><h1>Subject Tracking<a class="headerlink" href="#subject-tracking" title="Link to this heading">#</a></h1>
<p>The subject tracking module processes <a class="reference internal" href="camera.html#target-node-spinnakervideosource"><span class="std std-ref">camera</span></a> frame events to facilitate comprehensive tracking and analysis of animal positions and movements in the <a class="reference internal" href="../hardware/habitat.html#target-habitat"><span class="std std-ref">habitat</span></a> or within specific regions or areas in the habitat that are of behavioural significance (e.g. <a class="reference internal" href="nest.html#target-module-nest"><span class="std std-ref">nest</span></a>, <a class="reference internal" href="foraging_patch.html#target-module-foraging-patch"><span class="std std-ref">foraging patch</span></a>).
It includes nodes such as <code class="docutils literal notranslate"><span class="pre">PositionTracking</span></code> for detecting and tracking blobs (of objects, e.g. animals);
<code class="docutils literal notranslate"><span class="pre">PoseTracking</span></code>, which leverages <a class="reference external" href="https://sleap.ai/">SLEAP’s</a> multi-animal tracking capabilities, to simultaneously track and identify different animals; and
<code class="docutils literal notranslate"><span class="pre">RegionTracking</span></code> for determining if a tracked object is within a specific region.
These enable real-time tracking, event triggering, and data logging, making it easier to monitor and analyse animal behaviour in various experimental setups.</p>
<section id="nodes">
<h2>Nodes<a class="headerlink" href="#nodes" title="Link to this heading">#</a></h2>
<section id="positiontracking">
<span id="target-node-positiontracking"></span><h3>PositionTracking<a class="headerlink" href="#positiontracking" title="Link to this heading">#</a></h3>
<p>The <code class="docutils literal notranslate"><span class="pre">PositionTracking</span> <span class="pre">(Aeon.Vision)</span></code> node accepts frame events generated by a <a class="reference internal" href="camera.html#target-node-spinnakervideosource"><span class="std std-ref">camera</span></a> and detects dark objects against a light background using a standard blob tracking pipeline.</p>
<p>Briefly, the incoming image is thresholded to a binary image, then masked using a binary mask image generated by the user.
This mask should include any area in which the animal could be at a given time, and must have the same width and height as the camera event images<!-- does "camera event images" refer to the "VideoDataFrame"s? --> for which it is intended.
This ensures any movement or activity outside of the region of interest (therefore have pixel values of zero in the user-generated mask) are eliminated and not tracked.
Below is an example of an input image of the habitat from a top-view camera and its corresponding mask.</p>
<div class="things-in-a-row docutils">
<figure class="align-default" id="id20">
<a class="reference internal image-reference" href="../../../_images/module-cv-tracking-cameratop.png"><img alt="camera top" src="../../../_images/module-cv-tracking-cameratop.png" style="height: 200px;" />
</a>
<figcaption>
<p><span class="caption-text">Habitat image from “CameraTop”.</span><a class="headerlink" href="#id20" title="Link to this image">#</a></p>
</figcaption>
</figure>
<figure class="align-default" id="id21">
<a class="reference internal image-reference" href="../../../_images/module-cv-tracking-arena-mask.png"><img alt="habitat mask" src="../../../_images/module-cv-tracking-arena-mask.png" style="height: 200px;" />
</a>
<figcaption>
<p><span class="caption-text">Habitat mask.</span><a class="headerlink" href="#id21" title="Link to this image">#</a></p>
</figcaption>
</figure>
</div>
<p>Contours are found and located using the <code class="docutils literal notranslate"><span class="pre">FindContours</span></code> and <code class="docutils literal notranslate"><span class="pre">BinaryRegionAnalysis</span></code> functions from <code class="docutils literal notranslate"><span class="pre">OpenCV.NET</span></code> (available in <code class="docutils literal notranslate"><span class="pre">Bonsai.Vision</span></code> package) and a custom <code class="docutils literal notranslate"><span class="pre">TakeLargestRegions</span> <span class="pre">(Aeon.Vision)</span></code> to take the <em>n</em> largest regions as defined by the property <a class="reference internal" href="#properties"><code class="docutils literal notranslate"><span class="pre">TrackingCount</span></code></a>.</p>
<section id="inputs">
<h4>Inputs<a class="headerlink" href="#inputs" title="Link to this heading">#</a></h4>
<p>Sequence of <code class="docutils literal notranslate"><span class="pre">Harp.Timestamped&lt;Aeon.Video.VideoDataFrame&gt;</span></code>s from a specific camera published by a <a class="reference internal" href="camera.html#target-node-spinnakervideosource"><span class="std std-ref"><code class="docutils literal notranslate"><span class="pre">SpinnakerVideoSource</span> <span class="pre">(Aeon.Video)</span></code></span></a> node.</p>
</section>
<section id="outputs">
<h4>Outputs<a class="headerlink" href="#outputs" title="Link to this heading">#</a></h4>
<p>Sequence of <code class="docutils literal notranslate"><span class="pre">Harp.Timestamped&lt;Bonsai.Vision.ConnectedComponentCollection&gt;</span></code> describing the features of a detected subject. Also published to a <code class="docutils literal notranslate"><span class="pre">Subject</span></code>.</p>
</section>
<section id="properties">
<h4>Properties<a class="headerlink" href="#properties" title="Link to this heading">#</a></h4>
<section id="tracking-parameters">
<h5>Tracking parameters<a class="headerlink" href="#tracking-parameters" title="Link to this heading">#</a></h5>
<div class="pst-scrollable-table-container"><table class="table">
<thead>
<tr class="row-odd"><th class="head"><p>Property name</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><strong>Mask</strong></p></td>
<td><p>The full or relative path to the mask image, in <code class="docutils literal notranslate"><span class="pre">.png</span></code> format</p></td>
</tr>
<tr class="row-odd"><td><p><strong>Threshold</strong></p></td>
<td><p>The threshold pixel value to apply in order to detect a dark blob on the light background</p></td>
</tr>
<tr class="row-even"><td><p><strong>TrackingCount</strong></p></td>
<td><p>The expected number of animals to track simultaneously</p></td>
</tr>
</tbody>
</table>
</div>
</section>
<section id="subjects">
<h5>Subjects<a class="headerlink" href="#subjects" title="Link to this heading">#</a></h5>
<p>Events from this node are published to shared <code class="docutils literal notranslate"><span class="pre">Subject</span></code>s.
Here you set the names used for these <code class="docutils literal notranslate"><span class="pre">Subject</span></code>s to identify events for this node.
Each of these <code class="docutils literal notranslate"><span class="pre">Subject</span></code>s becomes accessible in the Bonsai editor’s toolbox anywhere in the workflow using the name set here.</p>
<section id="device-event-subjects">
<h6>Device event subjects<a class="headerlink" href="#device-event-subjects" title="Link to this heading">#</a></h6>
<div class="pst-scrollable-table-container"><table class="table">
<thead>
<tr class="row-odd"><th class="head"><p>Subject name</p></th>
<th class="head"><p>Type</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><strong>TrackingEvents</strong></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">Harp.Timestamped&lt;Bonsai.Vision.ConnectedComponentCollection&gt;</span></code></p></td>
<td><p>The <code class="docutils literal notranslate"><span class="pre">Subject</span></code> to which tracking data will be published. This stream is also output directly by the node</p></td>
</tr>
</tbody>
</table>
</div>
</section>
<section id="device-input-subjects">
<h6>Device input subjects<a class="headerlink" href="#device-input-subjects" title="Link to this heading">#</a></h6>
<div class="pst-scrollable-table-container"><table class="table">
<thead>
<tr class="row-odd"><th class="head"><p>Subject name</p></th>
<th class="head"><p>Type</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><strong>FrameEvents</strong></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">Harp.Timestamped&lt;Aeon.Acquisition.VideoDataFrame&gt;</span></code></p></td>
<td><p>The <code class="docutils literal notranslate"><span class="pre">Subject</span></code> to subscribe to that carries frame events from a chosen camera</p></td>
</tr>
</tbody>
</table>
</div>
</section>
</section>
</section>
<section id="usage">
<h4>Usage<a class="headerlink" href="#usage" title="Link to this heading">#</a></h4>
<p>Create a <code class="docutils literal notranslate"><span class="pre">GroupWorkflow</span></code> and give it an appropriate name, e.g. “TrackingTop”.
Inside, place a <code class="docutils literal notranslate"><span class="pre">PositionTracking</span> <span class="pre">(Aeon.Vision)</span></code> node, externalise all properties, and connect it to the <code class="docutils literal notranslate"><span class="pre">WorkflowOutput</span></code>.</p>
<!-- Is there a use case for the basic workflow without a camera supplying the videodataframes? If none, perhaps we can remove this example and just provide the full example with camera connected. -->
<div class="workflow docutils">
<p><img alt="Aeon.Vision.PositionTracking" src="../../../_images/positionTrackingBase.svg" /></p>
</div>
<p>Next, add a <code class="docutils literal notranslate"><span class="pre">SubscribeSubject</span></code> node, connect it to the <code class="docutils literal notranslate"><span class="pre">PositionTracking</span></code> node as an input, and externalise the <code class="docutils literal notranslate"><span class="pre">Name</span></code> property.
This name will be set to the <code class="docutils literal notranslate"><span class="pre">Subject</span></code> that carries the <code class="docutils literal notranslate"><span class="pre">FrameEvents</span></code> from the <a class="reference internal" href="camera.html#target-node-spinnakervideosource"><span class="std std-ref">camera</span></a> on which tracking is to be performed (e.g. “CameraTop”).</p>
<div class="workflow docutils">
<p><img alt="Aeon.Vision.PositionTracking" src="../../../_images/positionTracking.svg" /></p>
</div>
</section>
</section>
<section id="posetracking">
<span id="target-node-posetracking"></span><h3>PoseTracking<a class="headerlink" href="#posetracking" title="Link to this heading">#</a></h3>
<p>Pose tracking utilises <a class="reference external" href="https://sleap.ai/">SLEAP</a>, which is fully integrated with Bonsai through the <a class="reference external" href="https://bonsai-rx.org/sleap/index.html#">Bonsai.Sleap</a> package, to simultaneously track and identify different animals within the habitat.</p>
<p>In Aeon experimental workflows, two linked <code class="docutils literal notranslate"><span class="pre">IncludeWorkflow</span></code>s are provided to give this functionality.
The <code class="docutils literal notranslate"><span class="pre">PoseTracking</span> <span class="pre">(Extensions)</span></code> node contains the complete data flow and processing workflow for identity and tracking of subjects from video frames captured by the cameras, whereas the <code class="docutils literal notranslate"><span class="pre">PoseTracking</span> <span class="pre">(Aeon.Vision.Sleap)</span></code> node is used within this workflow to perform the model inference step of processing.</p>
<!-- To be completed
#### Inputs
#### Outputs
A sequence of `<type>` with the following attributes. 
| Attribute name     | Type                           | Description                      |
|--------------------|--------------------------------|----------------------------------|
| **Attr1**          | `Type`                         | Description of Attr1             |
| **Attr2**          | `Type`                         | Description of Attr2             |
-->
<section id="id1">
<h4>Properties<a class="headerlink" href="#id1" title="Link to this heading">#</a></h4>
<section id="general">
<h5>General<a class="headerlink" href="#general" title="Link to this heading">#</a></h5>
<div class="pst-scrollable-table-container"><table class="table">
<thead>
<tr class="row-odd"><th class="head"><p>Property name</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><strong>IdentityMinConfidence</strong></p></td>
<td><p>Set the minimum confidence score applied to computation of an object (animal) instance’s centroid</p></td>
</tr>
<tr class="row-odd"><td><p><strong>FrameStep</strong></p></td>
<td><p>Frame by frame inference and pose estimation is computationally expensive. It may be helpful to downsample the incoming stream to run inference in real time. Here you can set the number of frames to skip between incoming frames</p></td>
</tr>
<tr class="row-even"><td><p><strong>IdentityMinConfidence</strong></p></td>
<td><p>Set the minimum confidence required to label an instance’s identity</p></td>
</tr>
<tr class="row-odd"><td><p><strong>ModelPath</strong></p></td>
<td><p>Set the partial path to the saved <code class="docutils literal notranslate"><span class="pre">frozen_graph.pb</span></code></p></td>
</tr>
<tr class="row-even"><td><p><strong>PartMinConfidence</strong></p></td>
<td><p>Set the minimum confidence required to assign a label to an instance’s keypoint</p></td>
</tr>
</tbody>
</table>
</div>
</section>
<section id="id2">
<h5>Subjects<a class="headerlink" href="#id2" title="Link to this heading">#</a></h5>
<p>Both generated and input events of this node are collected and passed to published <code class="docutils literal notranslate"><span class="pre">Subject</span></code>s.
Here you set the names used for these <code class="docutils literal notranslate"><span class="pre">Subject</span></code>s to identify events for this node.
Each of these <code class="docutils literal notranslate"><span class="pre">Subject</span></code>s becomes accessible in the Bonsai editor’s toolbox anywhere in the workflow using the name set here.</p>
<section id="id3">
<h6>Device event subjects<a class="headerlink" href="#id3" title="Link to this heading">#</a></h6>
<div class="pst-scrollable-table-container"><table class="table">
<thead>
<tr class="row-odd"><th class="head"><p>Subject name</p></th>
<th class="head"><p>Type</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><strong>TrackingEvents</strong></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">Harp.Timestamped&lt;Bonsai.Vision.ConnectedComponentCollection&gt;</span></code></p></td>
<td><p>The <code class="docutils literal notranslate"><span class="pre">Subject</span></code> to which tracking data will be published. This stream is also output directly by the node</p></td>
</tr>
</tbody>
</table>
</div>
</section>
<section id="id4">
<h6>Device input subjects<a class="headerlink" href="#id4" title="Link to this heading">#</a></h6>
<div class="pst-scrollable-table-container"><table class="table">
<thead>
<tr class="row-odd"><th class="head"><p>Subject name</p></th>
<th class="head"><p>Type</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><strong>FrameEvents</strong></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">Harp.Timestamped&lt;Aeon.Acquisition.VideoDataFrame&gt;</span></code></p></td>
<td><p>The <code class="docutils literal notranslate"><span class="pre">Subject</span></code> to subscribe to that carries frame events from a chosen camera</p></td>
</tr>
</tbody>
</table>
</div>
</section>
</section>
</section>
<section id="id5">
<h4>Usage<a class="headerlink" href="#id5" title="Link to this heading">#</a></h4>
<p>The trained model must first be exported to <a class="reference external" href="https://protobuf.dev/">Protocol buffer (.pb) format</a> using the <a class="reference external" href="https://sleap.ai/guides/cli.html#sleap-export"><code class="docutils literal notranslate"><span class="pre">sleap-export</span></code></a> command line interface.
Next, create a <code class="docutils literal notranslate"><span class="pre">GroupWorkflow</span></code> and give it an appropriate name, e.g. “PoseTracking”.
Inside, place a <code class="docutils literal notranslate"><span class="pre">PoseTracking</span> <span class="pre">(Aeon.Vision.Sleap)</span></code> node, externalise all properties, and connect it to the <code class="docutils literal notranslate"><span class="pre">WorkflowOutput</span></code>.</p>
<div class="workflow docutils">
<p><img alt="poseTracking" src="../../../_images/poseTracking.svg" /></p>
</div>
</section>
</section>
<section id="regiontracking">
<h3>RegionTracking<a class="headerlink" href="#regiontracking" title="Link to this heading">#</a></h3>
<!-- I assume this node can be used with either PositionTracking or PoseTracking. If incorrect, we should remove the PoseTracking bit. -->
<p>The <code class="docutils literal notranslate"><span class="pre">RegionTracking</span> <span class="pre">(Aeon.Vision)</span></code> node computes and returns a <code class="docutils literal notranslate"><span class="pre">boolean</span></code> describing whether the tracked position (from a <a class="reference internal" href="#target-node-positiontracking"><span class="std std-ref"><code class="docutils literal notranslate"><span class="pre">PositionTracking</span> <span class="pre">(Aeon.Vision)</span></code></span></a> or <a class="reference internal" href="#target-node-posetracking"><span class="std std-ref"><code class="docutils literal notranslate"><span class="pre">PoseTracking</span> <span class="pre">(Aeon.Vision.Sleap)</span></code></span></a> node) of an animal falls within a defined <a class="reference internal" href="#target-node-regiontracking-properties"><span class="std std-ref">region</span></a> of the camera image.</p>
<!-- To be completed
#### Inputs
Tracking events in the format `Harp.Timestamped<Bonsai.Vision.ConnectedComponentCollection>` generated by a [`PositionTracking (Aeon.Vision)`](target-node-positiontracking) node?

#### Outputs
boolean? 
-->
<section id="target-node-regiontracking-properties">
<span id="id6"></span><h4>Properties<a class="headerlink" href="#target-node-regiontracking-properties" title="Link to this heading">#</a></h4>
<section id="id7">
<h5>General<a class="headerlink" href="#id7" title="Link to this heading">#</a></h5>
<div class="pst-scrollable-table-container"><table class="table">
<thead>
<tr class="row-odd"><th class="head"><p>Property name</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><strong>Region</strong></p></td>
<td><p>An array of four <code class="docutils literal notranslate"><span class="pre">OpenCV.NET.Points</span></code>. These define the corners (anticlockwise from top left) of the region of interest</p></td>
</tr>
</tbody>
</table>
</div>
</section>
<section id="id8">
<h5>Subjects<a class="headerlink" href="#id8" title="Link to this heading">#</a></h5>
<p>Both generated and input events of this node are published to shared <code class="docutils literal notranslate"><span class="pre">Subject</span></code>s.
Here you set the names used for these <code class="docutils literal notranslate"><span class="pre">Subject</span></code>s to identify events for this node.
Each of these <code class="docutils literal notranslate"><span class="pre">Subject</span></code>s becomes accessible in the Bonsai editor’s toolbox anywhere in the workflow using the name set here.</p>
<section id="id9">
<h6>Device event subjects<a class="headerlink" href="#id9" title="Link to this heading">#</a></h6>
<div class="pst-scrollable-table-container"><table class="table">
<thead>
<tr class="row-odd"><th class="head"><p>Subject name</p></th>
<th class="head"><p>Type</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><strong>RegionEvents</strong></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">Harp.Timestamped&lt;bool&gt;</span></code></p></td>
<td><p>The <code class="docutils literal notranslate"><span class="pre">Subject</span></code> to which region events will be published. This stream is also output directly by the node</p></td>
</tr>
</tbody>
</table>
</div>
</section>
<section id="id10">
<h6>Device input subjects<a class="headerlink" href="#id10" title="Link to this heading">#</a></h6>
<div class="pst-scrollable-table-container"><table class="table">
<thead>
<tr class="row-odd"><th class="head"><p>Subject name</p></th>
<th class="head"><p>Type</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><strong>FrameEvents</strong></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">Harp.Timestamped&lt;Aeon.Acquisition.VideoDataFrame&gt;</span></code></p></td>
<td><p>The <code class="docutils literal notranslate"><span class="pre">Subject</span></code> to subscribe to that carries frame events from a chosen camera</p></td>
</tr>
</tbody>
</table>
</div>
</section>
</section>
</section>
<section id="id11">
<h4>Usage<a class="headerlink" href="#id11" title="Link to this heading">#</a></h4>
<p>Place a <code class="docutils literal notranslate"><span class="pre">RegionTracking</span> <span class="pre">(Aeon.Vision)</span></code> node, externalise the <code class="docutils literal notranslate"><span class="pre">Region</span></code> property, and rename it to indicate the region this node is responsible for monitoring (e.g. “NestRegion”).
Next, add a <code class="docutils literal notranslate"><span class="pre">SubscribeSubject</span></code> node to subscribe to the common “TrackingEvents” <code class="docutils literal notranslate"><span class="pre">Subject</span></code> (e.g. “TrackingTop”) and connect it to the <code class="docutils literal notranslate"><span class="pre">RegionTracking</span> <span class="pre">(Aeon.Vision)</span></code> node.</p>
<div class="workflow docutils">
<p><img alt="RegionTracking" src="../../../_images/regionTracking.svg" /></p>
</div>
</section>
</section>
<section id="distancefrompoint">
<h3>DistanceFromPoint<a class="headerlink" href="#distancefrompoint" title="Link to this heading">#</a></h3>
<!-- I assume this node can be used with either PositionTracking or PoseTracking. If incorrect, we should remove the PoseTracking bit. -->
<p>The <code class="docutils literal notranslate"><span class="pre">DistanceFromPoint</span> <span class="pre">(Aeon.Vision)</span></code> node computes the distance (in pixels) between the tracked position (from a <a class="reference internal" href="#target-node-positiontracking"><span class="std std-ref"><code class="docutils literal notranslate"><span class="pre">PositionTracking</span> <span class="pre">(Aeon.Vision)</span></code></span></a> or <a class="reference internal" href="#target-node-posetracking"><span class="std std-ref"><code class="docutils literal notranslate"><span class="pre">PoseTracking</span> <span class="pre">(Aeon.Vision.Sleap)</span></code></span></a> node) of an animal and a defined <a class="reference internal" href="#target-node-distancefrompoint-properties"><span class="std std-ref">point</span></a> in the camera image.</p>
<!-- To be completed
#### Inputs
Tracking events in the format `Harp.Timestamped<Bonsai.Vision.ConnectedComponentCollection>` generated by a [`PositionTracking (Aeon.Vision)`](target-node-positiontracking) node?

#### Outputs
A `Harp.Timestamped<double>` distance in pixels?

:::{note}
This node does not output to a published `Subject`.
:::
-->
<section id="target-node-distancefrompoint-properties">
<span id="id12"></span><h4>Properties<a class="headerlink" href="#target-node-distancefrompoint-properties" title="Link to this heading">#</a></h4>
<section id="id13">
<h5>General<a class="headerlink" href="#id13" title="Link to this heading">#</a></h5>
<!-- Shouldn't the property be a point "Value"? Check whether the property is indeed "Region". -->
<div class="pst-scrollable-table-container"><table class="table">
<thead>
<tr class="row-odd"><th class="head"><p>Property name</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><strong>Region</strong></p></td>
<td><p>An array of four <code class="docutils literal notranslate"><span class="pre">OpenCV.NET.Points</span></code>. These define the corners (anticlockwise from top left) of the region of interest</p></td>
</tr>
</tbody>
</table>
</div>
</section>
</section>
<section id="id14">
<h4>Usage<a class="headerlink" href="#id14" title="Link to this heading">#</a></h4>
<p>Place a <code class="docutils literal notranslate"><span class="pre">DistanceFromPoint</span> <span class="pre">(Aeon.Vision)</span></code> node, externalise the <code class="docutils literal notranslate"><span class="pre">Value</span></code> property, and rename it to indicate the point of interest for this node (e.g. “ArenaCenter”).
Next, add a <code class="docutils literal notranslate"><span class="pre">SubscribeSubject</span></code> node to subscribe to the common “TrackingEvents” <code class="docutils literal notranslate"><span class="pre">Subject</span></code> (e.g. “TrackingTop”) and connect it to the <code class="docutils literal notranslate"><span class="pre">DistanceFromPoint</span> <span class="pre">(Aeon.Vision)</span></code> node.</p>
<div class="workflow docutils">
<p><img alt="DistanceFromPoint" src="../../../_images/distFromPoint.svg" /></p>
</div>
<p>The output of the <code class="docutils literal notranslate"><span class="pre">DistanceFromPoint</span> <span class="pre">(Aeon.Vision)</span></code> node can then be used with other nodes
like the <a class="reference internal" href="#inrange"><code class="docutils literal notranslate"><span class="pre">InRange</span> <span class="pre">(Aeon.Acquisition)</span></code></a> node to trigger events or commands based on the proximity of an animal to a specific point in the camera image.</p>
</section>
</section>
<section id="inrange">
<span id="target-node-inrange"></span><h3>InRange<a class="headerlink" href="#inrange" title="Link to this heading">#</a></h3>
<!-- I assume this node can be used with either PositionTracking or PoseTracking. If incorrect, we should remove the PoseTracking bit. -->
<p>The <code class="docutils literal notranslate"><span class="pre">InRange</span> <span class="pre">(Aeon.Acquisition)</span></code> node is used to determine whether the tracked position (from a <a class="reference internal" href="#positiontracking"><code class="docutils literal notranslate"><span class="pre">PositionTracking</span> <span class="pre">(Aeon.Vision)</span></code></a> or <a class="reference internal" href="#target-node-posetracking"><span class="std std-ref"><code class="docutils literal notranslate"><span class="pre">PoseTracking</span> <span class="pre">(Aeon.Vision.Sleap)</span></code></span></a> node) of an animal is within a specified <a class="reference internal" href="#target-node-inrange-properties"><span class="std std-ref">range</span></a> in a single dimension.</p>
<!-- To be completed
#### Inputs
#### Outputs
A `boolean` describing whether each value of a sequence falls within a specific range
--> 
<section id="target-node-inrange-properties">
<span id="id15"></span><h4>Properties<a class="headerlink" href="#target-node-inrange-properties" title="Link to this heading">#</a></h4>
<section id="id16">
<h5>General<a class="headerlink" href="#id16" title="Link to this heading">#</a></h5>
<div class="pst-scrollable-table-container"><table class="table">
<thead>
<tr class="row-odd"><th class="head"><p>Property name</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><strong>Lower</strong></p></td>
<td><p>The lower end of the range to check the input value against</p></td>
</tr>
<tr class="row-odd"><td><p><strong>Upper</strong></p></td>
<td><p>The upper end of the range to check the input value against</p></td>
</tr>
</tbody>
</table>
</div>
</section>
<section id="id17">
<h5>Subjects<a class="headerlink" href="#id17" title="Link to this heading">#</a></h5>
<p>Events from this node are published to shared <code class="docutils literal notranslate"><span class="pre">Subject</span></code>s.
Here you set the names used for these <code class="docutils literal notranslate"><span class="pre">Subject</span></code>s to identify events for this node.
Each of these <code class="docutils literal notranslate"><span class="pre">Subject</span></code>s becomes accessible in the Bonsai editor’s toolbox anywhere in the workflow using the name set here.</p>
<section id="id18">
<h6>Device event subjects<a class="headerlink" href="#id18" title="Link to this heading">#</a></h6>
<p><code class="docutils literal notranslate"><span class="pre">HarpMessage</span></code> events emitted to a <code class="docutils literal notranslate"><span class="pre">Subject</span></code></p>
<div class="pst-scrollable-table-container"><table class="table">
<thead>
<tr class="row-odd"><th class="head"><p>Subject name</p></th>
<th class="head"><p>Type</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><strong>RangeEvents</strong></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">Harp.Timestamped&lt;bool&gt;</span></code></p></td>
<td><p>The <code class="docutils literal notranslate"><span class="pre">Subject</span></code> to which the result will be published</p></td>
</tr>
</tbody>
</table>
</div>
</section>
</section>
</section>
<section id="id19">
<h4>Usage<a class="headerlink" href="#id19" title="Link to this heading">#</a></h4>
<p>The example here is based on a circular habitat with a corridor around the outside.
To determine if a given source is within the inner radius of the habitat, first create a <code class="docutils literal notranslate"><span class="pre">GroupWorkflow</span></code> and give it an appropriate name, e.g. “InArena”.<br />
Inside, place an <code class="docutils literal notranslate"><span class="pre">InRange</span> <span class="pre">(Aeon.Acquisition)</span></code> node, externalise all relevant properties (i.e. the upper bound that is the inner radius of the habitat), and connect it to the <code class="docutils literal notranslate"><span class="pre">WorkflowInput</span></code> (e.g. “Source1”) and <code class="docutils literal notranslate"><span class="pre">WorkflowOutput</span></code>.</p>
<div class="workflow docutils">
<p><img alt="InArena" src="../../../_images/inRange.svg" /></p>
</div>
<p>The input can, for instance, be a <a class="reference internal" href="#distancefrompoint"><code class="docutils literal notranslate"><span class="pre">DistanceFromPoint</span> <span class="pre">(Aeon.Vision)</span></code></a> node, which computes the distance of a tracked animal from the centre of the habitat, allowing one to determine if the animal is in the open habitat.
Multiple of these <code class="docutils literal notranslate"><span class="pre">GroupWorkflows</span></code> each containing a separate <code class="docutils literal notranslate"><span class="pre">InRange</span> <span class="pre">(Aeon.Acquisition)</span></code> node can be used together to determine if a tracked animal position falls within different regions of interest.
For instance, to further determine if the animal is in the corridor, add another <code class="docutils literal notranslate"><span class="pre">GroupWorkflow</span></code>, e.g. “InCorridor”, with an <code class="docutils literal notranslate"><span class="pre">InRange</span> <span class="pre">(Aeon.Acquisition)</span></code> node with the lower bound set to the inner radius of the habitat and the upper bound set to the outer radius of the habitat.</p>
<div class="workflow docutils">
<p><img alt="ArenaOrCorridor" src="../../../_images/corridorOrArena.svg" /></p>
</div>
<!-- To be completed
## GUI
Description of any user interface components and visualisers.
-->
</section>
</section>
</section>
<section id="logging">
<h2>Logging<a class="headerlink" href="#logging" title="Link to this heading">#</a></h2>
<!-- The original "Logging" for the PoseTracking node was copied over from PositionTracking. So here I'm assuming the examples for PositionTracking are applicable to PoseTracking. Check if correct. -->
<p>“TrackingEvents” from a <code class="docutils literal notranslate"><span class="pre">PositionTracking</span> <span class="pre">(Aeon.Vision)</span></code> or a <code class="docutils literal notranslate"><span class="pre">PoseTracking</span> <span class="pre">(Aeon.Vision.Sleap)</span></code> node can be logged along with the camera from which the “FrameEvents” originated using a <a class="reference internal" href="logging.html#target-node-logharpstate"><span class="std std-ref"><code class="docutils literal notranslate"><span class="pre">LogHarpState</span> <span class="pre">(Aeon.Acquisition)</span></code></span></a> node.
First, add a <code class="docutils literal notranslate"><span class="pre">SubscribeSubject</span></code> to subscribe to the “TrackingEvents” <code class="docutils literal notranslate"><span class="pre">Subject</span></code> (e.g. “TrackingTop”).
The events can then be formatted as <code class="docutils literal notranslate"><span class="pre">HarpMessages</span></code> and configured to write to register <strong>200</strong> (an unassigned register on all Harp devices) using the custom <code class="docutils literal notranslate"><span class="pre">FormatBinaryRegions</span> <span class="pre">(Aeon.Vision)</span></code> node.
Here is an example for logging a <code class="docutils literal notranslate"><span class="pre">PositionTracking</span></code> node.</p>
<div class="workflow docutils">
<p><img alt="logPositionTracking" src="../../../_images/logPositionTracking.svg" /></p>
</div>
<p>Multiple <code class="docutils literal notranslate"><span class="pre">PositionTracking</span></code> or <code class="docutils literal notranslate"><span class="pre">PoseTracking</span></code> nodes can be used to track objects in different camera streams simultaneously.
To do this, select a different “FrameEvents” <code class="docutils literal notranslate"><span class="pre">Subject</span></code> for each node and save the results to the corresponding camera folders.</p>
<!-- To be coompleted 
## State persistence
Information on state recovery or persistence requirements, if applicable.

## Alerts
Explanation of any alert configurations and links to guides or further configuration steps.
-->
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p>The <a class="reference external" href="https://sleap.ai/">SLEAP</a> and <a class="reference external" href="https://bonsai-rx.org/sleap/index.html#">Bonsai.Sleap</a> documentation for more information on training models to be used with the <code class="docutils literal notranslate"><span class="pre">PoseTracking</span> <span class="pre">(Aeon.Vision.Sleap)</span></code> node.</p>
</div>
</section>
</section>


                </article>
              
              
              
              
              
                <footer class="prev-next-footer d-print-none">
                  
<div class="prev-next-area">
    <a class="left-prev"
       href="rfid_reader.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">previous</p>
        <p class="prev-next-title">RFID Reader</p>
      </div>
    </a>
    <a class="right-next"
       href="../../sample_datasets.html"
       title="next page">
      <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">Sample Datasets</p>
      </div>
      <i class="fa-solid fa-angle-right"></i>
    </a>
</div>
                </footer>
              
            </div>
            
            
              
                <dialog id="pst-secondary-sidebar-modal"></dialog>
                <div id="pst-secondary-sidebar" class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">


  <div class="sidebar-secondary-item">
<div
    id="pst-page-navigation-heading-2"
    class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> On this page
  </div>
  <nav class="bd-toc-nav page-toc" aria-labelledby="pst-page-navigation-heading-2">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#nodes">Nodes</a><ul class="visible nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#positiontracking">PositionTracking</a><ul class="visible nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#inputs">Inputs</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#outputs">Outputs</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#properties">Properties</a><ul class="nav section-nav flex-column">
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#tracking-parameters">Tracking parameters</a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#subjects">Subjects</a><ul class="nav section-nav flex-column">
<li class="toc-h6 nav-item toc-entry"><a class="reference internal nav-link" href="#device-event-subjects">Device event subjects</a></li>
<li class="toc-h6 nav-item toc-entry"><a class="reference internal nav-link" href="#device-input-subjects">Device input subjects</a></li>
</ul>
</li>
</ul>
</li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#usage">Usage</a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#posetracking">PoseTracking</a><ul class="visible nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#id1">Properties</a><ul class="nav section-nav flex-column">
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#general">General</a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#id2">Subjects</a><ul class="nav section-nav flex-column">
<li class="toc-h6 nav-item toc-entry"><a class="reference internal nav-link" href="#id3">Device event subjects</a></li>
<li class="toc-h6 nav-item toc-entry"><a class="reference internal nav-link" href="#id4">Device input subjects</a></li>
</ul>
</li>
</ul>
</li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#id5">Usage</a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#regiontracking">RegionTracking</a><ul class="visible nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#target-node-regiontracking-properties">Properties</a><ul class="nav section-nav flex-column">
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#id7">General</a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#id8">Subjects</a><ul class="nav section-nav flex-column">
<li class="toc-h6 nav-item toc-entry"><a class="reference internal nav-link" href="#id9">Device event subjects</a></li>
<li class="toc-h6 nav-item toc-entry"><a class="reference internal nav-link" href="#id10">Device input subjects</a></li>
</ul>
</li>
</ul>
</li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#id11">Usage</a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#distancefrompoint">DistanceFromPoint</a><ul class="visible nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#target-node-distancefrompoint-properties">Properties</a><ul class="nav section-nav flex-column">
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#id13">General</a></li>
</ul>
</li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#id14">Usage</a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#inrange">InRange</a><ul class="visible nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#target-node-inrange-properties">Properties</a><ul class="nav section-nav flex-column">
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#id16">General</a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#id17">Subjects</a><ul class="nav section-nav flex-column">
<li class="toc-h6 nav-item toc-entry"><a class="reference internal nav-link" href="#id18">Device event subjects</a></li>
</ul>
</li>
</ul>
</li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#id19">Usage</a></li>
</ul>
</li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#logging">Logging</a></li>
</ul>
  </nav></div>

  <div class="sidebar-secondary-item">
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../../../_sources/user/aeon_modules/acquisition/subject_tracking.md.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
          </footer>
        
      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script defer src="../../../_static/scripts/bootstrap.js?digest=8878045cc6db502f8baf"></script>
<script defer src="../../../_static/scripts/pydata-sphinx-theme.js?digest=8878045cc6db502f8baf"></script>

  <footer class="bd-footer">
<div class="bd-footer__inner bd-page-width">
  
    <div class="footer-items__start">
      
        <div class="footer-item"><p class="sphinx-version"></p>
    Created using <a href="https://sphinx-doc.org/">Sphinx</a> 8.2.3.
    <br/>
    </p>
    <p class="theme-version">
    Built with the
    <a href="https://pydata-sphinx-theme.readthedocs.io/en/stable/index.html">PyData Sphinx Theme</a>
    0.16.1.
    </p></div>
      
    </div>
  
  
  
    <div class="footer-items__end">
      
        <div class="footer-item"><div class="things-in-a-row">
    <a href="https://neurogears.org/">
        <img src="../../../_static/images/light-logo-neurogears.png" alt="Sponsors" class="only-light img-sponsor"/>
        <img src="../../../_static/images/dark-logo-neurogears.png" alt="Sponsors" class="only-dark img-sponsor"/>
    </a>
    <a href="https://www.datajoint.com/">
        <img src="../../../_static/images/light-logo-datajoint.png" alt="Sponsors" class="only-light img-sponsor"/>
        <img src="../../../_static/images/dark-logo-datajoint.png" alt="Sponsors" class="only-dark img-sponsor"/>
    </a>
    <a href="https://wellcome.org/">
        <img src="../../../_static/images/light-logo-wellcome.png" alt="Sponsors" class="only-light img-sponsor"/>
        <img src="../../../_static/images/dark-logo-wellcome.png" alt="Sponsors" class="only-dark img-sponsor"/>
    </a>
    <a href="https://www.sainsburywellcome.org/web/">
        <img src="../../../_static/images/light-logo-swc.png" alt="Sponsors" class="only-light img-sponsor"/>
        <img src="../../../_static/images/dark-logo-swc.png" alt="Sponsors" class="only-dark img-sponsor"/>
    </a>
    <a href="https://www.ucl.ac.uk/">
        <img src="../../../_static/images/light-logo-ucl.png" alt="Sponsors" class="only-light img-sponsor"/>
        <img src="../../../_static/images/dark-logo-ucl.png" alt="Sponsors" class="only-dark img-sponsor"/>
    </a>
    <a href="https://www.ucl.ac.uk/gatsby/gatsby-computational-neuroscience-unit">
        <img src="../../../_static/images/light-logo-gatsby.png" alt="Sponsors" class="only-light img-sponsor"/>
        <img src="../../../_static/images/dark-logo-gatsby.png" alt="Sponsors" class="only-dark img-sponsor"/>
    </a>
    <a href="https://www.ukri.org/councils/bbsrc/">
        <img src="../../../_static/images/light-logo-bbsrc.png" alt="Sponsors" class="only-light img-sponsor"/>
        <img src="../../../_static/images/dark-logo-bbsrc.png" alt="Sponsors" class="only-dark img-sponsor"/>
    </a>
    <a href="https://www.simonsfoundation.org/">
        <img src="../../../_static/images/light-logo-simons.png" alt="Sponsors" class="only-light img-sponsor"/>
        <img src="../../../_static/images/dark-logo-simons.png" alt="Sponsors" class="only-dark img-sponsor"/>
    </a>
</div></div>
      
    </div>
  
</div>

  </footer>
  </body>
</html>