
<!DOCTYPE html>


<html lang="en" data-content_root="../../" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Foraging Patch &#8212; Aeon v0.0.11 documentation</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "";
  </script>
  <!--
    this give us a css class that will be invisible only if js is disabled
  -->
  <noscript>
    <style>
      .pst-js-only { display: none !important; }

    </style>
  </noscript>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../../_static/styles/theme.css?digest=8878045cc6db502f8baf" rel="stylesheet" />
<link href="../../_static/styles/pydata-sphinx-theme.css?digest=8878045cc6db502f8baf" rel="stylesheet" />

    <link rel="stylesheet" type="text/css" href="../../_static/pygments.css?v=8f2a1f02" />
    <link rel="stylesheet" type="text/css" href="../../_static/mystnb.8ecb98da25f57f5357bf6f572d296f466b2cfe2517ffebfabe82451661e28f02.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/copybutton.css?v=76b2166b" />
    <link rel="stylesheet" type="text/css" href="../../_static/sphinx-design.min.css?v=95c83b7e" />
    <link rel="stylesheet" type="text/css" href="../../_static/css/custom.css?v=4386463d" />
  
  <!-- So that users can add custom icons -->
  <script src="../../_static/scripts/fontawesome.js?digest=8878045cc6db502f8baf"></script>
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../../_static/scripts/bootstrap.js?digest=8878045cc6db502f8baf" />
<link rel="preload" as="script" href="../../_static/scripts/pydata-sphinx-theme.js?digest=8878045cc6db502f8baf" />

    <script src="../../_static/documentation_options.js?v=a76eef85"></script>
    <script src="../../_static/doctools.js?v=9bcbadda"></script>
    <script src="../../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../../_static/clipboard.min.js?v=a7894cd8"></script>
    <script src="../../_static/copybutton.js?v=f281be69"></script>
    <script src="../../_static/design-tabs.js?v=f930bc37"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'reference/acquisition/foraging_patch';</script>
    <script src="../../_static/js/workflow.js?v=1800024c"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="PatchDispenser" href="foraging_patch/patch_dispenser.html" />
    <link rel="prev" title="SubjectDatabase" href="control_panel/subject_database.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  <meta name="docsearch:version" content="" />
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <div id="pst-skip-link" class="skip-link d-print-none"><a href="#main-content">Skip to main content</a></div>
  
  <div id="pst-scroll-pixel-helper"></div>
  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>Back to top</button>

  
  <dialog id="pst-search-dialog">
    
<form class="bd-search d-flex align-items-center"
      action="../../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         placeholder="Search the docs ..."
         aria-label="Search the docs ..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form>
  </dialog>

  <div class="pst-async-banner-revealer d-none">
  <aside id="bd-header-version-warning" class="d-none d-print-none" aria-label="Version warning"></aside>
</div>
<aside class="bd-header-announcement" aria-label="Announcement">
  <div class="bd-header-announcement__content">This website is currently under active development. Please report any issues on <a href='https://github.com/SainsburyWellcomeCentre/aeon_docs/issues'>GitHub</a>.</div>
</aside>

  
    <header class="bd-header navbar navbar-expand-lg bd-navbar d-print-none">
<div class="bd-header__inner bd-page-width">
  <button class="pst-navbar-icon sidebar-toggle primary-toggle" aria-label="Site navigation">
    <span class="fa-solid fa-bars"></span>
  </button>
  
  
  <div class="col-lg-3 navbar-header-items__start">
    
      <div class="navbar-item">

  
    
  

<a class="navbar-brand logo" href="../../index.html">
  
  
  
  
  
  
    <p class="title logo__title">Aeon v0.0.11</p>
  
</a></div>
    
  </div>
  
  <div class="col-lg-9 navbar-header-items">
    
    <div class="me-auto navbar-header-items__center">
      
        <div class="navbar-item">
<nav>
  <ul class="bd-navbar-elements navbar-nav">
    
<li class="nav-item ">
  <a class="nav-link nav-internal" href="../../getting_started/index.html">
    Getting Started
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../../user/index.html">
    User Guide
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../../contributor/index.html">
    Contributor’s Guide
  </a>
</li>


<li class="nav-item current active">
  <a class="nav-link nav-internal" href="../index.html">
    Reference
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../../about/index.html">
    About
  </a>
</li>

  </ul>
</nav></div>
      
    </div>
    
    
    <div class="navbar-header-items__end">
      
        <div class="navbar-item navbar-persistent--container">
          

<button class="btn search-button-field search-button__button pst-js-only" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
 <i class="fa-solid fa-magnifying-glass"></i>
 <span class="search-button__default-text">Search</span>
 <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
</button>
        </div>
      
      
        <div class="navbar-item">

<button class="btn btn-sm nav-link pst-navbar-icon theme-switch-button pst-js-only" aria-label="Color mode" data-bs-title="Color mode"  data-bs-placement="bottom" data-bs-toggle="tooltip">
  <i class="theme-switch fa-solid fa-sun                fa-lg" data-mode="light" title="Light"></i>
  <i class="theme-switch fa-solid fa-moon               fa-lg" data-mode="dark"  title="Dark"></i>
  <i class="theme-switch fa-solid fa-circle-half-stroke fa-lg" data-mode="auto"  title="System Settings"></i>
</button></div>
      
        <div class="navbar-item"><ul class="navbar-icon-links"
    aria-label="Icon Links">
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://github.com/SainsburyWellcomeCentre/aeon_docs" title="GitHub" class="nav-link pst-navbar-icon" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><i class="fa-brands fa-github fa-lg" aria-hidden="true"></i>
            <span class="sr-only">GitHub</span></a>
        </li>
</ul></div>
      
    </div>
    
  </div>
  
  
    <div class="navbar-persistent--mobile">

<button class="btn search-button-field search-button__button pst-js-only" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
 <i class="fa-solid fa-magnifying-glass"></i>
 <span class="search-button__default-text">Search</span>
 <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
</button>
    </div>
  

  
    <button class="pst-navbar-icon sidebar-toggle secondary-toggle" aria-label="On this page">
      <span class="fa-solid fa-outdent"></span>
    </button>
  
</div>

    </header>
  

  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      
      
      <dialog id="pst-primary-sidebar-modal"></dialog>
      <div id="pst-primary-sidebar" class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
      <div class="sidebar-header-items__center">
        
          
          
            <div class="navbar-item">
<nav>
  <ul class="bd-navbar-elements navbar-nav">
    
<li class="nav-item ">
  <a class="nav-link nav-internal" href="../../getting_started/index.html">
    Getting Started
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../../user/index.html">
    User Guide
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../../contributor/index.html">
    Contributor’s Guide
  </a>
</li>


<li class="nav-item current active">
  <a class="nav-link nav-internal" href="../index.html">
    Reference
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../../about/index.html">
    About
  </a>
</li>

  </ul>
</nav></div>
          
        
      </div>
    
    
    
      <div class="sidebar-header-items__end">
        
          <div class="navbar-item">

<button class="btn btn-sm nav-link pst-navbar-icon theme-switch-button pst-js-only" aria-label="Color mode" data-bs-title="Color mode"  data-bs-placement="bottom" data-bs-toggle="tooltip">
  <i class="theme-switch fa-solid fa-sun                fa-lg" data-mode="light" title="Light"></i>
  <i class="theme-switch fa-solid fa-moon               fa-lg" data-mode="dark"  title="Dark"></i>
  <i class="theme-switch fa-solid fa-circle-half-stroke fa-lg" data-mode="auto"  title="System Settings"></i>
</button></div>
        
          <div class="navbar-item"><ul class="navbar-icon-links"
    aria-label="Icon Links">
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://github.com/SainsburyWellcomeCentre/aeon_docs" title="GitHub" class="nav-link pst-navbar-icon" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><i class="fa-brands fa-github fa-lg" aria-hidden="true"></i>
            <span class="sr-only">GitHub</span></a>
        </li>
</ul></div>
        
      </div>
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">
<nav class="bd-docs-nav bd-links"
     aria-label="Section Navigation">
  <p class="bd-links__title" role="heading" aria-level="1">Section Navigation</p>
  <div class="bd-toc-item navbar-nav"><ul class="current nav bd-sidenav">
<li class="toctree-l1 has-children"><a class="reference internal" href="../hardware.html">Hardware Assembly</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="../hardware/commutation_translation.html">Commutation-Translation System</a></li>
<li class="toctree-l2"><a class="reference internal" href="../hardware/foraging_patch.html">Foraging Patch</a></li>
<li class="toctree-l2"><a class="reference internal" href="../hardware/habitat.html">Habitat</a></li>
<li class="toctree-l2"><a class="reference internal" href="../hardware/nest.html">Nest</a></li>
<li class="toctree-l2"><a class="reference internal" href="../connections/camera.html">Camera Wiring Schematic</a></li>
<li class="toctree-l2"><a class="reference internal" href="../connections/camera_controller.html">Camera Controller Wiring Schematic</a></li>
<li class="toctree-l2"><a class="reference internal" href="../connections/commutation_translation_system.html">Commutation-Translation System Wiring Schematic</a></li>
<li class="toctree-l2"><a class="reference internal" href="../connections/foraging_patch.html">Foraging Patch Wiring Schematic</a></li>
<li class="toctree-l2"><a class="reference internal" href="../connections/foraging_patch_output_expander.html">Foraging Patch Output Expander Wiring Schematic</a></li>
<li class="toctree-l2"><a class="reference internal" href="../connections/microphone.html">Microphone Wiring Schematic</a></li>
<li class="toctree-l2"><a class="reference internal" href="../connections/rfid_reader.html">RFID Reader Wiring Schematic</a></li>
<li class="toctree-l2"><a class="reference internal" href="../connections/sound_card.html">Sound Card Wiring Schematic</a></li>
<li class="toctree-l2"><a class="reference internal" href="../connections/timestamp_generator.html">Timestamp Generator Wiring Schematic</a></li>
<li class="toctree-l2"><a class="reference internal" href="../connections/weighing_scale.html">Weighing Scale Wiring Schematic</a></li>
</ul>
</details></li>
<li class="toctree-l1 current active has-children"><a class="reference internal" href="../acquisition.html">Acquisition Modules</a><details open="open"><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="activity_tracking.html">Activity Tracking</a></li>
<li class="toctree-l2"><a class="reference internal" href="alerts.html">Alerts</a></li>
<li class="toctree-l2"><a class="reference internal" href="camera.html">Spinnaker Camera</a></li>
<li class="toctree-l2"><a class="reference internal" href="camera_controller.html">Multi-Camera Controller</a></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="control_panel.html">Control Panel</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l3"><a class="reference internal" href="control_panel/annotation_source_GUI.html">AnnotationSource</a></li>
<li class="toctree-l3"><a class="reference internal" href="control_panel/button_source_GUI.html">ButtonSource</a></li>
<li class="toctree-l3"><a class="reference internal" href="control_panel/environment_state_GUI.html">EnvironmentState</a></li>
<li class="toctree-l3"><a class="reference internal" href="control_panel/experiment_properties_GUI.html">ExperimentProperties</a></li>
<li class="toctree-l3"><a class="reference internal" href="control_panel/label_control_GUI.html">LabelControl</a></li>
<li class="toctree-l3"><a class="reference internal" href="control_panel/subject_database.html">SubjectDatabase <!--TODO: Placeholder content--></a></li>
</ul>
</details></li>
<li class="toctree-l2 current active has-children"><a class="current reference internal" href="#">Foraging Patch</a><details open="open"><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l3"><a class="reference internal" href="foraging_patch/patch_dispenser.html">PatchDispenser</a></li>
<li class="toctree-l3"><a class="reference internal" href="foraging_patch/pellet_monitor.html">PelletMonitor</a></li>
<li class="toctree-l3"><a class="reference internal" href="foraging_patch/time_since_last_event.html">TimeSinceLastEvent</a></li>
<li class="toctree-l3"><a class="reference internal" href="foraging_patch/time_spent_on_wheel.html">TimeSpentOnWheel</a></li>
</ul>
</details></li>
<li class="toctree-l2"><a class="reference internal" href="logging.html">Logging</a></li>
<li class="toctree-l2"><a class="reference internal" href="monitors.html">Device Synchronisation Monitors</a></li>
<li class="toctree-l2"><a class="reference internal" href="nest.html">Nest</a></li>
<li class="toctree-l2"><a class="reference internal" href="rfid_reader.html">RFID Reader</a></li>
<li class="toctree-l2"><a class="reference internal" href="subject_tracking.html">Subject Tracking</a></li>
</ul>
</details></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../api.html">API Reference</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2 has-children"><a class="reference internal" href="../api/aeon_api.html"><code class="docutils literal notranslate"><span class="pre">aeon_api</span></code></a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l3"><a class="reference internal" href="../api/aeon_api/swc.aeon.analysis.movies.html">swc.aeon.analysis.movies</a></li>
<li class="toctree-l3"><a class="reference internal" href="../api/aeon_api/swc.aeon.analysis.plotting.html">swc.aeon.analysis.plotting</a></li>
<li class="toctree-l3"><a class="reference internal" href="../api/aeon_api/swc.aeon.analysis.utils.html">swc.aeon.analysis.utils</a></li>
<li class="toctree-l3"><a class="reference internal" href="../api/aeon_api/swc.aeon.io.api.html">swc.aeon.io.api</a></li>
<li class="toctree-l3"><a class="reference internal" href="../api/aeon_api/swc.aeon.io.reader.html">swc.aeon.io.reader</a></li>
<li class="toctree-l3"><a class="reference internal" href="../api/aeon_api/swc.aeon.io.video.html">swc.aeon.io.video</a></li>
<li class="toctree-l3"><a class="reference internal" href="../api/aeon_api/swc.aeon.schema.core.html">swc.aeon.schema.core</a></li>
<li class="toctree-l3"><a class="reference internal" href="../api/aeon_api/swc.aeon.schema.streams.html">swc.aeon.schema.streams</a></li>
</ul>
</details></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../api/aeon_acquisition.html"><code class="docutils literal notranslate"><span class="pre">aeon_acquisition</span></code></a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l3 has-children"><a class="reference internal" href="../api/aeon_acquisition/Aeon.Acquisition.html">    Aeon.Acquisition</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l4"><a class="reference internal" href="../api/aeon_acquisition/Aeon.Acquisition.AeonAudio.html">AeonAudio</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/aeon_acquisition/Aeon.Acquisition.AvailableDiskSpace.html">AvailableDiskSpace</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/aeon_acquisition/Aeon.Acquisition.AvailableMemory.html">AvailableMemory</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/aeon_acquisition/Aeon.Acquisition.CreateLogMessage.html">CreateLogMessage</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/aeon_acquisition/Aeon.Acquisition.CreateRepository.html">CreateRepository</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/aeon_acquisition/Aeon.Acquisition.FormatDate.html">FormatDate</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/aeon_acquisition/Aeon.Acquisition.FormatJson.html">FormatJson</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/aeon_acquisition/Aeon.Acquisition.FormatLogMessage.html">FormatLogMessage</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/aeon_acquisition/Aeon.Acquisition.GetDataPath.html">GetDataPath</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/aeon_acquisition/Aeon.Acquisition.GetDateTime.html">GetDateTime</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/aeon_acquisition/Aeon.Acquisition.GroupByTime.html">GroupByTime</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/aeon_acquisition/Aeon.Acquisition.IsRepositoryClean.html">IsRepositoryClean</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/aeon_acquisition/Aeon.Acquisition.LoadConfigFile.html">LoadConfigFile</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/aeon_acquisition/Aeon.Acquisition.LogMessage.html">LogMessage</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/aeon_acquisition/Aeon.Acquisition.MetadataSource-1.html">MetadataSource&lt;TMetadata&gt;</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/aeon_acquisition/Aeon.Acquisition.PrependOnce.html">PrependOnce</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/aeon_acquisition/Aeon.Acquisition.RangeThreshold.html">RangeThreshold</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/aeon_acquisition/Aeon.Acquisition.SendMessageCard.html">SendMessageCard</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/aeon_acquisition/Aeon.Acquisition.ServiceAccountName.html">ServiceAccountName</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/aeon_acquisition/Aeon.Acquisition.StateRecovery-1.html">StateRecovery&lt;TState&gt;</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/aeon_acquisition/Aeon.Acquisition.StateRecoverySubject.html">StateRecoverySubject</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/aeon_acquisition/Aeon.Acquisition.StateRecoverySubject-1.html">StateRecoverySubject&lt;T&gt;</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/aeon_acquisition/Aeon.Acquisition.StripSubstring.html">StripSubstring</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/aeon_acquisition/Aeon.Acquisition.ThrowException.html">ThrowException</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/aeon_acquisition/Aeon.Acquisition.PriorityLevel.html">PriorityLevel</a></li>
</ul>
</details></li>
<li class="toctree-l3 has-children"><a class="reference internal" href="../api/aeon_acquisition/Aeon.Database.html">    Aeon.Database</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l4"><a class="reference internal" href="../api/aeon_acquisition/Aeon.Database.CreateConnection.html">CreateConnection</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/aeon_acquisition/Aeon.Database.ExecuteQuery.html">ExecuteQuery</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/aeon_acquisition/Aeon.Database.ObservableDatabase.html">ObservableDatabase</a></li>
</ul>
</details></li>
<li class="toctree-l3 has-children"><a class="reference internal" href="../api/aeon_acquisition/Aeon.Environment.html">    Aeon.Environment</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l4"><a class="reference internal" href="../api/aeon_acquisition/Aeon.Environment.ActiveSubjectCollection.html">ActiveSubjectCollection</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/aeon_acquisition/Aeon.Environment.AnnotationControl.html">AnnotationControl</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/aeon_acquisition/Aeon.Environment.AnnotationSource.html">AnnotationSource</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/aeon_acquisition/Aeon.Environment.AnnotationSourceVisualizer.html">AnnotationSourceVisualizer</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/aeon_acquisition/Aeon.Environment.ButtonSource.html">ButtonSource</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/aeon_acquisition/Aeon.Environment.ButtonSourceVisualizer.html">ButtonSourceVisualizer</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/aeon_acquisition/Aeon.Environment.ChannelMap.html">ChannelMap</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/aeon_acquisition/Aeon.Environment.CreateRoomLightMessage.html">CreateRoomLightMessage</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/aeon_acquisition/Aeon.Environment.CreateRoomLightPreset.html">CreateRoomLightPreset</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/aeon_acquisition/Aeon.Environment.DeserializeFromYaml.html">DeserializeFromYaml</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/aeon_acquisition/Aeon.Environment.EnumerateColony.html">EnumerateColony</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/aeon_acquisition/Aeon.Environment.EnvironmentState.html">EnvironmentState</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/aeon_acquisition/Aeon.Environment.EnvironmentStateControl.html">EnvironmentStateControl</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/aeon_acquisition/Aeon.Environment.EnvironmentStateMetadata.html">EnvironmentStateMetadata</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/aeon_acquisition/Aeon.Environment.EnvironmentStateRecovery.html">EnvironmentStateRecovery</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/aeon_acquisition/Aeon.Environment.EnvironmentStateVisualizer.html">EnvironmentStateVisualizer</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/aeon_acquisition/Aeon.Environment.EnvironmentSubjectState.html">EnvironmentSubjectState</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/aeon_acquisition/Aeon.Environment.EnvironmentSubjectStateControl.html">EnvironmentSubjectStateControl</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/aeon_acquisition/Aeon.Environment.EnvironmentSubjectStateEntry.html">EnvironmentSubjectStateEntry</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/aeon_acquisition/Aeon.Environment.EnvironmentSubjectStateMetadata.html">EnvironmentSubjectStateMetadata</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/aeon_acquisition/Aeon.Environment.EnvironmentSubjectStateVisualizer.html">EnvironmentSubjectStateVisualizer</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/aeon_acquisition/Aeon.Environment.ExperimentProperties.html">ExperimentProperties</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/aeon_acquisition/Aeon.Environment.ExternalizedPropertiesVisualizer.html">ExternalizedPropertiesVisualizer</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/aeon_acquisition/Aeon.Environment.Fixture.html">Fixture</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/aeon_acquisition/Aeon.Environment.FormatWeight.html">FormatWeight</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/aeon_acquisition/Aeon.Environment.InterpolateRoomLightPreset.html">InterpolateRoomLightPreset</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/aeon_acquisition/Aeon.Environment.LabelControl.html">LabelControl</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/aeon_acquisition/Aeon.Environment.LabelVisualizer.html">LabelVisualizer</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/aeon_acquisition/Aeon.Environment.ParseRfidMeasurement.html">ParseRfidMeasurement</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/aeon_acquisition/Aeon.Environment.RoomFixtures.html">RoomFixtures</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/aeon_acquisition/Aeon.Environment.RoomLightDevice.html">RoomLightDevice</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/aeon_acquisition/Aeon.Environment.SerializeToYaml.html">SerializeToYaml</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/aeon_acquisition/Aeon.Environment.SubjectLogBitmap.html">SubjectLogBitmap</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/aeon_acquisition/Aeon.Environment.SubjectRecord.html">SubjectRecord</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/aeon_acquisition/Aeon.Environment.SubjectStateRecovery.html">SubjectStateRecovery</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/aeon_acquisition/Aeon.Environment.TareWeight.html">TareWeight</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/aeon_acquisition/Aeon.Environment.TareWeightControl.html">TareWeightControl</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/aeon_acquisition/Aeon.Environment.TareWeightVisualizer.html">TareWeightVisualizer</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/aeon_acquisition/Aeon.Environment.WeightBaseline.html">WeightBaseline</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/aeon_acquisition/Aeon.Environment.WeightFilter.html">WeightFilter</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/aeon_acquisition/Aeon.Environment.WeightRaw.html">WeightRaw</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/aeon_acquisition/Aeon.Environment.RfidMeasurement.html">RfidMeasurement</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/aeon_acquisition/Aeon.Environment.RoomLightMessage.html">RoomLightMessage</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/aeon_acquisition/Aeon.Environment.RoomLightPreset.html">RoomLightPreset</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/aeon_acquisition/Aeon.Environment.WeightMeasurement.html">WeightMeasurement</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/aeon_acquisition/Aeon.Environment.EnvironmentStateType.html">EnvironmentStateType</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/aeon_acquisition/Aeon.Environment.EnvironmentSubjectChangeType.html">EnvironmentSubjectChangeType</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/aeon_acquisition/Aeon.Environment.InterpolationMethod.html">InterpolationMethod</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/aeon_acquisition/Aeon.Environment.SubjectSex.html">SubjectSex</a></li>
</ul>
</details></li>
<li class="toctree-l3 has-children"><a class="reference internal" href="../api/aeon_acquisition/Aeon.Foraging.html">    Aeon.Foraging</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l4"><a class="reference internal" href="../api/aeon_acquisition/Aeon.Foraging.CreateDispenserEvent.html">CreateDispenserEvent</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/aeon_acquisition/Aeon.Foraging.DispenserAccumulate.html">DispenserAccumulate</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/aeon_acquisition/Aeon.Foraging.DispenserController.html">DispenserController</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/aeon_acquisition/Aeon.Foraging.DispenserEventArgs.html">DispenserEventArgs</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/aeon_acquisition/Aeon.Foraging.DispenserEventControl.html">DispenserEventControl</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/aeon_acquisition/Aeon.Foraging.DispenserEventVisualizer.html">DispenserEventVisualizer</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/aeon_acquisition/Aeon.Foraging.DispenserState.html">DispenserState</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/aeon_acquisition/Aeon.Foraging.FormatDispenserState.html">FormatDispenserState</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/aeon_acquisition/Aeon.Foraging.WheelDisplacement.html">WheelDisplacement</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/aeon_acquisition/Aeon.Foraging.DispenserEventType.html">DispenserEventType</a></li>
</ul>
</details></li>
<li class="toctree-l3 has-children"><a class="reference internal" href="../api/aeon_acquisition/Aeon.Video.html">    Aeon.Video</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l4"><a class="reference internal" href="../api/aeon_acquisition/Aeon.Video.AeonCapture.html">AeonCapture</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/aeon_acquisition/Aeon.Video.PylonCapture.html">PylonCapture</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/aeon_acquisition/Aeon.Video.SpinnakerCapture.html">SpinnakerCapture</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/aeon_acquisition/Aeon.Video.VideoDataFrame.html">VideoDataFrame</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/aeon_acquisition/Aeon.Video.VideoFileCapture.html">VideoFileCapture</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/aeon_acquisition/Aeon.Video.VideoChunkData.html">VideoChunkData</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/aeon_acquisition/Aeon.Video.VideoControllerType.html">VideoControllerType</a></li>
</ul>
</details></li>
<li class="toctree-l3 has-children"><a class="reference internal" href="../api/aeon_acquisition/Aeon.Vision.html">    Aeon.Vision</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l4"><a class="reference internal" href="../api/aeon_acquisition/Aeon.Vision.DistanceFromPoint.html">DistanceFromPoint</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/aeon_acquisition/Aeon.Vision.FormatBinaryRegions.html">FormatBinaryRegions</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/aeon_acquisition/Aeon.Vision.RegionContainsPoint.html">RegionContainsPoint</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/aeon_acquisition/Aeon.Vision.TakeLargestRegions.html">TakeLargestRegions</a></li>
</ul>
</details></li>
<li class="toctree-l3 has-children"><a class="reference internal" href="../api/aeon_acquisition/Aeon.Vision.Sleap.html">    Aeon.Vision.Sleap</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l4"><a class="reference internal" href="../api/aeon_acquisition/Aeon.Vision.Sleap.CreatePoseTrackingMetadata.html">CreatePoseTrackingMetadata</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/aeon_acquisition/Aeon.Vision.Sleap.FormatPose.html">FormatPose</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/aeon_acquisition/Aeon.Vision.Sleap.PoseTrackingMetadata.html">PoseTrackingMetadata</a></li>
</ul>
</details></li>
</ul>
</details></li>
</ul>
</details></li>
<li class="toctree-l1"><a class="reference internal" href="../data_contract.html">Data Schema</a></li>
<li class="toctree-l1"><a class="reference internal" href="../glossary.html">Glossary</a></li>
</ul>
</div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
      <div class="sidebar-primary-item">
<div id="ethical-ad-placement"
      class="flat"
      data-ea-publisher="readthedocs"
      data-ea-type="readthedocs-sidebar"
      data-ea-manual="true">
</div></div>
  </div>


      </div>
      
      <main id="main-content" class="bd-main" role="main">
        
        
          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article d-print-none">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item">

<nav aria-label="Breadcrumb" class="d-print-none">
  <ul class="bd-breadcrumbs">
    
    <li class="breadcrumb-item breadcrumb-home">
      <a href="../../index.html" class="nav-link" aria-label="Home">
        <i class="fa-solid fa-home"></i>
      </a>
    </li>
    
    <li class="breadcrumb-item"><a href="../index.html" class="nav-link">Reference</a></li>
    
    
    <li class="breadcrumb-item"><a href="../acquisition.html" class="nav-link">Acquisition Modules</a></li>
    
    <li class="breadcrumb-item active" aria-current="page"><span class="ellipsis">Foraging Patch</span></li>
  </ul>
</nav>
</div>
      
    </div>
  
  
</div>
</div>
              
              
              
                
<div id="searchbox"></div>
                <article class="bd-article">
                  
  <section id="foraging-patch">
<span id="target-module-foraging-patch"></span><h1>Foraging Patch<a class="headerlink" href="#foraging-patch" title="Link to this heading">#</a></h1>
<p>The foraging patch module is core to foraging and long-term 24/7 experiments.
It is utilised with a <a class="reference internal" href="../hardware/foraging_patch.html#target-foraging-patch"><span class="std std-ref">foraging patch</span></a> hardware module assembly to provide a means for animals in the <a class="reference internal" href="../hardware/habitat.html#target-habitat"><span class="std std-ref">habitat</span></a> to obtain food by turning a configurable wheel, simulating a naturalistic digging action.</p>
<p>The primary <a class="reference internal" href="#target-node-undergroundfeeder"><span class="std std-ref"><code class="docutils literal notranslate"><span class="pre">UndergroundFeeder</span> <span class="pre">(Aeon.Foraging)</span></code></span></a> node handles the connection to the foraging patch hardware through a <a class="reference external" href="https://harp-tech.org/api/Harp.OutputExpander#">Harp output expander</a> and defines the basic functions of the foraging patch.</p>
<section id="nodes">
<h2>Nodes<a class="headerlink" href="#nodes" title="Link to this heading">#</a></h2>
<p>To extend the functionality of the foraging patch, the following auxiliary nodes are provided:</p>
<ul class="simple">
<li><p><a class="reference internal" href="foraging_patch/patch_dispenser.html#target-node-patchdispenser"><span class="std std-ref"><code class="docutils literal notranslate"><span class="pre">PatchDispenser</span> <span class="pre">(Aeon.Foraging)</span></code></span></a></p></li>
<li><p><a class="reference internal" href="foraging_patch/pellet_monitor.html#target-node-pelletmonitor"><span class="std std-ref"><code class="docutils literal notranslate"><span class="pre">PelletMonitor</span> <span class="pre">(Aeon.Foraging)</span></code></span></a></p></li>
<li><p><a class="reference internal" href="foraging_patch/time_spent_on_wheel.html#target-node-timespentonwheel"><span class="std std-ref"><code class="docutils literal notranslate"><span class="pre">TimeSpentOnWheel</span> <span class="pre">(Aeon.Foraging)</span></code></span></a></p></li>
<li><p><a class="reference internal" href="foraging_patch/time_since_last_event.html#target-node-timesincelastevent"><span class="std std-ref"><code class="docutils literal notranslate"><span class="pre">TimeSinceLastEvent</span> <span class="pre">(Aeon.Foraging)</span></code></span></a></p></li>
</ul>
<p>These nodes process events from the <a class="reference internal" href="#target-node-undergroundfeeder"><span class="std std-ref"><code class="docutils literal notranslate"><span class="pre">UndergroundFeeder</span></code></span></a> node and retrieve or compute informative metrics for visualisation, logging, and task control.
Each of these auxiliary nodes accept events carried by shared <code class="docutils literal notranslate"><span class="pre">Subject</span></code>s from the <code class="docutils literal notranslate"><span class="pre">UndergroundFeeder</span></code> node.
Together, these create a comprehensive foraging assembly known as a “Patch” that allows for real-time tracking of multiple measures extracted from processing sensor data and events from the foraging patch device.
These are passed to shared <code class="docutils literal notranslate"><span class="pre">Subject</span></code>s:</p>
<ul class="simple">
<li><p>PelletCount</p></li>
<li><p>TimeSpentOnPatches</p></li>
<li><p>TimeSinceLastVisit</p></li>
<li><p>TotalDistanceTravelled</p></li>
<li><p>MissedPellets</p></li>
<li><p>ManualPellets</p></li>
<li><p>TotalPelletsDelivered</p></li>
</ul>
<p>These <code class="docutils literal notranslate"><span class="pre">Subject</span></code>s can then be utilised for processing, task logic, logging and visualisation of the experimental procedure.</p>
<p>The <a class="reference internal" href="foraging_patch/patch_dispenser.html#target-node-patchdispenser"><span class="std std-ref"><code class="docutils literal notranslate"><span class="pre">PatchDispenser</span></code></span></a> and <a class="reference internal" href="foraging_patch/pellet_monitor.html#target-node-pelletmonitor"><span class="std std-ref"><code class="docutils literal notranslate"><span class="pre">PelletMonitor</span></code></span></a> nodes work together to monitor delivery commands and beam break events to keep track of the number of pellets available to be delivered and the reason each pellet was delivered (a retry, automatic or manual delivery).
It also monitors the current configuration of the patch assembly, including the threshold and current position of the foraging wheel, to facilitate recovery from unexpected interruptions or workflow crashes.
The <a class="reference internal" href="foraging_patch/time_spent_on_wheel.html#target-node-timespentonwheel"><span class="std std-ref"><code class="docutils literal notranslate"><span class="pre">TimeSpentOnWheel</span></code></span></a> and <a class="reference internal" href="foraging_patch/time_since_last_event.html#target-node-timesincelastevent"><span class="std std-ref"><code class="docutils literal notranslate"><span class="pre">TimeSinceLastEvent</span></code></span></a> nodes are used to compute these relevant measures for logging, visualisation and experiment monitoring.</p>
<section id="undergroundfeeder">
<span id="target-node-undergroundfeeder"></span><h3>UndergroundFeeder<a class="headerlink" href="#undergroundfeeder" title="Link to this heading">#</a></h3>
<p>The <code class="docutils literal notranslate"><span class="pre">UndergroundFeeder</span> <span class="pre">(Aeon.Foraging)</span></code> node establishes a connection to the <a class="reference internal" href="../hardware/foraging_patch.html#target-foraging-patch"><span class="std std-ref">foraging patch</span></a> hardware module assembly through a <a class="reference external" href="https://harp-tech.org/api/Harp.OutputExpander#">Harp output expander</a>.
It also defines the basic functions of the foraging patch and a workflow to configure the device operation properties.
The device uses the standardised Harp communication protocol, producing timestamped Harp messages when device events occur.</p>
<section id="inputs">
<h4>Inputs<a class="headerlink" href="#inputs" title="Link to this heading">#</a></h4>
<p>None</p>
</section>
<section id="outputs">
<h4>Outputs<a class="headerlink" href="#outputs" title="Link to this heading">#</a></h4>
<p>Stream of all <code class="docutils literal notranslate"><span class="pre">Harp.HarpMessages</span></code> emitted by the Harp device.</p>
</section>
<section id="properties">
<h4>Properties<a class="headerlink" href="#properties" title="Link to this heading">#</a></h4>
<section id="general">
<h5>General<a class="headerlink" href="#general" title="Link to this heading">#</a></h5>
<p>These properties are critical parameters for the operation of the device.</p>
<div class="pst-scrollable-table-container"><table class="table">
<thead>
<tr class="row-odd"><th class="head"><p>Property name</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><strong>PortName</strong></p></td>
<td><p>The COM port the output expander attached to your foraging patch is connected to</p></td>
</tr>
<tr class="row-odd"><td><p><strong>Radius</strong></p></td>
<td><p>The radius of the foraging wheel in centimeters. This is used to compute the distance the wheel has been turned. The Aeon <a class="reference internal" href="../hardware/foraging_patch.html#target-foraging-patch"><span class="std std-ref">foraging patch</span></a> wheel has a radius of 4cm</p></td>
</tr>
<tr class="row-even"><td><p><strong>SampleRate</strong></p></td>
<td><p>The sampling rate of the magnetic encoder monitoring the wheel, selected from options available. For Aeon experiments, this is set to 500Hz</p></td>
</tr>
</tbody>
</table>
</div>
</section>
<section id="retry-function">
<h5>Retry function<a class="headerlink" href="#retry-function" title="Link to this heading">#</a></h5>
<p>If a pellet is due to be delivered, an IR beam break module in the foraging patch detects whether the pellet delivery is successful.
In the event that a pellet is not delivered (no beam break detected), then the foraging patch can be configured to try again.
These properties configure the options around this functionality.</p>
<div class="pst-scrollable-table-container"><table class="table">
<thead>
<tr class="row-odd"><th class="head"><p>Property name</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><strong>DueTime</strong></p></td>
<td><p>The time following a pellet delivery command that the device will wait for a successful beam break signal before assuming the pellet delivery has failed</p></td>
</tr>
<tr class="row-odd"><td><p><strong>Count</strong></p></td>
<td><p>The number of retry attempts the foraging patch will perform</p></td>
</tr>
</tbody>
</table>
</div>
</section>
<section id="subjects">
<h5>Subjects<a class="headerlink" href="#subjects" title="Link to this heading">#</a></h5>
<p>Events (outputs) from and commands (inputs) to the <code class="docutils literal notranslate"><span class="pre">UndergroundFeeder</span></code> node are published to shared <code class="docutils literal notranslate"><span class="pre">Subject</span></code>s, the names of which are configured in the properties of the node.
The output <code class="docutils literal notranslate"><span class="pre">Subject</span></code>s are then accessible in the Bonsai editor’s toolbox and are useable elsewhere in the workflow using the same names.</p>
<section id="device-event-subjects">
<h6>Device event subjects<a class="headerlink" href="#device-event-subjects" title="Link to this heading">#</a></h6>
<div class="pst-scrollable-table-container"><table class="table">
<thead>
<tr class="row-odd"><th class="head"><p>Subject name</p></th>
<th class="head"><p>Type</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><strong>PatchEvents</strong></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">Harp.HarpMessage</span></code></p></td>
<td><p>Contains all events, consisting of timestamped Harp messages reporting the state of each register of the output expander. Also output directly by the <code class="docutils literal notranslate"><span class="pre">UndergroundFeeder</span></code> node</p></td>
</tr>
<tr class="row-odd"><td><p><strong>WheelDisplacement</strong></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">Harp.Timestamped&lt;double&gt;</span></code></p></td>
<td><p>The sample-to-sample displacement of the foraging wheel in mm</p></td>
</tr>
<tr class="row-even"><td><p><strong>PelletDelivered</strong></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">Harp.Timestamped&lt;bool&gt;</span></code></p></td>
<td><p>Reports <code class="docutils literal notranslate"><span class="pre">True</span></code> when a pellet is detected by the IR beam break register</p></td>
</tr>
</tbody>
</table>
</div>
</section>
<section id="device-command-subjects">
<h6>Device command subjects<a class="headerlink" href="#device-command-subjects" title="Link to this heading">#</a></h6>
<div class="pst-scrollable-table-container"><table class="table">
<thead>
<tr class="row-odd"><th class="head"><p>Subject name</p></th>
<th class="head"><p>Type</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><strong>DeliverPellet</strong></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">object</span></code></p></td>
<td><p>Trigger pellet delivery. Any event passed to this <code class="docutils literal notranslate"><span class="pre">Subject</span></code> will trigger a pellet delivery</p></td>
</tr>
<tr class="row-odd"><td><p><strong>ResetFeeder</strong></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">object</span></code></p></td>
<td><p>Trigger foraging patch reset. Any event passed to this <code class="docutils literal notranslate"><span class="pre">Subject</span></code> will trigger a foraging patch reset</p></td>
</tr>
</tbody>
</table>
</div>
</section>
</section>
</section>
<section id="usage">
<h4>Usage<a class="headerlink" href="#usage" title="Link to this heading">#</a></h4>
<p>Create a <code class="docutils literal notranslate"><span class="pre">GroupWorkflow</span></code> and give it an appropriate name, e.g. “Patch1”.
Inside, place an <code class="docutils literal notranslate"><span class="pre">UndergroundFeeder</span> <span class="pre">(Aeon.Foraging)</span></code> node, externalise all properties, and connect it to the <code class="docutils literal notranslate"><span class="pre">WorkflowOutput</span></code>:</p>
<div class="workflow docutils">
<p><img alt="Aeon.Foraging.UndergroundFeeder" src="../../_images/base-feeder.svg" /></p>
</div>
</section>
</section>
<section id="additional-nodes-subjects-to-be-considered">
<h3>Additional nodes / subjects to be considered<a class="headerlink" href="#additional-nodes-subjects-to-be-considered" title="Link to this heading">#</a></h3>
<ul class="simple">
<li><p>[ ] <code class="docutils literal notranslate"><span class="pre">RepeatEveryBlock</span></code></p></li>
<li><p>[ ] <code class="docutils literal notranslate"><span class="pre">PatchDistanceState</span></code></p></li>
<li><p>[ ] <code class="docutils literal notranslate"><span class="pre">PatchState</span></code></p></li>
<li><p>[ ] <code class="docutils literal notranslate"><span class="pre">PatchDeliveryCount</span></code></p></li>
<li><p>[ ] <code class="docutils literal notranslate"><span class="pre">PatchTimeSpent</span></code></p></li>
<li><p>[ ] <code class="docutils literal notranslate"><span class="pre">PatchTimeSinceLastVisit</span></code></p></li>
<li><p>[ ] <code class="docutils literal notranslate"><span class="pre">PatchWheelDisplacement</span></code></p></li>
</ul>
</section>
</section>
<section id="gui">
<h2>GUI<a class="headerlink" href="#gui" title="Link to this heading">#</a></h2>
<p>The foraging patch hardware has several commands that may be initiated by the user, actuated through clickable buttons in a customisable control panel built by the <a class="reference internal" href="foraging_patch/patch_dispenser.html#target-node-patchdispenser"><span class="std std-ref">PatchDispenser</span></a> node.</p>
<section id="environment-metadata">
<h3>Environment metadata<a class="headerlink" href="#environment-metadata" title="Link to this heading">#</a></h3>
</section>
<section id="patchdispenser-control-panel">
<span id="target-node-patchdispenser-control-panel"></span><h3>PatchDispenser control panel<a class="headerlink" href="#patchdispenser-control-panel" title="Link to this heading">#</a></h3>
<p>In addition to the monitoring of pellet counts and the current state of the foraging patch, the <a class="reference internal" href="foraging_patch/patch_dispenser.html#target-node-patchdispenser"><span class="std std-ref"><code class="docutils literal notranslate"><span class="pre">PatchDispenser</span></code></span></a> node also comes with its own GUI interface for controlling the foraging patch hardware during an experiment.</p>
<p><img alt="patchDispenserVisualiser" src="../../_images/patch_dispenser_visualiser.svg" /></p>
<ol class="arabic simple">
<li><p><strong>Patch name</strong>: The name assigned to this patch, e.g. “Patch1”.</p></li>
<li><p><strong>Current pellet count</strong>: The current estimated number of pellets in the foraging patch hopper.</p></li>
<li><p><strong>Pellet count entry</strong>: Dialog box to enter a new pellet count, e.g. during a manual refill of the foraging patch.</p></li>
<li><p><strong>Deliver</strong>: Button to trigger a manual pellet delivery, regardless of the activity of the wheel.</p></li>
<li><p><strong>Refill</strong>: Button to update the current pellet count with the count specified in the pellet count entry dialog box. Typically used during maintenance mode.</p></li>
<li><p><strong>Reset</strong>: Button to reinitialise the foraging patch, typically after human intervention, e.g. following a refill or in case the foraging patch or associated hardware has entered an erroneous state.</p></li>
</ol>
</section>
<section id="patch-threshold-and-wheel-monitoring">
<h3>Patch threshold and wheel monitoring<a class="headerlink" href="#patch-threshold-and-wheel-monitoring" title="Link to this heading">#</a></h3>
</section>
</section>
<section id="logging">
<h2>Logging<a class="headerlink" href="#logging" title="Link to this heading">#</a></h2>
<p>Outputs from the feeder nodes are first formatted using the <code class="docutils literal notranslate"><span class="pre">Format</span></code> node, within which the register addresses are configured for software generated data logs.
Utilising available registers of the output expander, the formatted outputs are then combined to form a “Patch” assembly, before being passed to the<a class="reference internal" href="logging.html#target-node-logharpstate"><span class="std std-ref"><code class="docutils literal notranslate"><span class="pre">LogHarpState</span> <span class="pre">(Aeon.Acquisition)</span></code></span></a> node to be written to a log file.</p>
<div class="workflow docutils">
<p><img alt="logPatchEvents" src="../../_images/logPatchEvents.svg" /></p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Register address 203 is not shown in this workflow, but is generated as events marked as a retry following an unsuccessful delivery attempt.
This is passed to the “PatchEvents” <code class="docutils literal notranslate"><span class="pre">Subject</span></code> within the <a class="reference internal" href="#target-node-undergroundfeeder"><span class="std std-ref"><code class="docutils literal notranslate"><span class="pre">UndergroundFeeder</span></code></span></a> node.</p>
</div>
<p><strong>Data schema</strong></p>
<div class="pst-scrollable-table-container"><table class="table">
<thead>
<tr class="row-odd"><th class="head"><p>Register name</p></th>
<th class="head"><p>Access</p></th>
<th class="head"><p>Address</p></th>
<th class="head"><p>Type</p></th>
<th class="head"><p>Mask type</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><strong>TimestampSeconds</strong></p></td>
<td><p>Event</p></td>
<td><p>8</p></td>
<td><p>U32</p></td>
<td><p>-</p></td>
<td><p>Heartbeat</p></td>
</tr>
<tr class="row-odd"><td><p><strong>AuxInState</strong></p></td>
<td><p>Event</p></td>
<td><p>32</p></td>
<td><p>U8</p></td>
<td><p>AuxiliaryInputs</p></td>
<td><p>State of beam break</p></td>
</tr>
<tr class="row-even"><td><p><strong>OutputSet</strong></p></td>
<td><p>Write</p></td>
<td><p>35</p></td>
<td><p>U8</p></td>
<td><p>DigitalOutputs</p></td>
<td><p>Deliver pellet command</p></td>
</tr>
<tr class="row-odd"><td><p><strong>OutputClear</strong></p></td>
<td><p>Write</p></td>
<td><p>36</p></td>
<td><p>U8</p></td>
<td><p>DigitalOutputs</p></td>
<td><p>Deliver pellet command has been cleared</p></td>
</tr>
<tr class="row-even"><td><p><strong>ExpansionBoard</strong></p></td>
<td><p>Event</p></td>
<td><p>87</p></td>
<td><p>U8</p></td>
<td><p>ExpansionBoardType</p></td>
<td><p>Should always be 1 (MagneticEncoder)</p></td>
</tr>
<tr class="row-odd"><td><p><strong>MagneticEncoder</strong></p></td>
<td><p>Event</p></td>
<td><p>90</p></td>
<td><p>U16</p></td>
<td><p>[Angle, Magnitude]</p></td>
<td><p>Reported angle and magnitude of magnetic encoder</p></td>
</tr>
<tr class="row-even"><td><p><strong>MagneticEncoderSampleRate</strong></p></td>
<td><p>Event</p></td>
<td><p>91</p></td>
<td><p>U8</p></td>
<td><p>MagneticEncoderSampleRateMode</p></td>
<td><p>Should always be 4 (500Hz)</p></td>
</tr>
<tr class="row-odd"><td><p><strong>(dispenser_state)</strong></p></td>
<td><p>-</p></td>
<td><p>200</p></td>
<td><p>F32</p></td>
<td><p>-</p></td>
<td><p>The current state of the pellet dispenser</p></td>
</tr>
<tr class="row-even"><td><p><strong>(delivery_manual)</strong></p></td>
<td><p>-</p></td>
<td><p>201</p></td>
<td><p>U8</p></td>
<td><p>-</p></td>
<td><p>Manual pellet delivery events log</p></td>
</tr>
<tr class="row-odd"><td><p><strong>(missed_pellet)</strong></p></td>
<td><p>-</p></td>
<td><p>202</p></td>
<td><p>U8</p></td>
<td><p>-</p></td>
<td><p>Missed pellet events log</p></td>
</tr>
<tr class="row-even"><td><p><strong>(delivery_retry)</strong></p></td>
<td><p>-</p></td>
<td><p>203</p></td>
<td><p>U8</p></td>
<td><p>-</p></td>
<td><p>Missed pellet events log</p></td>
</tr>
</tbody>
</table>
</div>
</section>
<section id="state-persistence">
<h2>State persistence<a class="headerlink" href="#state-persistence" title="Link to this heading">#</a></h2>
<p>To ensure robustness and enable recovery from system crashes or other errors in long-term experiments, the state of the experiment can be stored in a <code class="docutils literal notranslate"><span class="pre">StateRecoverySubject</span></code> that persists over multiple executions of the same workflow.</p>
<p>Two of these subjects are initially declared per patch, at the highest level of the workflow.
For instance, <code class="docutils literal notranslate"><span class="pre">Patch1State</span></code> stores the state of the patch itself, including the current wheel displacement and the foraging threshold of the associated dispenser module, <code class="docutils literal notranslate"><span class="pre">Patch1Dispenser</span></code>.</p>
<p>The state of a patch includes:</p>
<ul class="simple">
<li><p>The distance the wheel has been turned,</p></li>
<li><p>the current threshold set for pellest delivery,</p></li>
<li><p>the total number of pellets delivered, and</p></li>
<li><p>the number of pellets still present in the foraging patch.</p></li>
</ul>
</section>
<section id="alerts">
<h2>Alerts<a class="headerlink" href="#alerts" title="Link to this heading">#</a></h2>
<!-- To be completed -->
<div class="toctree-wrapper compound">
</div>
</section>
</section>


                </article>
              
              
              
              
              
                <footer class="prev-next-footer d-print-none">
                  
<div class="prev-next-area">
    <a class="left-prev"
       href="control_panel/subject_database.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">previous</p>
        <p class="prev-next-title">SubjectDatabase <!--TODO: Placeholder content--></p>
      </div>
    </a>
    <a class="right-next"
       href="foraging_patch/patch_dispenser.html"
       title="next page">
      <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">PatchDispenser</p>
      </div>
      <i class="fa-solid fa-angle-right"></i>
    </a>
</div>
                </footer>
              
            </div>
            
            
              
                <dialog id="pst-secondary-sidebar-modal"></dialog>
                <div id="pst-secondary-sidebar" class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">


  <div class="sidebar-secondary-item">
<div
    id="pst-page-navigation-heading-2"
    class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> On this page
  </div>
  <nav class="bd-toc-nav page-toc" aria-labelledby="pst-page-navigation-heading-2">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#nodes">Nodes</a><ul class="visible nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#undergroundfeeder">UndergroundFeeder</a><ul class="visible nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#inputs">Inputs</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#outputs">Outputs</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#properties">Properties</a><ul class="nav section-nav flex-column">
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#general">General</a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#retry-function">Retry function</a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#subjects">Subjects</a><ul class="nav section-nav flex-column">
<li class="toc-h6 nav-item toc-entry"><a class="reference internal nav-link" href="#device-event-subjects">Device event subjects</a></li>
<li class="toc-h6 nav-item toc-entry"><a class="reference internal nav-link" href="#device-command-subjects">Device command subjects</a></li>
</ul>
</li>
</ul>
</li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#usage">Usage</a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#additional-nodes-subjects-to-be-considered">Additional nodes / subjects to be considered</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#gui">GUI</a><ul class="visible nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#environment-metadata">Environment metadata</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#patchdispenser-control-panel">PatchDispenser control panel</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#patch-threshold-and-wheel-monitoring">Patch threshold and wheel monitoring</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#logging">Logging</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#state-persistence">State persistence</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#alerts">Alerts</a></li>
</ul>
  </nav></div>

  <div class="sidebar-secondary-item">
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../../_sources/reference/acquisition/foraging_patch.md.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
          </footer>
        
      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script defer src="../../_static/scripts/bootstrap.js?digest=8878045cc6db502f8baf"></script>
<script defer src="../../_static/scripts/pydata-sphinx-theme.js?digest=8878045cc6db502f8baf"></script>

  <footer class="bd-footer">
<div class="bd-footer__inner bd-page-width">
  
    <div class="footer-items__start">
      
        <div class="footer-item"><p class="sphinx-version"></p>
    Created using <a href="https://sphinx-doc.org/">Sphinx</a> 8.2.3.
    <br/>
    </p>
    <p class="theme-version">
    Built with the
    <a href="https://pydata-sphinx-theme.readthedocs.io/en/stable/index.html">PyData Sphinx Theme</a>
    0.16.1.
    </p></div>
      
    </div>
  
  
  
    <div class="footer-items__end">
      
        <div class="footer-item"><div class="things-in-a-row">
    <a href="https://neurogears.org/">
        <img src="../../_static/images/light-logo-neurogears.png" alt="Sponsors" class="only-light img-sponsor"/>
        <img src="../../_static/images/dark-logo-neurogears.png" alt="Sponsors" class="only-dark img-sponsor"/>
    </a>
    <a href="https://www.datajoint.com/">
        <img src="../../_static/images/light-logo-datajoint.png" alt="Sponsors" class="only-light img-sponsor"/>
        <img src="../../_static/images/dark-logo-datajoint.png" alt="Sponsors" class="only-dark img-sponsor"/>
    </a>
    <a href="https://wellcome.org/">
        <img src="../../_static/images/light-logo-wellcome.png" alt="Sponsors" class="only-light img-sponsor"/>
        <img src="../../_static/images/dark-logo-wellcome.png" alt="Sponsors" class="only-dark img-sponsor"/>
    </a>
    <a href="https://www.sainsburywellcome.org/web/">
        <img src="../../_static/images/light-logo-swc.png" alt="Sponsors" class="only-light img-sponsor"/>
        <img src="../../_static/images/dark-logo-swc.png" alt="Sponsors" class="only-dark img-sponsor"/>
    </a>
    <a href="https://www.ucl.ac.uk/">
        <img src="../../_static/images/light-logo-ucl.png" alt="Sponsors" class="only-light img-sponsor"/>
        <img src="../../_static/images/dark-logo-ucl.png" alt="Sponsors" class="only-dark img-sponsor"/>
    </a>
    <a href="https://www.ucl.ac.uk/gatsby/gatsby-computational-neuroscience-unit">
        <img src="../../_static/images/light-logo-gatsby.png" alt="Sponsors" class="only-light img-sponsor"/>
        <img src="../../_static/images/dark-logo-gatsby.png" alt="Sponsors" class="only-dark img-sponsor"/>
    </a>
    <a href="https://www.ukri.org/councils/bbsrc/">
        <img src="../../_static/images/light-logo-bbsrc.png" alt="Sponsors" class="only-light img-sponsor"/>
        <img src="../../_static/images/dark-logo-bbsrc.png" alt="Sponsors" class="only-dark img-sponsor"/>
    </a>
    <a href="https://www.simonsfoundation.org/">
        <img src="../../_static/images/light-logo-simons.png" alt="Sponsors" class="only-light img-sponsor"/>
        <img src="../../_static/images/dark-logo-simons.png" alt="Sponsors" class="only-dark img-sponsor"/>
    </a>
</div></div>
      
    </div>
  
</div>

  </footer>
  </body>
</html>