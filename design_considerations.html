
<!DOCTYPE html>


<html lang="en" data-content_root="./" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Design Considerations &#8212; aeon_docs v0.0.3 documentation</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "light";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="_static/styles/theme.css?digest=5b4479735964841361fd" rel="stylesheet" />
<link href="_static/styles/bootstrap.css?digest=5b4479735964841361fd" rel="stylesheet" />
<link href="_static/styles/pydata-sphinx-theme.css?digest=5b4479735964841361fd" rel="stylesheet" />

  
  <link href="_static/vendor/fontawesome/6.1.2/css/all.min.css?digest=5b4479735964841361fd" rel="stylesheet" />
  <link rel="preload" as="font" type="font/woff2" crossorigin href="_static/vendor/fontawesome/6.1.2/webfonts/fa-solid-900.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="_static/vendor/fontawesome/6.1.2/webfonts/fa-brands-400.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="_static/vendor/fontawesome/6.1.2/webfonts/fa-regular-400.woff2" />

    <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=a746c00c" />
    <link rel="stylesheet" type="text/css" href="_static/design-style.1e8bd061cd6da7fc9cf755528e8ffc24.min.css?v=0a3b3ea7" />
    <link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.1/css/all.min.css" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="_static/scripts/bootstrap.js?digest=5b4479735964841361fd" />
<link rel="preload" as="script" href="_static/scripts/pydata-sphinx-theme.js?digest=5b4479735964841361fd" />
  <script src="_static/vendor/fontawesome/6.1.2/js/all.min.js?digest=5b4479735964841361fd"></script>

    <script src="_static/documentation_options.js?v=bc6a6d3b"></script>
    <script src="_static/doctools.js?v=888ff710"></script>
    <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="_static/design-tabs.js?v=36754332"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'design_considerations';</script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Data Schema" href="data_contract.html" />
    <link rel="prev" title="Repositories" href="repositories/index.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <a class="skip-link" href="#main-content">Skip to main content</a>
  
  <div id="pst-scroll-pixel-helper"></div>

  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>
    Back to top
  </button>

  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__primary"
          id="__primary"/>
  <label class="overlay overlay-primary" for="__primary"></label>
  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__secondary"
          id="__secondary"/>
  <label class="overlay overlay-secondary" for="__secondary"></label>
  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
<form class="bd-search d-flex align-items-center"
      action="search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         id="search-input"
         placeholder="Search the docs ..."
         aria-label="Search the docs ..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
  </div>


  <div class="bd-header-announcement container-fluid bd-header-announcement">
    <div class="bd-header-announcement__content">aeon_docs is a WIP. Please report any issues on <a href='https://github.com/SainsburyWellcomeCentre/aeon_docs/issues'>GitHub</a>.</div>
  </div>

  
    <nav class="bd-header navbar navbar-expand-lg bd-navbar">
<div class="bd-header__inner bd-page-width">
  <label class="sidebar-toggle primary-toggle" for="__primary">
    <span class="fa-solid fa-bars"></span>
  </label>
  
  
  <div class="col-lg-3 navbar-header-items__start">
    
      <div class="navbar-item">

  

<a class="navbar-brand logo" href="index.html">
  
  
  
  
  
  
    <p class="title logo__title">aeon_docs v0.0.3</p>
  
</a></div>
    
  </div>
  
  <div class="col-lg-9 navbar-header-items">
    
    <div class="me-auto navbar-header-items__center">
      
        <div class="navbar-item">
<nav class="navbar-nav">
  <p class="sidebar-header-items__title"
     role="heading"
     aria-level="1"
     aria-label="Site Navigation">
    Site Navigation
  </p>
  <ul class="bd-navbar-elements navbar-nav">
    
                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="repositories/index.html">
                        Repositories
                      </a>
                    </li>
                

                    <li class="nav-item current active">
                      <a class="nav-link nav-internal" href="#">
                        Design Considerations
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="data_contract.html">
                        Data Schema
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="api.html">
                        API Reference
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="dev_practices/index.html">
                        Community
                      </a>
                    </li>
                
            <li class="nav-item dropdown">
                <button class="btn dropdown-toggle nav-item" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-controls="pst-nav-more-links">
                    More
                </button>
                <ul id="pst-nav-more-links" class="dropdown-menu">
                    
                    <li class="nav-item">
                      <a class="nav-link dropdown-item nav-internal" href="glossary.html">
                        Glossary
                      </a>
                    </li>
                
                </ul>
            </li>
            
  </ul>
</nav></div>
      
    </div>
    
    
    <div class="navbar-header-items__end">
      
        <div class="navbar-item navbar-persistent--container">
          

 <script>
 document.write(`
   <button class="btn navbar-btn search-button-field search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
    <span class="search-button__default-text">Search</span>
    <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
   </button>
 `);
 </script>
        </div>
      
      
        <div class="navbar-item">

<script>
document.write(`
  <button class="btn btn-sm navbar-btn theme-switch-button" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="theme-switch nav-link" data-mode="light"><i class="fa-solid fa-sun fa-lg"></i></span>
    <span class="theme-switch nav-link" data-mode="dark"><i class="fa-solid fa-moon fa-lg"></i></span>
    <span class="theme-switch nav-link" data-mode="auto"><i class="fa-solid fa-circle-half-stroke fa-lg"></i></span>
  </button>
`);
</script></div>
      
        <div class="navbar-item"><ul class="navbar-icon-links navbar-nav"
    aria-label="Icon Links">
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://github.com/SainsburyWellcomeCentre/aeon_docs" title="GitHub" class="nav-link" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><span><i class="fa-brands fa-github fa-lg" aria-hidden="true"></i></span>
            <span class="sr-only">GitHub</span></a>
        </li>
</ul></div>
      
    </div>
    
  </div>
  
  
    <div class="navbar-persistent--mobile">

 <script>
 document.write(`
   <button class="btn navbar-btn search-button-field search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
    <span class="search-button__default-text">Search</span>
    <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
   </button>
 `);
 </script>
    </div>
  

  
    <label class="sidebar-toggle secondary-toggle" for="__secondary" tabindex="0">
      <span class="fa-solid fa-outdent"></span>
    </label>
  
</div>

    </nav>
  
  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      <div class="bd-sidebar-primary bd-sidebar hide-on-wide">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
      <div class="sidebar-header-items__center">
        
          <div class="navbar-item">
<nav class="navbar-nav">
  <p class="sidebar-header-items__title"
     role="heading"
     aria-level="1"
     aria-label="Site Navigation">
    Site Navigation
  </p>
  <ul class="bd-navbar-elements navbar-nav">
    
                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="repositories/index.html">
                        Repositories
                      </a>
                    </li>
                

                    <li class="nav-item current active">
                      <a class="nav-link nav-internal" href="#">
                        Design Considerations
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="data_contract.html">
                        Data Schema
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="api.html">
                        API Reference
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="dev_practices/index.html">
                        Community
                      </a>
                    </li>
                
            <li class="nav-item dropdown">
                <button class="btn dropdown-toggle nav-item" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-controls="pst-nav-more-links-2">
                    More
                </button>
                <ul id="pst-nav-more-links-2" class="dropdown-menu">
                    
                    <li class="nav-item">
                      <a class="nav-link dropdown-item nav-internal" href="glossary.html">
                        Glossary
                      </a>
                    </li>
                
                </ul>
            </li>
            
  </ul>
</nav></div>
        
      </div>
    
    
    
      <div class="sidebar-header-items__end">
        
          <div class="navbar-item">

<script>
document.write(`
  <button class="btn btn-sm navbar-btn theme-switch-button" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="theme-switch nav-link" data-mode="light"><i class="fa-solid fa-sun fa-lg"></i></span>
    <span class="theme-switch nav-link" data-mode="dark"><i class="fa-solid fa-moon fa-lg"></i></span>
    <span class="theme-switch nav-link" data-mode="auto"><i class="fa-solid fa-circle-half-stroke fa-lg"></i></span>
  </button>
`);
</script></div>
        
          <div class="navbar-item"><ul class="navbar-icon-links navbar-nav"
    aria-label="Icon Links">
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://github.com/SainsburyWellcomeCentre/aeon_docs" title="GitHub" class="nav-link" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><span><i class="fa-brands fa-github fa-lg" aria-hidden="true"></i></span>
            <span class="sr-only">GitHub</span></a>
        </li>
</ul></div>
        
      </div>
    
  </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main">
        
        
          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item">



<nav aria-label="Breadcrumb">
  <ul class="bd-breadcrumbs">
    
    <li class="breadcrumb-item breadcrumb-home">
      <a href="index.html" class="nav-link" aria-label="Home">
        <i class="fa-solid fa-home"></i>
      </a>
    </li>
    <li class="breadcrumb-item active" aria-current="page">Design...</li>
  </ul>
</nav>
</div>
      
    </div>
  
  
</div>
</div>
              
              
              
                
<div id="searchbox"></div>
                <article class="bd-article" role="main">
                  
  <section id="design-considerations">
<span id="target-design-considerations"></span><h1>Design Considerations<a class="headerlink" href="#design-considerations" title="Link to this heading">#</a></h1>
<p>Datasets collected in Project Aeon differ from traditional experimental research in systems neuroscience in unique ways, creating both challenges and opportunities for data exploration, visualization and analysis. Here we outline and discuss these challenges and opportunities in comparison with recently emerging trends in large-scale distributed database management systems.</p>
<section id="the-goal">
<h2>The goal<a class="headerlink" href="#the-goal" title="Link to this heading">#</a></h2>
<p>Studying the brain and behaviour in natural settings has always been severely constrained by the sheer number of variables and scales involved. In response, experimenters invariably attempt to constrain behaviour to a manageable scale by studying a few changing variables at a time, while aiming to keep every other factor fixed.</p>
<p>To do this, behavioural assays often involve reproducible conditions where sequences of stimuli, and the possible responses of animals to those stimuli, is limited and precisely controlled. To ensure robustness to variability in any uncontrolled variables, these conditions are then repeated thousands of times, across multiple animals. This naturally induces a task-centric or experiment-centric description of the brain and behaviour, where datasets are separated from the outset into subjects, sessions and trials, stimulus-response logs, decisions, outcomes, etc.</p>
<p>One of the conceptual aims of Project Aeon is to move the field gradually towards an alternative approach: can we understand new relationships in freely moving behaviour data by allowing animals to set their own goals and control their own behaviour in the environment, and systematically measuring as much as we can from that rich multi-dimensional space of interactions?</p>
<p>Crucially, we are assuming that many variables of interest in our experiments will be a priori hidden from us, and not made explicit by any kind of trial structure, which means relationships will have to be discovered, rather than directly measured, from high-volume data.</p>
</section>
<section id="data-schemas">
<h2>Data Schemas<a class="headerlink" href="#data-schemas" title="Link to this heading">#</a></h2>
<p>In task-centric approaches to the study of behaviour, the relationships between different kinds of experimental data can often be reasonably defined before data collection begins, by taking into account the constraints of the experimental protocol, the apparatus, and expected outcomes and measurements of interest.</p>
<p>In relational database design practice this is called a database schema: a specification outlining the structure of the data stored in the database, and the relationships between them. These schemas might reflect the natural organization of an experiment, for example we might define that there are tables of subjects, which are related to tables of experimental sessions, and tables of trials which store outcomes of fixed experimental conditions. Such schemas are critical in most databases to guarantee efficient access to the data, and their specification is often required <em>prior</em> to the insertion (a.k.a. ingestion) of data in the database. Because of the intimate relationship between schemas and database structure, changing the schema might require drastic changes to the underlying data store, or even purging and recreation of the entire database.</p>
<p>As discussed above, however, Project Aeon experiments are set up in a way that no such separation of the experiment in subjects, sessions and trials really exists. Instead, the assay provides opportunities for animals to express many different possible natural relationships between themselves, objects in the world, and other animals, all monitored in continuous fashion. Indeed, we could say that with Project Aeon the aim is to allow for experimenters to <em>discover</em> the schemas implicit in animal behaviour, by exploring the data, rather than imposing a schema beforehand and measuring many occurrences in fixed data tables.</p>
<section id="primary-schemas">
<h3>Primary Schemas<a class="headerlink" href="#primary-schemas" title="Link to this heading">#</a></h3>
<p>That said, we do have primary schemas, which will constrain how the raw data is stored in the first place. These schemas will be organized mostly around the measurement and control devices in the Project Aeon arena, which due to the specific characteristics of our data acquisition systems, allow every measurement to be uniquely timestamped in a common temporal reference frame with microsecond precision.</p>
<p>The spatial location of each measuring sensor will also be precisely determined, either by mechanical constraint, or by precise spatial calibration procedures. Taken together, this means every raw data point can be assigned a spatial and temporal stamp which can be related to the spatial and temporal stamps of every other measurement in the arena.</p>
<p>All data in Project Aeon will be recorded according to this common spatiotemporal schema, which will form the backbone of a unified framework for exploring and discovering behaviour relationships across space and time.</p>
</section>
<section id="feature-extraction">
<h3>Feature Extraction<a class="headerlink" href="#feature-extraction" title="Link to this heading">#</a></h3>
<p>Several features of interest which will be used to model behavioural relationships in Project Aeon will need to be extracted a posteriori from the raw data. Some of them might be advantageous to precompute and cache for the entire temporal timeseries (e.g. individual animal trajectories), while others might be lightweight and constrained enough as to be computed during query evaluation (e.g. peri-event time histograms), or relative to certain spatial frames of reference (e.g. position of one animal relative to another animal). Below we outline some examples of feature extraction and preprocessing which are likely to come up during Project Aeon.</p>
<section id="trajectory-data">
<h4>Trajectory Data<a class="headerlink" href="#trajectory-data" title="Link to this heading">#</a></h4>
<p>Spatio-temporal trajectory data for individual animals needs to be extracted from raw video recorded across different imaging devices installed around the arena. Individual frames will be triggered simultaneously, so identified spatial locations can be assigned a unique timestamp across all devices. However, computer vision preprocessing will be required to correctly identify and track animal identities across the video. Tracking data may have to be combined with other sensor data such as RFID readings to ensure the correct animal identity is assigned throughout the entire experiment.</p>
<p>Individual cameras will be calibrated so that their field-of-view, position, and orientation relative to the arena reference frame is known. The goal is to allow triangulation of a tracked animal position in 3D space. Conversely, once the 3D position of an object of interest is known accurately, its projection on any other calibrated image sensor can be determined, allowing us to choose different viewpoints or close-ups into a behaviour.</p>
<p>Computer vision preprocessing is a compute-heavy task, especially across multiple video devices, so there is a clear advantage to caching the results of such preprocessing for subsequent queries. Depending on algorithmic complexity, it might even be desirable to compute certain processing steps online during the acquisition stage, such as unlabeled trajectory data.</p>
</section>
<section id="spike-times">
<h4>Spike Times<a class="headerlink" href="#spike-times" title="Link to this heading">#</a></h4>
</section>
</section>
<section id="data-ingestion">
<h3>Data Ingestion<a class="headerlink" href="#data-ingestion" title="Link to this heading">#</a></h3>
<p>How high is high-volume data in Project Aeon? For our first behavioural arena we anticipate anywhere between 3 to 5 behavioural imaging devices, around 10 behaviour patches and  acquisition sensors</p>
</section>
</section>
<section id="cluster-computing">
<h2>Cluster Computing<a class="headerlink" href="#cluster-computing" title="Link to this heading">#</a></h2>
<section id="timeseries-data">
<h3>Timeseries Data<a class="headerlink" href="#timeseries-data" title="Link to this heading">#</a></h3>
<section id="dense-and-sparse-timeseries">
<h4>Dense and Sparse Timeseries<a class="headerlink" href="#dense-and-sparse-timeseries" title="Link to this heading">#</a></h4>
</section>
</section>
<section id="spatial-data">
<h3>Spatial Data<a class="headerlink" href="#spatial-data" title="Link to this heading">#</a></h3>
<section id="spatial-hashing">
<h4>Spatial Hashing<a class="headerlink" href="#spatial-hashing" title="Link to this heading">#</a></h4>
<p>Once <a class="reference external" href="https://en.wikipedia.org/wiki/Geohash">Geohashing</a></p>
</section>
</section>
<section id="spatiotemporal-data">
<h3>Spatiotemporal Data<a class="headerlink" href="#spatiotemporal-data" title="Link to this heading">#</a></h3>
</section>
</section>
<section id="data-provenance">
<h2>Data Provenance<a class="headerlink" href="#data-provenance" title="Link to this heading">#</a></h2>
<p>To effectively enable and organize massive parallel exploration and discovery in Project Aeon datasets, we adopt a strict policy to data generation and storage. Specifically, every data element in Project Aeon belongs to only one of two classes: <em>raw data</em> or <em>derived data</em>.</p>
<p>Raw data are the result of experiments or manual input, and never change from the moment they are generated. Derived data are artifacts computed deterministically from the raw data. They are defined entirely by computational procedures working on the raw data.</p>
<section id="raw-data">
<h3>Raw Data<a class="headerlink" href="#raw-data" title="Link to this heading">#</a></h3>
<p>Raw data are the primary artifacts of experimental measurements in Project Aeon. Once raw data is acquired and timestamped, it becomes immutable. This means we will never update or revise these values, or update their timestamps, ever again. This assumption of immutable timestamped data introduces several immediate advantages to data processing pipelines:</p>
<ul class="simple">
<li><p><strong>Parallel access:</strong> since raw data is guaranteed to be immutable, every file in the dataset can be accessed simultaneously by an arbitrary number of clients, ensuring consistency without the need of locking access to files;</p></li>
<li><p><strong>Caching:</strong> derived measurements, statistics, or conclusions deterministically computed from immutable raw data will also never change, which means they can be cached indefinitely;</p></li>
<li><p><strong>Total Ordering:</strong> since every raw data element is timestamped in a common temporal reference frame, there is a natural total ordering imposed on Project Aeon datasets. This can be exploited for fast indexing and partitioning of temporal data.</p></li>
</ul>
</section>
<section id="derived-data">
<h3>Derived Data<a class="headerlink" href="#derived-data" title="Link to this heading">#</a></h3>
<p>Derived data are artifacts computed from the raw data by deterministic computational procedures, or code. Because of the immutability of raw data, this means that by storing the source code which generates the derived data together with the original source of raw data, we will always be able to reconstruct the derived artifacts through computation.</p>
<p>If the source code for all derived data computations is uniquely tagged and version-controlled, we can safely pipe derived data as input to other computations, as a list of dependencies. These assumptions on derived data introduce several immediate advantages to data exploration and analysis pipelines:</p>
<ul class="simple">
<li><p><strong>Storage efficiency:</strong> because code is so incredibly compact, and version-controlling the code is enough to completely specify the derived data, we can safely delete any intermediate artifacts we are no longer interested in and keep only the code;</p></li>
<li><p><strong>Reproducibility:</strong> since all derived artifacts can be deterministically reconstructed from raw data and code, this means every analysis step required to generate Project Aeon outputs will be reproducible;</p></li>
<li><p><strong>Provenance:</strong> since every derived artifact will store a reference to the data dependencies it requires (both raw and derived data), we can always reconstruct and track the exact history of how a certain artifact was generated.</p></li>
</ul>
</section>
</section>
<section id="challenges-and-questions">
<h2>Challenges and Questions<a class="headerlink" href="#challenges-and-questions" title="Link to this heading">#</a></h2>
<p>Despite the simplicity of the assumptions above, there are several situations in which we feel these constraints might be violated. Below we outline some of these situations, and how to address them to preserve the conceptual integrity of the Project Aeon data provenance scheme.</p>
<section id="accidental-mutation">
<h3>Accidental Mutation<a class="headerlink" href="#accidental-mutation" title="Link to this heading">#</a></h3>
<p>In order to guarantee the immutability of experimental raw data against accidental mutations, we will limit write access on the data store to the acquisition computer. Every other human and machine user will have only read access to the data in bulk storage. Tape backup of acquired data will be performed in incremental fashion to provide an extra level of protection.</p>
<p>Source code for derived data computations will be stored using a distributed version-control system such as Git. Automatic validations will be in place to ensure no missing dependencies are missing or incorrect. In any case, since all operations on the raw data are non-destructive, the state of data preprocessing pipelines can always be reverted and corrected afterwards. History on the main branch of the repository <em>must not</em> be rewritten to ensure the provenance of derived artifacts, so the use of branches for developmental experimentation should be encouraged and possibly strictly enforced.</p>
</section>
<section id="manual-analysis-steps">
<h3>Manual Analysis Steps<a class="headerlink" href="#manual-analysis-steps" title="Link to this heading">#</a></h3>
<p>There might be situations in which specific analysis steps cannot be fully automated through code scripts, for example during manual annotation of data by human operators. This would violate the reproducibility constraints for derived data since we cannot reliably reproduce the human decision making process during manual annotation.</p>
<p>We can, however, log the annotation procedure itself and treat it as an experiment. Essentially we keep a complete record of the decisions the operator made while preprocessing the data. For example, if ROIs need to be selected, or frames labelled, we would simply need to store the frame numbers or ROI coordinates which the human provided to the annotation pipeline.</p>
<p>In other words, manual annotation steps are treated exactly the same as raw data, to be timestamped and stored as an immutable data store for future analysis steps. Such procedures should also record enough documentation, metadata and rely on open-source reproducible tools to allow future human operators to repeat the procedure, if further manual annotation is to be performed. For avoidance of doubt, refinement of a manual annotation is possible, but will itself generate a new timestamped immutable dataset.</p>
<p>In order to keep with the principles of efficient storage and data provenance, manual annotation tools which avoid direct editing or duplication of raw input files should be preferred. As an example, manual editing of a picture using a bitmap image editor would be vastly inefficient as we would have to store an expensive binary copy of the manipulated image. Rather, we should strive to store only the human provided directives themselves, such as the coordinates of selected ROIs, key strokes, text labels and the like which can be logged with minimal effort and reliably applied to reconstruct the manual annotation process. For example, we might prefer tools supporting the execution of macros or scripts from batch, as they are more likely to allow the ability to reconstruct the output of the manual processing steps from data.</p>
</section>
</section>
</section>


                </article>
              
              
              
              
              
                <footer class="prev-next-footer">
                  
<div class="prev-next-area">
    <a class="left-prev"
       href="repositories/index.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">previous</p>
        <p class="prev-next-title">Repositories</p>
      </div>
    </a>
    <a class="right-next"
       href="data_contract.html"
       title="next page">
      <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">Data Schema</p>
      </div>
      <i class="fa-solid fa-angle-right"></i>
    </a>
</div>
                </footer>
              
            </div>
            
            
              
                <div class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">

  <div class="sidebar-secondary-item">

  <div class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> On this page
  </div>
  <nav class="bd-toc-nav page-toc">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#the-goal">The goal</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#data-schemas">Data Schemas</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#primary-schemas">Primary Schemas</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#feature-extraction">Feature Extraction</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#trajectory-data">Trajectory Data</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#spike-times">Spike Times</a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#data-ingestion">Data Ingestion</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#cluster-computing">Cluster Computing</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#timeseries-data">Timeseries Data</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#dense-and-sparse-timeseries">Dense and Sparse Timeseries</a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#spatial-data">Spatial Data</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#spatial-hashing">Spatial Hashing</a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#spatiotemporal-data">Spatiotemporal Data</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#data-provenance">Data Provenance</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#raw-data">Raw Data</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#derived-data">Derived Data</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#challenges-and-questions">Challenges and Questions</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#accidental-mutation">Accidental Mutation</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#manual-analysis-steps">Manual Analysis Steps</a></li>
</ul>
</li>
</ul>
  </nav></div>

  <div class="sidebar-secondary-item">

  <div class="tocsection sourcelink">
    <a href="_sources/design_considerations.md.txt">
      <i class="fa-solid fa-file-lines"></i> Show Source
    </a>
  </div>
</div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
          </footer>
        
      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="_static/scripts/bootstrap.js?digest=5b4479735964841361fd"></script>
<script src="_static/scripts/pydata-sphinx-theme.js?digest=5b4479735964841361fd"></script>

  <footer class="bd-footer">
<div class="bd-footer__inner bd-page-width">
  
    <div class="footer-items__start">
      
        <div class="footer-item">

  <p class="copyright">
    
      © Copyright 2022–2023, Jai Bhagat, Goncalo Lopes, Chang Huan Lo.
      <br/>
    
  </p>
</div>
      
        <div class="footer-item">

  <p class="sphinx-version">
    Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 7.2.6.
    <br/>
  </p>
</div>
      
    </div>
  
  
  
    <div class="footer-items__end">
      
        <div class="footer-item">
<p class="theme-version">
  Built with the <a href="https://pydata-sphinx-theme.readthedocs.io/en/stable/index.html">PyData Sphinx Theme</a> 0.14.4.
</p></div>
      
    </div>
  
</div>

  </footer>
  </body>
</html>